var Mo=Object.defineProperty;var No=(t,e,r)=>e in t?Mo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var V=(t,e,r)=>(No(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();var Tt=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Tt||{}),ha=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(ha||{}),as=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(as||{}),k=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(k||{}),ii=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(ii||{}),O=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(O||{}),Ot=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Ot||{}),q=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(q||{}),os=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(os||{}),ve=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(ve||{}),Ls=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ls||{}),xt=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(xt||{}),nt=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(nt||{}),lt=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(lt||{}),Us=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Us||{}),Ae=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Ae||{}),ce=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(ce||{}),oe=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(oe||{}),Xe=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Xe||{});const Bo={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},W={ADAPTER:Bo,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Ri=/iPhone/i,rn=/iPod/i,sn=/iPad/i,nn=/\biOS-universal(?:.+)Mac\b/i,Ci=/\bAndroid(?:.+)Mobile\b/i,an=/Android/i,wt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Pr=/Silk/i,ze=/Windows Phone/i,on=/\bWindows(?:.+)ARM\b/i,cn=/BlackBerry/i,hn=/BB10/i,fn=/Opera Mini/i,ln=/\b(CriOS|Chrome)(?:.+)Mobile/i,un=/Mobile(?:.+)Firefox\b/i,dn=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Oo(t){return function(e){return e.test(t)}}function pn(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var s=Oo(r),n={apple:{phone:s(Ri)&&!s(ze),ipod:s(rn),tablet:!s(Ri)&&(s(sn)||dn(e))&&!s(ze),universal:s(nn),device:(s(Ri)||s(rn)||s(sn)||s(nn)||dn(e))&&!s(ze)},amazon:{phone:s(wt),tablet:!s(wt)&&s(Pr),device:s(wt)||s(Pr)},android:{phone:!s(ze)&&s(wt)||!s(ze)&&s(Ci),tablet:!s(ze)&&!s(wt)&&!s(Ci)&&(s(Pr)||s(an)),device:!s(ze)&&(s(wt)||s(Pr)||s(Ci)||s(an))||s(/\bokhttp\b/i)},windows:{phone:s(ze),tablet:s(on),device:s(ze)||s(on)},other:{blackberry:s(cn),blackberry10:s(hn),opera:s(fn),firefox:s(un),chrome:s(ln),device:s(cn)||s(hn)||s(fn)||s(un)||s(ln)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const Fo=pn.default??pn,Mt=Fo(globalThis.navigator);W.RETINA_PREFIX=/@([0-9\.]+)x/;W.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Do(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lo(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var fa={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(c,h,f){this.fn=c,this.context=h,this.once=f||!1}function n(c,h,f,l,u){if(typeof f!="function")throw new TypeError("The listener must be a function");var b=new s(f,l||c,u),y=r?r+h:h;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],b]:c._events[y].push(b):(c._events[y]=b,c._eventsCount++),c}function a(c,h){--c._eventsCount===0?c._events=new i:delete c._events[h]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],f,l;if(this._eventsCount===0)return h;for(l in f=this._events)e.call(f,l)&&h.push(r?l.slice(1):l);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},o.prototype.listeners=function(h){var f=r?r+h:h,l=this._events[f];if(!l)return[];if(l.fn)return[l.fn];for(var u=0,b=l.length,y=new Array(b);u<b;u++)y[u]=l[u].fn;return y},o.prototype.listenerCount=function(h){var f=r?r+h:h,l=this._events[f];return l?l.fn?1:l.length:0},o.prototype.emit=function(h,f,l,u,b,y){var w=r?r+h:h;if(!this._events[w])return!1;var T=this._events[w],S=arguments.length,p,d;if(T.fn){switch(T.once&&this.removeListener(h,T.fn,void 0,!0),S){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,l),!0;case 4:return T.fn.call(T.context,f,l,u),!0;case 5:return T.fn.call(T.context,f,l,u,b),!0;case 6:return T.fn.call(T.context,f,l,u,b,y),!0}for(d=1,p=new Array(S-1);d<S;d++)p[d-1]=arguments[d];T.fn.apply(T.context,p)}else{var x=T.length,E;for(d=0;d<x;d++)switch(T[d].once&&this.removeListener(h,T[d].fn,void 0,!0),S){case 1:T[d].fn.call(T[d].context);break;case 2:T[d].fn.call(T[d].context,f);break;case 3:T[d].fn.call(T[d].context,f,l);break;case 4:T[d].fn.call(T[d].context,f,l,u);break;default:if(!p)for(E=1,p=new Array(S-1);E<S;E++)p[E-1]=arguments[E];T[d].fn.apply(T[d].context,p)}}return!0},o.prototype.on=function(h,f,l){return n(this,h,f,l,!1)},o.prototype.once=function(h,f,l){return n(this,h,f,l,!0)},o.prototype.removeListener=function(h,f,l,u){var b=r?r+h:h;if(!this._events[b])return this;if(!f)return a(this,b),this;var y=this._events[b];if(y.fn)y.fn===f&&(!u||y.once)&&(!l||y.context===l)&&a(this,b);else{for(var w=0,T=[],S=y.length;w<S;w++)(y[w].fn!==f||u&&!y[w].once||l&&y[w].context!==l)&&T.push(y[w]);T.length?this._events[b]=T.length===1?T[0]:T:a(this,b)}return this},o.prototype.removeAllListeners=function(h){var f;return h?(f=r?r+h:h,this._events[f]&&a(this,f)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o})(fa);var Uo=fa.exports;const br=Do(Uo);var la={exports:{}};la.exports=pi;la.exports.default=pi;function pi(t,e,r){r=r||2;var i=e&&e.length,s=i?e[0]*r:t.length,n=ua(t,0,s,r,!0),a=[];if(!n||n.next===n.prev)return a;var o,c,h,f,l,u,b;if(i&&(n=Ho(t,e,n,r)),t.length>80*r){o=h=t[0],c=f=t[1];for(var y=r;y<s;y+=r)l=t[y],u=t[y+1],l<o&&(o=l),u<c&&(c=u),l>h&&(h=l),u>f&&(f=u);b=Math.max(h-o,f-c),b=b!==0?32767/b:0}return lr(n,a,r,o,c,b,0),a}function ua(t,e,r,i,s){var n,a;if(s===fs(t,e,r,i)>0)for(n=e;n<r;n+=i)a=mn(n,t[n],t[n+1],a);else for(n=r-i;n>=e;n-=i)a=mn(n,t[n],t[n+1],a);return a&&mi(a,a.next)&&(dr(a),a=a.next),a}function Et(t,e){if(!t)return t;e||(e=t);var r=t,i;do if(i=!1,!r.steiner&&(mi(r,r.next)||ne(r.prev,r,r.next)===0)){if(dr(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function lr(t,e,r,i,s,n,a){if(t){!a&&n&&jo(t,i,s,n);for(var o=t,c,h;t.prev!==t.next;){if(c=t.prev,h=t.next,n?Go(t,i,s,n):ko(t)){e.push(c.i/r|0),e.push(t.i/r|0),e.push(h.i/r|0),dr(t),t=h.next,o=h.next;continue}if(t=h,t===o){a?a===1?(t=Xo(Et(t),e,r),lr(t,e,r,i,s,n,2)):a===2&&Vo(t,e,r,i,s,n):lr(Et(t),e,r,i,s,n,1);break}}}}function ko(t){var e=t.prev,r=t,i=t.next;if(ne(e,r,i)>=0)return!1;for(var s=e.x,n=r.x,a=i.x,o=e.y,c=r.y,h=i.y,f=s<n?s<a?s:a:n<a?n:a,l=o<c?o<h?o:h:c<h?c:h,u=s>n?s>a?s:a:n>a?n:a,b=o>c?o>h?o:h:c>h?c:h,y=i.next;y!==e;){if(y.x>=f&&y.x<=u&&y.y>=l&&y.y<=b&&Nt(s,o,n,c,a,h,y.x,y.y)&&ne(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Go(t,e,r,i){var s=t.prev,n=t,a=t.next;if(ne(s,n,a)>=0)return!1;for(var o=s.x,c=n.x,h=a.x,f=s.y,l=n.y,u=a.y,b=o<c?o<h?o:h:c<h?c:h,y=f<l?f<u?f:u:l<u?l:u,w=o>c?o>h?o:h:c>h?c:h,T=f>l?f>u?f:u:l>u?l:u,S=cs(b,y,e,r,i),p=cs(w,T,e,r,i),d=t.prevZ,x=t.nextZ;d&&d.z>=S&&x&&x.z<=p;){if(d.x>=b&&d.x<=w&&d.y>=y&&d.y<=T&&d!==s&&d!==a&&Nt(o,f,c,l,h,u,d.x,d.y)&&ne(d.prev,d,d.next)>=0||(d=d.prevZ,x.x>=b&&x.x<=w&&x.y>=y&&x.y<=T&&x!==s&&x!==a&&Nt(o,f,c,l,h,u,x.x,x.y)&&ne(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;d&&d.z>=S;){if(d.x>=b&&d.x<=w&&d.y>=y&&d.y<=T&&d!==s&&d!==a&&Nt(o,f,c,l,h,u,d.x,d.y)&&ne(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;x&&x.z<=p;){if(x.x>=b&&x.x<=w&&x.y>=y&&x.y<=T&&x!==s&&x!==a&&Nt(o,f,c,l,h,u,x.x,x.y)&&ne(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Xo(t,e,r){var i=t;do{var s=i.prev,n=i.next.next;!mi(s,n)&&da(s,i,i.next,n)&&ur(s,n)&&ur(n,s)&&(e.push(s.i/r|0),e.push(i.i/r|0),e.push(n.i/r|0),dr(i),dr(i.next),i=t=n),i=i.next}while(i!==t);return Et(i)}function Vo(t,e,r,i,s,n){var a=t;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Zo(a,o)){var c=pa(a,o);a=Et(a,a.next),c=Et(c,c.next),lr(a,e,r,i,s,n,0),lr(c,e,r,i,s,n,0);return}o=o.next}a=a.next}while(a!==t)}function Ho(t,e,r,i){var s=[],n,a,o,c,h;for(n=0,a=e.length;n<a;n++)o=e[n]*i,c=n<a-1?e[n+1]*i:t.length,h=ua(t,o,c,i,!1),h===h.next&&(h.steiner=!0),s.push(Ko(h));for(s.sort($o),n=0;n<s.length;n++)r=zo(s[n],r);return r}function $o(t,e){return t.x-e.x}function zo(t,e){var r=Wo(t,e);if(!r)return e;var i=pa(r,t);return Et(i,i.next),Et(r,r.next)}function Wo(t,e){var r=e,i=t.x,s=t.y,n=-1/0,a;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var o=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>n&&(n=o,a=r.x<r.next.x?r:r.next,o===i))return a}r=r.next}while(r!==e);if(!a)return null;var c=a,h=a.x,f=a.y,l=1/0,u;r=a;do i>=r.x&&r.x>=h&&i!==r.x&&Nt(s<f?i:n,s,h,f,s<f?n:i,s,r.x,r.y)&&(u=Math.abs(s-r.y)/(i-r.x),ur(r,t)&&(u<l||u===l&&(r.x>a.x||r.x===a.x&&Yo(a,r)))&&(a=r,l=u)),r=r.next;while(r!==c);return a}function Yo(t,e){return ne(t.prev,t,e.prev)<0&&ne(e.next,t,t.next)<0}function jo(t,e,r,i){var s=t;do s.z===0&&(s.z=cs(s.x,s.y,e,r,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,qo(s)}function qo(t){var e,r,i,s,n,a,o,c,h=1;do{for(r=t,t=null,n=null,a=0;r;){for(a++,i=r,o=0,e=0;e<h&&(o++,i=i.nextZ,!!i);e++);for(c=h;o>0||c>0&&i;)o!==0&&(c===0||!i||r.z<=i.z)?(s=r,r=r.nextZ,o--):(s=i,i=i.nextZ,c--),n?n.nextZ=s:t=s,s.prevZ=n,n=s;r=i}n.nextZ=null,h*=2}while(a>1);return t}function cs(t,e,r,i,s){return t=(t-r)*s|0,e=(e-i)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Ko(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Nt(t,e,r,i,s,n,a,o){return(s-a)*(e-o)>=(t-a)*(n-o)&&(t-a)*(i-o)>=(r-a)*(e-o)&&(r-a)*(n-o)>=(s-a)*(i-o)}function Zo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Qo(t,e)&&(ur(t,e)&&ur(e,t)&&Jo(t,e)&&(ne(t.prev,t,e.prev)||ne(t,e.prev,e))||mi(t,e)&&ne(t.prev,t,t.next)>0&&ne(e.prev,e,e.next)>0)}function ne(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function mi(t,e){return t.x===e.x&&t.y===e.y}function da(t,e,r,i){var s=Cr(ne(t,e,r)),n=Cr(ne(t,e,i)),a=Cr(ne(r,i,t)),o=Cr(ne(r,i,e));return!!(s!==n&&a!==o||s===0&&Rr(t,r,e)||n===0&&Rr(t,i,e)||a===0&&Rr(r,t,i)||o===0&&Rr(r,e,i))}function Rr(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Cr(t){return t>0?1:t<0?-1:0}function Qo(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&da(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function ur(t,e){return ne(t.prev,t,t.next)<0?ne(t,e,t.next)>=0&&ne(t,t.prev,e)>=0:ne(t,e,t.prev)<0||ne(t,t.next,e)<0}function Jo(t,e){var r=t,i=!1,s=(t.x+e.x)/2,n=(t.y+e.y)/2;do r.y>n!=r.next.y>n&&r.next.y!==r.y&&s<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function pa(t,e){var r=new hs(t.i,t.x,t.y),i=new hs(e.i,e.x,e.y),s=t.next,n=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,i.next=r,r.prev=i,n.next=i,i.prev=n,i}function mn(t,e,r,i){var s=new hs(t,e,r);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function dr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function hs(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}pi.deviation=function(t,e,r,i){var s=e&&e.length,n=s?e[0]*r:t.length,a=Math.abs(fs(t,0,n,r));if(s)for(var o=0,c=e.length;o<c;o++){var h=e[o]*r,f=o<c-1?e[o+1]*r:t.length;a-=Math.abs(fs(t,h,f,r))}var l=0;for(o=0;o<i.length;o+=3){var u=i[o]*r,b=i[o+1]*r,y=i[o+2]*r;l+=Math.abs((t[u]-t[y])*(t[b+1]-t[u+1])-(t[u]-t[b])*(t[y+1]-t[u+1]))}return a===0&&l===0?0:Math.abs((l-a)/a)};function fs(t,e,r,i){for(var s=0,n=e,a=r-i;n<r;n+=i)s+=(t[a]-t[n])*(t[n+1]+t[a+1]),a=n;return s}pi.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,s=0;s<t.length;s++){for(var n=0;n<t[s].length;n++)for(var a=0;a<e;a++)r.vertices.push(t[s][n][a]);s>0&&(i+=t[s-1].length,r.holes.push(i))}return r};var si={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */si.exports;(function(t,e){(function(r){var i=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,n=typeof Be=="object"&&Be;(n.global===n||n.window===n||n.self===n)&&(r=n);var a,o=2147483647,c=36,h=1,f=26,l=38,u=700,b=72,y=128,w="-",T=/^xn--/,S=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=c-h,E=Math.floor,_=String.fromCharCode,I;function A(N){throw new RangeError(d[N])}function v(N,D){for(var L=N.length,Y=[];L--;)Y[L]=D(N[L]);return Y}function g(N,D){var L=N.split("@"),Y="";L.length>1&&(Y=L[0]+"@",N=L[1]),N=N.replace(p,".");var j=N.split("."),ae=v(j,D).join(".");return Y+ae}function m(N){for(var D=[],L=0,Y=N.length,j,ae;L<Y;)j=N.charCodeAt(L++),j>=55296&&j<=56319&&L<Y?(ae=N.charCodeAt(L++),(ae&64512)==56320?D.push(((j&1023)<<10)+(ae&1023)+65536):(D.push(j),L--)):D.push(j);return D}function P(N){return v(N,function(D){var L="";return D>65535&&(D-=65536,L+=_(D>>>10&1023|55296),D=56320|D&1023),L+=_(D),L}).join("")}function R(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:c}function M(N,D){return N+22+75*(N<26)-((D!=0)<<5)}function B(N,D,L){var Y=0;for(N=L?E(N/u):N>>1,N+=E(N/D);N>x*f>>1;Y+=c)N=E(N/x);return E(Y+(x+1)*N/(N+l))}function C(N){var D=[],L=N.length,Y,j=0,ae=y,ee=b,de,_e,De,$e,pe,Te,Pe,Ze,ct;for(de=N.lastIndexOf(w),de<0&&(de=0),_e=0;_e<de;++_e)N.charCodeAt(_e)>=128&&A("not-basic"),D.push(N.charCodeAt(_e));for(De=de>0?de+1:0;De<L;){for($e=j,pe=1,Te=c;De>=L&&A("invalid-input"),Pe=R(N.charCodeAt(De++)),(Pe>=c||Pe>E((o-j)/pe))&&A("overflow"),j+=Pe*pe,Ze=Te<=ee?h:Te>=ee+f?f:Te-ee,!(Pe<Ze);Te+=c)ct=c-Ze,pe>E(o/ct)&&A("overflow"),pe*=ct;Y=D.length+1,ee=B(j-$e,Y,$e==0),E(j/Y)>o-ae&&A("overflow"),ae+=E(j/Y),j%=Y,D.splice(j++,0,ae)}return P(D)}function G(N){var D,L,Y,j,ae,ee,de,_e,De,$e,pe,Te=[],Pe,Ze,ct,Pi;for(N=m(N),Pe=N.length,D=y,L=0,ae=b,ee=0;ee<Pe;++ee)pe=N[ee],pe<128&&Te.push(_(pe));for(Y=j=Te.length,j&&Te.push(w);Y<Pe;){for(de=o,ee=0;ee<Pe;++ee)pe=N[ee],pe>=D&&pe<de&&(de=pe);for(Ze=Y+1,de-D>E((o-L)/Ze)&&A("overflow"),L+=(de-D)*Ze,D=de,ee=0;ee<Pe;++ee)if(pe=N[ee],pe<D&&++L>o&&A("overflow"),pe==D){for(_e=L,De=c;$e=De<=ae?h:De>=ae+f?f:De-ae,!(_e<$e);De+=c)Pi=_e-$e,ct=c-$e,Te.push(_(M($e+Pi%ct,0))),_e=E(Pi/ct);Te.push(_(M(_e,0))),ae=B(L,Ze,Y==j),L=0,++Y}++L,++D}return Te.join("")}function $(N){return g(N,function(D){return T.test(D)?C(D.slice(4).toLowerCase()):D})}function J(N){return g(N,function(D){return S.test(D)?"xn--"+G(D):D})}if(a={version:"1.4.1",ucs2:{decode:m,encode:P},decode:C,encode:G,toASCII:J,toUnicode:$},i&&s)if(t.exports==i)s.exports=a;else for(I in a)a.hasOwnProperty(I)&&(i[I]=a[I]);else r.punycode=a})(Be)})(si,si.exports);var ec=si.exports,tc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var n=Object.getOwnPropertySymbols(e);if(n.length!==1||n[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==s||a.enumerable!==!0)return!1}return!0},yn=typeof Symbol<"u"&&Symbol,rc=tc,ic=function(){return typeof yn!="function"||typeof Symbol!="function"||typeof yn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:rc()},gn={foo:{}},sc=Object,nc=function(){return{__proto__:gn}.foo===gn.foo&&!({__proto__:null}instanceof sc)},ac="Function.prototype.bind called on incompatible ",Mi=Array.prototype.slice,oc=Object.prototype.toString,cc="[object Function]",hc=function(e){var r=this;if(typeof r!="function"||oc.call(r)!==cc)throw new TypeError(ac+r);for(var i=Mi.call(arguments,1),s,n=function(){if(this instanceof s){var f=r.apply(this,i.concat(Mi.call(arguments)));return Object(f)===f?f:this}else return r.apply(e,i.concat(Mi.call(arguments)))},a=Math.max(0,r.length-i.length),o=[],c=0;c<a;c++)o.push("$"+c);if(s=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")(n),r.prototype){var h=function(){};h.prototype=r.prototype,s.prototype=new h,h.prototype=null}return s},fc=hc,ks=Function.prototype.bind||fc,lc=ks,uc=lc.call(Function.call,Object.prototype.hasOwnProperty),H,kt=SyntaxError,ma=Function,Ft=TypeError,Ni=function(t){try{return ma('"use strict"; return ('+t+").constructor;")()}catch{}},vt=Object.getOwnPropertyDescriptor;if(vt)try{vt({},"")}catch{vt=null}var Bi=function(){throw new Ft},dc=vt?function(){try{return arguments.callee,Bi}catch{try{return vt(arguments,"callee").get}catch{return Bi}}}():Bi,At=ic(),pc=nc(),fe=Object.getPrototypeOf||(pc?function(t){return t.__proto__}:null),Pt={},mc=typeof Uint8Array>"u"||!fe?H:fe(Uint8Array),_t={"%AggregateError%":typeof AggregateError>"u"?H:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?H:ArrayBuffer,"%ArrayIteratorPrototype%":At&&fe?fe([][Symbol.iterator]()):H,"%AsyncFromSyncIteratorPrototype%":H,"%AsyncFunction%":Pt,"%AsyncGenerator%":Pt,"%AsyncGeneratorFunction%":Pt,"%AsyncIteratorPrototype%":Pt,"%Atomics%":typeof Atomics>"u"?H:Atomics,"%BigInt%":typeof BigInt>"u"?H:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?H:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?H:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?H:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?H:Float32Array,"%Float64Array%":typeof Float64Array>"u"?H:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?H:FinalizationRegistry,"%Function%":ma,"%GeneratorFunction%":Pt,"%Int8Array%":typeof Int8Array>"u"?H:Int8Array,"%Int16Array%":typeof Int16Array>"u"?H:Int16Array,"%Int32Array%":typeof Int32Array>"u"?H:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":At&&fe?fe(fe([][Symbol.iterator]())):H,"%JSON%":typeof JSON=="object"?JSON:H,"%Map%":typeof Map>"u"?H:Map,"%MapIteratorPrototype%":typeof Map>"u"||!At||!fe?H:fe(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?H:Promise,"%Proxy%":typeof Proxy>"u"?H:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?H:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?H:Set,"%SetIteratorPrototype%":typeof Set>"u"||!At||!fe?H:fe(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?H:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":At&&fe?fe(""[Symbol.iterator]()):H,"%Symbol%":At?Symbol:H,"%SyntaxError%":kt,"%ThrowTypeError%":dc,"%TypedArray%":mc,"%TypeError%":Ft,"%Uint8Array%":typeof Uint8Array>"u"?H:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?H:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?H:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?H:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?H:WeakMap,"%WeakRef%":typeof WeakRef>"u"?H:WeakRef,"%WeakSet%":typeof WeakSet>"u"?H:WeakSet};if(fe)try{null.error}catch(t){var yc=fe(fe(t));_t["%Error.prototype%"]=yc}var gc=function t(e){var r;if(e==="%AsyncFunction%")r=Ni("async function () {}");else if(e==="%GeneratorFunction%")r=Ni("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ni("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&fe&&(r=fe(s.prototype))}return _t[e]=r,r},bn={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vr=ks,ni=uc,bc=vr.call(Function.call,Array.prototype.concat),vc=vr.call(Function.apply,Array.prototype.splice),vn=vr.call(Function.call,String.prototype.replace),ai=vr.call(Function.call,String.prototype.slice),_c=vr.call(Function.call,RegExp.prototype.exec),xc=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ec=/\\(\\)?/g,Tc=function(e){var r=ai(e,0,1),i=ai(e,-1);if(r==="%"&&i!=="%")throw new kt("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new kt("invalid intrinsic syntax, expected opening `%`");var s=[];return vn(e,xc,function(n,a,o,c){s[s.length]=o?vn(c,Ec,"$1"):a||n}),s},wc=function(e,r){var i=e,s;if(ni(bn,i)&&(s=bn[i],i="%"+s[0]+"%"),ni(_t,i)){var n=_t[i];if(n===Pt&&(n=gc(i)),typeof n>"u"&&!r)throw new Ft("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:n}}throw new kt("intrinsic "+e+" does not exist!")},Gs=function(e,r){if(typeof e!="string"||e.length===0)throw new Ft("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ft('"allowMissing" argument must be a boolean');if(_c(/^%?[^%]*%?$/,e)===null)throw new kt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Tc(e),s=i.length>0?i[0]:"",n=wc("%"+s+"%",r),a=n.name,o=n.value,c=!1,h=n.alias;h&&(s=h[0],vc(i,bc([0,1],h)));for(var f=1,l=!0;f<i.length;f+=1){var u=i[f],b=ai(u,0,1),y=ai(u,-1);if((b==='"'||b==="'"||b==="`"||y==='"'||y==="'"||y==="`")&&b!==y)throw new kt("property names with quotes must have matching quotes");if((u==="constructor"||!l)&&(c=!0),s+="."+u,a="%"+s+"%",ni(_t,a))o=_t[a];else if(o!=null){if(!(u in o)){if(!r)throw new Ft("base intrinsic for "+e+" exists, but the property is not available.");return}if(vt&&f+1>=i.length){var w=vt(o,u);l=!!w,l&&"get"in w&&!("originalValue"in w.get)?o=w.get:o=o[u]}else l=ni(o,u),o=o[u];l&&!c&&(_t[a]=o)}}return o},ya={exports:{}};(function(t){var e=ks,r=Gs,i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),n=r("%Reflect.apply%",!0)||e.call(s,i),a=r("%Object.getOwnPropertyDescriptor%",!0),o=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}t.exports=function(l){var u=n(e,s,arguments);if(a&&o){var b=a(u,"length");b.configurable&&o(u,"length",{value:1+c(0,l.length-(arguments.length-1))})}return u};var h=function(){return n(e,i,arguments)};o?o(t.exports,"apply",{value:h}):t.exports.apply=h})(ya);var Ac=ya.exports,ga=Gs,ba=Ac,Ic=ba(ga("String.prototype.indexOf")),Sc=function(e,r){var i=ga(e,!!r);return typeof i=="function"&&Ic(e,".prototype.")>-1?ba(i):i};const Pc={},Rc=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"})),Cc=Lo(Rc);var Xs=typeof Map=="function"&&Map.prototype,Oi=Object.getOwnPropertyDescriptor&&Xs?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,oi=Xs&&Oi&&typeof Oi.get=="function"?Oi.get:null,_n=Xs&&Map.prototype.forEach,Vs=typeof Set=="function"&&Set.prototype,Fi=Object.getOwnPropertyDescriptor&&Vs?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ci=Vs&&Fi&&typeof Fi.get=="function"?Fi.get:null,xn=Vs&&Set.prototype.forEach,Mc=typeof WeakMap=="function"&&WeakMap.prototype,nr=Mc?WeakMap.prototype.has:null,Nc=typeof WeakSet=="function"&&WeakSet.prototype,ar=Nc?WeakSet.prototype.has:null,Bc=typeof WeakRef=="function"&&WeakRef.prototype,En=Bc?WeakRef.prototype.deref:null,Oc=Boolean.prototype.valueOf,Fc=Object.prototype.toString,Dc=Function.prototype.toString,Lc=String.prototype.match,Hs=String.prototype.slice,tt=String.prototype.replace,Uc=String.prototype.toUpperCase,Tn=String.prototype.toLowerCase,va=RegExp.prototype.test,wn=Array.prototype.concat,Ge=Array.prototype.join,kc=Array.prototype.slice,An=Math.floor,ls=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Di=Object.getOwnPropertySymbols,us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ge=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Gt||"symbol")?Symbol.toStringTag:null,_a=Object.prototype.propertyIsEnumerable,In=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Sn(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||va.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-An(-t):An(t);if(i!==t){var s=String(i),n=Hs.call(e,s.length+1);return tt.call(s,r,"$&_")+"."+tt.call(tt.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return tt.call(e,r,"$&_")}var ds=Cc,Pn=ds.custom,Rn=Ea(Pn)?Pn:null,Gc=function t(e,r,i,s){var n=r||{};if(Je(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Je(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Je(n,"customInspect")?n.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Je(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Je(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=n.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return wa(e,n);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return o?Sn(e,c):c}if(typeof e=="bigint"){var h=String(e)+"n";return o?Sn(e,h):h}var f=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=f&&f>0&&typeof e=="object")return ps(e)?"[Array]":"[Object]";var l=sh(n,i);if(typeof s>"u")s=[];else if(Ta(s,e)>=0)return"[Circular]";function u(R,M,B){if(M&&(s=kc.call(s),s.push(M)),B){var C={depth:n.depth};return Je(n,"quoteStyle")&&(C.quoteStyle=n.quoteStyle),t(R,C,i+1,s)}return t(R,n,i+1,s)}if(typeof e=="function"&&!Cn(e)){var b=qc(e),y=Mr(e,u);return"[Function"+(b?": "+b:" (anonymous)")+"]"+(y.length>0?" { "+Ge.call(y,", ")+" }":"")}if(Ea(e)){var w=Gt?tt.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):us.call(e);return typeof e=="object"&&!Gt?Zt(w):w}if(th(e)){for(var T="<"+Tn.call(String(e.nodeName)),S=e.attributes||[],p=0;p<S.length;p++)T+=" "+S[p].name+"="+xa(Xc(S[p].value),"double",n);return T+=">",e.childNodes&&e.childNodes.length&&(T+="..."),T+="</"+Tn.call(String(e.nodeName))+">",T}if(ps(e)){if(e.length===0)return"[]";var d=Mr(e,u);return l&&!ih(d)?"["+ms(d,l)+"]":"[ "+Ge.call(d,", ")+" ]"}if(Hc(e)){var x=Mr(e,u);return!("cause"in Error.prototype)&&"cause"in e&&!_a.call(e,"cause")?"{ ["+String(e)+"] "+Ge.call(wn.call("[cause]: "+u(e.cause),x),", ")+" }":x.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ge.call(x,", ")+" }"}if(typeof e=="object"&&a){if(Rn&&typeof e[Rn]=="function"&&ds)return ds(e,{depth:f-i});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Kc(e)){var E=[];return _n&&_n.call(e,function(R,M){E.push(u(M,e,!0)+" => "+u(R,e))}),Mn("Map",oi.call(e),E,l)}if(Jc(e)){var _=[];return xn&&xn.call(e,function(R){_.push(u(R,e))}),Mn("Set",ci.call(e),_,l)}if(Zc(e))return Li("WeakMap");if(eh(e))return Li("WeakSet");if(Qc(e))return Li("WeakRef");if(zc(e))return Zt(u(Number(e)));if(Yc(e))return Zt(u(ls.call(e)));if(Wc(e))return Zt(Oc.call(e));if($c(e))return Zt(u(String(e)));if(!Vc(e)&&!Cn(e)){var I=Mr(e,u),A=In?In(e)===Object.prototype:e instanceof Object||e.constructor===Object,v=e instanceof Object?"":"null prototype",g=!A&&ge&&Object(e)===e&&ge in e?Hs.call(at(e),8,-1):v?"Object":"",m=A||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",P=m+(g||v?"["+Ge.call(wn.call([],g||[],v||[]),": ")+"] ":"");return I.length===0?P+"{}":l?P+"{"+ms(I,l)+"}":P+"{ "+Ge.call(I,", ")+" }"}return String(e)};function xa(t,e,r){var i=(r.quoteStyle||e)==="double"?'"':"'";return i+t+i}function Xc(t){return tt.call(String(t),/"/g,"&quot;")}function ps(t){return at(t)==="[object Array]"&&(!ge||!(typeof t=="object"&&ge in t))}function Vc(t){return at(t)==="[object Date]"&&(!ge||!(typeof t=="object"&&ge in t))}function Cn(t){return at(t)==="[object RegExp]"&&(!ge||!(typeof t=="object"&&ge in t))}function Hc(t){return at(t)==="[object Error]"&&(!ge||!(typeof t=="object"&&ge in t))}function $c(t){return at(t)==="[object String]"&&(!ge||!(typeof t=="object"&&ge in t))}function zc(t){return at(t)==="[object Number]"&&(!ge||!(typeof t=="object"&&ge in t))}function Wc(t){return at(t)==="[object Boolean]"&&(!ge||!(typeof t=="object"&&ge in t))}function Ea(t){if(Gt)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!us)return!1;try{return us.call(t),!0}catch{}return!1}function Yc(t){if(!t||typeof t!="object"||!ls)return!1;try{return ls.call(t),!0}catch{}return!1}var jc=Object.prototype.hasOwnProperty||function(t){return t in this};function Je(t,e){return jc.call(t,e)}function at(t){return Fc.call(t)}function qc(t){if(t.name)return t.name;var e=Lc.call(Dc.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Ta(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}function Kc(t){if(!oi||!t||typeof t!="object")return!1;try{oi.call(t);try{ci.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Zc(t){if(!nr||!t||typeof t!="object")return!1;try{nr.call(t,nr);try{ar.call(t,ar)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Qc(t){if(!En||!t||typeof t!="object")return!1;try{return En.call(t),!0}catch{}return!1}function Jc(t){if(!ci||!t||typeof t!="object")return!1;try{ci.call(t);try{oi.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function eh(t){if(!ar||!t||typeof t!="object")return!1;try{ar.call(t,ar);try{nr.call(t,nr)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function th(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function wa(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return wa(Hs.call(t,0,e.maxStringLength),e)+i}var s=tt.call(tt.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,rh);return xa(s,"single",e)}function rh(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Uc.call(e.toString(16))}function Zt(t){return"Object("+t+")"}function Li(t){return t+" { ? }"}function Mn(t,e,r,i){var s=i?ms(r,i):Ge.call(r,", ");return t+" ("+e+") {"+s+"}"}function ih(t){for(var e=0;e<t.length;e++)if(Ta(t[e],`
`)>=0)return!1;return!0}function sh(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Ge.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Ge.call(Array(e+1),r)}}function ms(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Ge.call(t,","+r)+`
`+e.prev}function Mr(t,e){var r=ps(t),i=[];if(r){i.length=t.length;for(var s=0;s<t.length;s++)i[s]=Je(t,s)?e(t[s],t):""}var n=typeof Di=="function"?Di(t):[],a;if(Gt){a={};for(var o=0;o<n.length;o++)a["$"+n[o]]=n[o]}for(var c in t)Je(t,c)&&(r&&String(Number(c))===c&&c<t.length||Gt&&a["$"+c]instanceof Symbol||(va.call(/[^\w$]/,c)?i.push(e(c,t)+": "+e(t[c],t)):i.push(c+": "+e(t[c],t))));if(typeof Di=="function")for(var h=0;h<n.length;h++)_a.call(t,n[h])&&i.push("["+e(n[h])+"]: "+e(t[n[h]],t));return i}var $s=Gs,zt=Sc,nh=Gc,ah=$s("%TypeError%"),Nr=$s("%WeakMap%",!0),Br=$s("%Map%",!0),oh=zt("WeakMap.prototype.get",!0),ch=zt("WeakMap.prototype.set",!0),hh=zt("WeakMap.prototype.has",!0),fh=zt("Map.prototype.get",!0),lh=zt("Map.prototype.set",!0),uh=zt("Map.prototype.has",!0),zs=function(t,e){for(var r=t,i;(i=r.next)!==null;r=i)if(i.key===e)return r.next=i.next,i.next=t.next,t.next=i,i},dh=function(t,e){var r=zs(t,e);return r&&r.value},ph=function(t,e,r){var i=zs(t,e);i?i.value=r:t.next={key:e,next:t.next,value:r}},mh=function(t,e){return!!zs(t,e)},yh=function(){var e,r,i,s={assert:function(n){if(!s.has(n))throw new ah("Side channel does not contain "+nh(n))},get:function(n){if(Nr&&n&&(typeof n=="object"||typeof n=="function")){if(e)return oh(e,n)}else if(Br){if(r)return fh(r,n)}else if(i)return dh(i,n)},has:function(n){if(Nr&&n&&(typeof n=="object"||typeof n=="function")){if(e)return hh(e,n)}else if(Br){if(r)return uh(r,n)}else if(i)return mh(i,n);return!1},set:function(n,a){Nr&&n&&(typeof n=="object"||typeof n=="function")?(e||(e=new Nr),ch(e,n,a)):Br?(r||(r=new Br),lh(r,n,a)):(i||(i={key:{},next:null}),ph(i,n,a))}};return s},gh=String.prototype.replace,bh=/%20/g,Ui={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ws={default:Ui.RFC3986,formatters:{RFC1738:function(t){return gh.call(t,bh,"+")},RFC3986:function(t){return String(t)}},RFC1738:Ui.RFC1738,RFC3986:Ui.RFC3986},vh=Ws,ki=Object.prototype.hasOwnProperty,yt=Array.isArray,Le=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),_h=function(e){for(;e.length>1;){var r=e.pop(),i=r.obj[r.prop];if(yt(i)){for(var s=[],n=0;n<i.length;++n)typeof i[n]<"u"&&s.push(i[n]);r.obj[r.prop]=s}}},Aa=function(e,r){for(var i=r&&r.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(i[s]=e[s]);return i},xh=function t(e,r,i){if(!r)return e;if(typeof r!="object"){if(yt(e))e.push(r);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!ki.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var s=e;return yt(e)&&!yt(r)&&(s=Aa(e,i)),yt(e)&&yt(r)?(r.forEach(function(n,a){if(ki.call(e,a)){var o=e[a];o&&typeof o=="object"&&n&&typeof n=="object"?e[a]=t(o,n,i):e.push(n)}else e[a]=n}),e):Object.keys(r).reduce(function(n,a){var o=r[a];return ki.call(n,a)?n[a]=t(n[a],o,i):n[a]=o,n},s)},Eh=function(e,r){return Object.keys(r).reduce(function(i,s){return i[s]=r[s],i},e)},Th=function(t,e,r){var i=t.replace(/\+/g," ");if(r==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},wh=function(e,r,i,s,n){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),i==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var h=a.charCodeAt(c);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||n===vh.RFC1738&&(h===40||h===41)){o+=a.charAt(c);continue}if(h<128){o=o+Le[h];continue}if(h<2048){o=o+(Le[192|h>>6]+Le[128|h&63]);continue}if(h<55296||h>=57344){o=o+(Le[224|h>>12]+Le[128|h>>6&63]+Le[128|h&63]);continue}c+=1,h=65536+((h&1023)<<10|a.charCodeAt(c)&1023),o+=Le[240|h>>18]+Le[128|h>>12&63]+Le[128|h>>6&63]+Le[128|h&63]}return o},Ah=function(e){for(var r=[{obj:{o:e},prop:"o"}],i=[],s=0;s<r.length;++s)for(var n=r[s],a=n.obj[n.prop],o=Object.keys(a),c=0;c<o.length;++c){var h=o[c],f=a[h];typeof f=="object"&&f!==null&&i.indexOf(f)===-1&&(r.push({obj:a,prop:h}),i.push(f))}return _h(r),e},Ih=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Sh=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Ph=function(e,r){return[].concat(e,r)},Rh=function(e,r){if(yt(e)){for(var i=[],s=0;s<e.length;s+=1)i.push(r(e[s]));return i}return r(e)},Ia={arrayToObject:Aa,assign:Eh,combine:Ph,compact:Ah,decode:Th,encode:wh,isBuffer:Sh,isRegExp:Ih,maybeMap:Rh,merge:xh},Sa=yh,Zr=Ia,or=Ws,Ch=Object.prototype.hasOwnProperty,Nn={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Ye=Array.isArray,Mh=Array.prototype.push,Pa=function(t,e){Mh.apply(t,Ye(e)?e:[e])},Nh=Date.prototype.toISOString,Bn=or.default,me={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Zr.encode,encodeValuesOnly:!1,format:Bn,formatter:or.formatters[Bn],indices:!1,serializeDate:function(e){return Nh.call(e)},skipNulls:!1,strictNullHandling:!1},Bh=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Gi={},Oh=function t(e,r,i,s,n,a,o,c,h,f,l,u,b,y,w,T){for(var S=e,p=T,d=0,x=!1;(p=p.get(Gi))!==void 0&&!x;){var E=p.get(e);if(d+=1,typeof E<"u"){if(E===d)throw new RangeError("Cyclic object value");x=!0}typeof p.get(Gi)>"u"&&(d=0)}if(typeof c=="function"?S=c(r,S):S instanceof Date?S=l(S):i==="comma"&&Ye(S)&&(S=Zr.maybeMap(S,function(C){return C instanceof Date?l(C):C})),S===null){if(n)return o&&!y?o(r,me.encoder,w,"key",u):r;S=""}if(Bh(S)||Zr.isBuffer(S)){if(o){var _=y?r:o(r,me.encoder,w,"key",u);return[b(_)+"="+b(o(S,me.encoder,w,"value",u))]}return[b(r)+"="+b(String(S))]}var I=[];if(typeof S>"u")return I;var A;if(i==="comma"&&Ye(S))y&&o&&(S=Zr.maybeMap(S,o)),A=[{value:S.length>0?S.join(",")||null:void 0}];else if(Ye(c))A=c;else{var v=Object.keys(S);A=h?v.sort(h):v}for(var g=s&&Ye(S)&&S.length===1?r+"[]":r,m=0;m<A.length;++m){var P=A[m],R=typeof P=="object"&&typeof P.value<"u"?P.value:S[P];if(!(a&&R===null)){var M=Ye(S)?typeof i=="function"?i(g,P):g:g+(f?"."+P:"["+P+"]");T.set(e,d);var B=Sa();B.set(Gi,T),Pa(I,t(R,M,i,s,n,a,i==="comma"&&y&&Ye(S)?null:o,c,h,f,l,u,b,y,w,B))}}return I},Fh=function(e){if(!e)return me;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||me.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=or.default;if(typeof e.format<"u"){if(!Ch.call(or.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var s=or.formatters[i],n=me.filter;return(typeof e.filter=="function"||Ye(e.filter))&&(n=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:me.addQueryPrefix,allowDots:typeof e.allowDots>"u"?me.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:me.charsetSentinel,delimiter:typeof e.delimiter>"u"?me.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:me.encode,encoder:typeof e.encoder=="function"?e.encoder:me.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:me.encodeValuesOnly,filter:n,format:i,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:me.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:me.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:me.strictNullHandling}},Dh=function(t,e){var r=t,i=Fh(e),s,n;typeof i.filter=="function"?(n=i.filter,r=n("",r)):Ye(i.filter)&&(n=i.filter,s=n);var a=[];if(typeof r!="object"||r===null)return"";var o;e&&e.arrayFormat in Nn?o=e.arrayFormat:e&&"indices"in e?o=e.indices?"indices":"repeat":o="indices";var c=Nn[o];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=c==="comma"&&e&&e.commaRoundTrip;s||(s=Object.keys(r)),i.sort&&s.sort(i.sort);for(var f=Sa(),l=0;l<s.length;++l){var u=s[l];i.skipNulls&&r[u]===null||Pa(a,Oh(r[u],u,c,h,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,f))}var b=a.join(i.delimiter),y=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),b.length>0?y+b:""},Xt=Ia,ys=Object.prototype.hasOwnProperty,Lh=Array.isArray,he={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Xt.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Uh=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Ra=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},kh="utf8=%26%2310003%3B",Gh="utf8=%E2%9C%93",Xh=function(e,r){var i={__proto__:null},s=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,n=r.parameterLimit===1/0?void 0:r.parameterLimit,a=s.split(r.delimiter,n),o=-1,c,h=r.charset;if(r.charsetSentinel)for(c=0;c<a.length;++c)a[c].indexOf("utf8=")===0&&(a[c]===Gh?h="utf-8":a[c]===kh&&(h="iso-8859-1"),o=c,c=a.length);for(c=0;c<a.length;++c)if(c!==o){var f=a[c],l=f.indexOf("]="),u=l===-1?f.indexOf("="):l+1,b,y;u===-1?(b=r.decoder(f,he.decoder,h,"key"),y=r.strictNullHandling?null:""):(b=r.decoder(f.slice(0,u),he.decoder,h,"key"),y=Xt.maybeMap(Ra(f.slice(u+1),r),function(w){return r.decoder(w,he.decoder,h,"value")})),y&&r.interpretNumericEntities&&h==="iso-8859-1"&&(y=Uh(y)),f.indexOf("[]=")>-1&&(y=Lh(y)?[y]:y),ys.call(i,b)?i[b]=Xt.combine(i[b],y):i[b]=y}return i},Vh=function(t,e,r,i){for(var s=i?e:Ra(e,r),n=t.length-1;n>=0;--n){var a,o=t[n];if(o==="[]"&&r.parseArrays)a=[].concat(s);else{a=r.plainObjects?Object.create(null):{};var c=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,h=parseInt(c,10);!r.parseArrays&&c===""?a={0:s}:!isNaN(h)&&o!==c&&String(h)===c&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(a=[],a[h]=s):c!=="__proto__"&&(a[c]=s)}s=a}return s},Hh=function(e,r,i,s){if(e){var n=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,c=i.depth>0&&a.exec(n),h=c?n.slice(0,c.index):n,f=[];if(h){if(!i.plainObjects&&ys.call(Object.prototype,h)&&!i.allowPrototypes)return;f.push(h)}for(var l=0;i.depth>0&&(c=o.exec(n))!==null&&l<i.depth;){if(l+=1,!i.plainObjects&&ys.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;f.push(c[1])}return c&&f.push("["+n.slice(c.index)+"]"),Vh(f,r,i,s)}},$h=function(e){if(!e)return he;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?he.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?he.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:he.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:he.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:he.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:he.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:he.comma,decoder:typeof e.decoder=="function"?e.decoder:he.decoder,delimiter:typeof e.delimiter=="string"||Xt.isRegExp(e.delimiter)?e.delimiter:he.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:he.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:he.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:he.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:he.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:he.strictNullHandling}},zh=function(t,e){var r=$h(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?Xh(t,r):t,s=r.plainObjects?Object.create(null):{},n=Object.keys(i),a=0;a<n.length;++a){var o=n[a],c=Hh(o,i[o],r,typeof t=="string");s=Xt.merge(s,c,r)}return r.allowSparse===!0?s:Xt.compact(s)},Wh=Dh,Yh=zh,jh=Ws,qh={formats:jh,parse:Yh,stringify:Wh},Kh=ec;function Oe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Zh=/^([a-z0-9.+-]+:)/i,Qh=/:[0-9]*$/,Jh=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ef=["<",">",'"',"`"," ","\r",`
`,"	"],tf=["{","}","|","\\","^","`"].concat(ef),gs=["'"].concat(tf),On=["%","/","?",";","#"].concat(gs),Fn=["/","?","#"],rf=255,Dn=/^[+a-z0-9A-Z_-]{0,63}$/,sf=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,nf={javascript:!0,"javascript:":!0},bs={javascript:!0,"javascript:":!0},Dt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vs=qh;function yi(t,e,r){if(t&&typeof t=="object"&&t instanceof Oe)return t;var i=new Oe;return i.parse(t,e,r),i}Oe.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=i!==-1&&i<t.indexOf("#")?"?":"#",n=t.split(s),a=/\\/g;n[0]=n[0].replace(a,"/"),t=n.join(s);var o=t;if(o=o.trim(),!r&&t.split("#").length===1){var c=Jh.exec(o);if(c)return this.path=o,this.href=o,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=vs.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=Zh.exec(o);if(h){h=h[0];var f=h.toLowerCase();this.protocol=f,o=o.substr(h.length)}if(r||h||o.match(/^\/\/[^@/]+@[^@/]+/)){var l=o.substr(0,2)==="//";l&&!(h&&bs[h])&&(o=o.substr(2),this.slashes=!0)}if(!bs[h]&&(l||h&&!Dt[h])){for(var u=-1,b=0;b<Fn.length;b++){var y=o.indexOf(Fn[b]);y!==-1&&(u===-1||y<u)&&(u=y)}var w,T;u===-1?T=o.lastIndexOf("@"):T=o.lastIndexOf("@",u),T!==-1&&(w=o.slice(0,T),o=o.slice(T+1),this.auth=decodeURIComponent(w)),u=-1;for(var b=0;b<On.length;b++){var y=o.indexOf(On[b]);y!==-1&&(u===-1||y<u)&&(u=y)}u===-1&&(u=o.length),this.host=o.slice(0,u),o=o.slice(u),this.parseHost(),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S)for(var p=this.hostname.split(/\./),b=0,d=p.length;b<d;b++){var x=p[b];if(x&&!x.match(Dn)){for(var E="",_=0,I=x.length;_<I;_++)x.charCodeAt(_)>127?E+="x":E+=x[_];if(!E.match(Dn)){var A=p.slice(0,b),v=p.slice(b+1),g=x.match(sf);g&&(A.push(g[1]),v.unshift(g[2])),v.length&&(o="/"+v.join(".")+o),this.hostname=A.join(".");break}}}this.hostname.length>rf?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=Kh.toASCII(this.hostname));var m=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+m,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!nf[f])for(var b=0,d=gs.length;b<d;b++){var R=gs[b];if(o.indexOf(R)!==-1){var M=encodeURIComponent(R);M===R&&(M=escape(R)),o=o.split(R).join(M)}}var B=o.indexOf("#");B!==-1&&(this.hash=o.substr(B),o=o.slice(0,B));var C=o.indexOf("?");if(C!==-1?(this.search=o.substr(C),this.query=o.substr(C+1),e&&(this.query=vs.parse(this.query)),o=o.slice(0,C)):e&&(this.search="",this.query={}),o&&(this.pathname=o),Dt[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var m=this.pathname||"",G=this.search||"";this.path=m+G}return this.href=this.format(),this};function af(t){return typeof t=="string"&&(t=yi(t)),t instanceof Oe?t.format():Oe.prototype.format.call(t)}Oe.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=vs.stringify(this.query,{arrayFormat:"repeat",encodeValuesOnly:!0,addQueryPrefix:!1}));var a=this.search||n&&"?"+n||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Dt[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),r=r.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),e+s+r+a+i};function of(t,e){return yi(t,!1,!0).resolve(e)}Oe.prototype.resolve=function(t){return this.resolveObject(yi(t,!1,!0)).format()};Oe.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Oe;e.parse(t,!1,!0),t=e}for(var r=new Oe,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];r[n]=this[n]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),o=0;o<a.length;o++){var c=a[o];c!=="protocol"&&(r[c]=t[c])}return Dt[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Dt[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var l=h[f];r[l]=t[l]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!bs[t.protocol]){for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var u=r.pathname||"",b=r.search||"";r.path=u+b}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var y=r.pathname&&r.pathname.charAt(0)==="/",w=t.host||t.pathname&&t.pathname.charAt(0)==="/",T=w||y||r.host&&t.pathname,S=T,p=r.pathname&&r.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],x=r.protocol&&!Dt[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(p[0]===""?p[0]=r.host:p.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(d[0]===""?d[0]=t.host:d.unshift(t.host)),t.host=null),T=T&&(d[0]===""||p[0]==="")),w)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,p=d;else if(d.length)p||(p=[]),p.pop(),p=p.concat(d),r.search=t.search,r.query=t.query;else if(t.search!=null){if(x){r.host=p.shift(),r.hostname=r.host;var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;E&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!p.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var _=p.slice(-1)[0],I=(r.host||t.host||p.length>1)&&(_==="."||_==="..")||_==="",A=0,v=p.length;v>=0;v--)_=p[v],_==="."?p.splice(v,1):_===".."?(p.splice(v,1),A++):A&&(p.splice(v,1),A--);if(!T&&!S)for(;A--;A)p.unshift("..");T&&p[0]!==""&&(!p[0]||p[0].charAt(0)!=="/")&&p.unshift(""),I&&p.join("/").substr(-1)!=="/"&&p.push("");var g=p[0]===""||p[0]&&p[0].charAt(0)==="/";if(x){r.hostname=g?"":p.length?p.shift():"",r.host=r.hostname;var E=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;E&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname)}return T=T||r.host&&p.length,T&&!g&&p.unshift(""),p.length>0?r.pathname=p.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};Oe.prototype.parseHost=function(){var t=this.host,e=Qh.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var cf=yi,hf=of,ff=af;const lf={parse:cf,format:ff,resolve:hf},Ln={};function Q(t,e,r=3){if(Ln[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(i))),Ln[e]=!0}let Xi;function uf(){return typeof Xi>"u"&&(Xi=function(){var r;const e={stencil:!0,failIfMajorPerformanceCaveat:W.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!W.ADAPTER.getWebGLRenderingContext())return!1;const i=W.ADAPTER.createCanvas();let s=i.getContext("webgl",e)||i.getContext("experimental-webgl",e);const n=!!((r=s==null?void 0:s.getContextAttributes())!=null&&r.stencil);if(s){const a=s.getExtension("WEBGL_lose_context");a&&a.loseContext()}return s=null,n}catch{return!1}}()),Xi}var df={grad:.9,turn:360,rad:360/(2*Math.PI)},We=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},le=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Ie=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},Ca=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Un=function(t){return{r:Ie(t.r,0,255),g:Ie(t.g,0,255),b:Ie(t.b,0,255),a:Ie(t.a)}},Vi=function(t){return{r:le(t.r),g:le(t.g),b:le(t.b),a:le(t.a,3)}},pf=/^#([0-9a-f]{3,8})$/i,Or=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Ma=function(t){var e=t.r,r=t.g,i=t.b,s=t.a,n=Math.max(e,r,i),a=n-Math.min(e,r,i),o=a?n===e?(r-i)/a:n===r?2+(i-e)/a:4+(e-r)/a:0;return{h:60*(o<0?o+6:o),s:n?a/n*100:0,v:n/255*100,a:s}},Na=function(t){var e=t.h,r=t.s,i=t.v,s=t.a;e=e/360*6,r/=100,i/=100;var n=Math.floor(e),a=i*(1-r),o=i*(1-(e-n)*r),c=i*(1-(1-e+n)*r),h=n%6;return{r:255*[i,o,a,a,c,i][h],g:255*[c,i,i,o,a,a][h],b:255*[a,a,c,i,i,o][h],a:s}},kn=function(t){return{h:Ca(t.h),s:Ie(t.s,0,100),l:Ie(t.l,0,100),a:Ie(t.a)}},Gn=function(t){return{h:le(t.h),s:le(t.s),l:le(t.l),a:le(t.a,3)}},Xn=function(t){return Na((r=(e=t).s,{h:e.h,s:(r*=((i=e.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:e.a}));var e,r,i},cr=function(t){return{h:(e=Ma(t)).h,s:(s=(200-(r=e.s))*(i=e.v)/100)>0&&s<200?r*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,r,i,s},mf=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yf=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gf=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bf=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_s={string:[[function(t){var e=pf.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?le(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?le(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=gf.exec(t)||bf.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Un({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=mf.exec(t)||yf.exec(t);if(!e)return null;var r,i,s=kn({h:(r=e[1],i=e[2],i===void 0&&(i="deg"),Number(r)*(df[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Xn(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,i=t.b,s=t.a,n=s===void 0?1:s;return We(e)&&We(r)&&We(i)?Un({r:Number(e),g:Number(r),b:Number(i),a:Number(n)}):null},"rgb"],[function(t){var e=t.h,r=t.s,i=t.l,s=t.a,n=s===void 0?1:s;if(!We(e)||!We(r)||!We(i))return null;var a=kn({h:Number(e),s:Number(r),l:Number(i),a:Number(n)});return Xn(a)},"hsl"],[function(t){var e=t.h,r=t.s,i=t.v,s=t.a,n=s===void 0?1:s;if(!We(e)||!We(r)||!We(i))return null;var a=function(o){return{h:Ca(o.h),s:Ie(o.s,0,100),v:Ie(o.v,0,100),a:Ie(o.a)}}({h:Number(e),s:Number(r),v:Number(i),a:Number(n)});return Na(a)},"hsv"]]},Vn=function(t,e){for(var r=0;r<e.length;r++){var i=e[r][0](t);if(i)return[i,e[r][1]]}return[null,void 0]},vf=function(t){return typeof t=="string"?Vn(t.trim(),_s.string):typeof t=="object"&&t!==null?Vn(t,_s.object):[null,void 0]},Hi=function(t,e){var r=cr(t);return{h:r.h,s:Ie(r.s+100*e,0,100),l:r.l,a:r.a}},$i=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Hn=function(t,e){var r=cr(t);return{h:r.h,s:r.s,l:Ie(r.l+100*e,0,100),a:r.a}},xs=function(){function t(e){this.parsed=vf(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return le($i(this.rgba),2)},t.prototype.isDark=function(){return $i(this.rgba)<.5},t.prototype.isLight=function(){return $i(this.rgba)>=.5},t.prototype.toHex=function(){return e=Vi(this.rgba),r=e.r,i=e.g,s=e.b,a=(n=e.a)<1?Or(le(255*n)):"","#"+Or(r)+Or(i)+Or(s)+a;var e,r,i,s,n,a},t.prototype.toRgb=function(){return Vi(this.rgba)},t.prototype.toRgbString=function(){return e=Vi(this.rgba),r=e.r,i=e.g,s=e.b,(n=e.a)<1?"rgba("+r+", "+i+", "+s+", "+n+")":"rgb("+r+", "+i+", "+s+")";var e,r,i,s,n},t.prototype.toHsl=function(){return Gn(cr(this.rgba))},t.prototype.toHslString=function(){return e=Gn(cr(this.rgba)),r=e.h,i=e.s,s=e.l,(n=e.a)<1?"hsla("+r+", "+i+"%, "+s+"%, "+n+")":"hsl("+r+", "+i+"%, "+s+"%)";var e,r,i,s,n},t.prototype.toHsv=function(){return e=Ma(this.rgba),{h:le(e.h),s:le(e.s),v:le(e.v),a:le(e.a,3)};var e},t.prototype.invert=function(){return Ue({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Ue(Hi(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ue(Hi(this.rgba,-e))},t.prototype.grayscale=function(){return Ue(Hi(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Ue(Hn(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Ue(Hn(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Ue({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):le(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=cr(this.rgba);return typeof e=="number"?Ue({h:e,s:r.s,l:r.l,a:r.a}):le(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Ue(e).toHex()},t}(),Ue=function(t){return t instanceof xs?t:new xs(t)},$n=[],_f=function(t){t.forEach(function(e){$n.indexOf(e)<0&&(e(xs,_s),$n.push(e))})};function xf(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in r)i[r[s]]=s;var n={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,c,h=i[this.toHex()];if(h)return h;if(a!=null&&a.closest){var f=this.toRgb(),l=1/0,u="black";if(!n.length)for(var b in r)n[b]=new t(r[b]).toRgb();for(var y in r){var w=(o=f,c=n[y],Math.pow(o.r-c.r,2)+Math.pow(o.g-c.g,2)+Math.pow(o.b-c.b,2));w<l&&(l=w,u=y)}return u}},e.string.push([function(a){var o=a.toLowerCase(),c=o==="transparent"?"#0000":r[o];return c?new t(c).toRgb():null},"name"])}_f([xf]);const Lt=class{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Lt)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((s,n)=>s===e[n]);if(t!==null&&e!==null){const s=Object.keys(t),n=Object.keys(e);return s.length!==n.length?!1:s.every(a=>t[a]===e[a])}return t===e}toRgba(){const[t,e,r,i]=this._components;return{r:t,g:e,b:r,a:i}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,i]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(r*255),t[2]=Math.round(i*255),t}toRgbArray(t){t=t??[];const[e,r,i]=this._components;return t[0]=e,t[1]=r,t[2]=i,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,r,i,s]=Lt.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return e&&(r=r*t+.5|0,i=i*t+.5|0,s=s*t+.5|0),(t*255<<24)+(r<<16)+(i<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,r,i]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(r*t)/t,this._components[2]=Math.round(i*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,r,i,s]=this._components;return t[0]=e,t[1]=r,t[2]=i,t[3]=s,t}normalize(t){let e,r,i,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const n=t;e=(n>>16&255)/255,r=(n>>8&255)/255,i=(n&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,r,i,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,r,i,s=255]=t,e/=255,r/=255,i/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=Lt.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const n=Ue(t);n.isValid()&&({r:e,g:r,b:i,a:s}=n.rgba,e/=255,r/=255,i/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(t*255<<16)+(e*255<<8)+(r*255|0)}_clamp(t,e=0,r=1){return typeof t=="number"?Math.min(Math.max(t,e),r):(t.forEach((i,s)=>{t[s]=Math.min(Math.max(i,e),r)}),t)}};let ot=Lt;ot.shared=new Lt;ot.temp=new Lt;ot.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function Ef(){const t=[],e=[];for(let i=0;i<32;i++)t[i]=i,e[i]=i;t[k.NORMAL_NPM]=k.NORMAL,t[k.ADD_NPM]=k.ADD,t[k.SCREEN_NPM]=k.SCREEN,e[k.NORMAL]=k.NORMAL_NPM,e[k.ADD]=k.ADD_NPM,e[k.SCREEN]=k.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const Tf=Ef();function Ba(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function hi(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function zn(t){return!(t&t-1)&&!!t}function Wn(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Qr(t,e,r){const i=t.length;let s;if(e>=i||r===0)return;r=e+r>i?i-e:r;const n=i-r;for(s=e;s<n;++s)t[s]=t[s+r];t.length=n}function Fr(t){return t===0?0:t<0?-1:1}let wf=0;function pr(){return++wf}const Yn={},ke=Object.create(null),Qe=Object.create(null);let Dr;function Af(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,Dr||(Dr=document.createElement("a")),Dr.href=t;const r=lf.parse(Dr.href),i=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!i||r.protocol!==e.protocol?"anonymous":""}function jn(t,e=1){var i;const r=(i=W.RETINA_PREFIX)==null?void 0:i.exec(t);return r?parseFloat(r[1]):e}var X=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(X||{});const Es=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},qn=(t,e)=>Es(t).priority??e,K={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Es).forEach(e=>{e.type.forEach(r=>{var i,s;return(s=(i=this._removeHandlers)[r])==null?void 0:s.call(i,e)})}),this},add(...t){return t.map(Es).forEach(e=>{e.type.forEach(r=>{const i=this._addHandlers,s=this._queue;i[r]?i[r](e):(s[r]=s[r]||[],s[r].push(e))})}),this},handle(t,e,r){const i=this._addHandlers,s=this._removeHandlers;if(i[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,s[t]=r;const n=this._queue;return n[t]&&(n[t].forEach(a=>e(a)),delete n[t]),this},handleByMap(t,e){return this.handle(t,r=>{e[r.name]=r.ref},r=>{delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((s,n)=>qn(n,r)-qn(s,r)))},i=>{const s=e.indexOf(i.ref);s!==-1&&e.splice(s,1)})}};class If{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Sf=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Pf(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function Rf(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=Sf.replace(/%forloop%/gi,Pf(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const zi=0,Wi=1,Yi=2,ji=3,qi=4,Ki=5;class _r{constructor(){this.data=0,this.blendMode=k.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<zi)}set blend(e){!!(this.data&1<<zi)!==e&&(this.data^=1<<zi)}get offsets(){return!!(this.data&1<<Wi)}set offsets(e){!!(this.data&1<<Wi)!==e&&(this.data^=1<<Wi)}get culling(){return!!(this.data&1<<Yi)}set culling(e){!!(this.data&1<<Yi)!==e&&(this.data^=1<<Yi)}get depthTest(){return!!(this.data&1<<ji)}set depthTest(e){!!(this.data&1<<ji)!==e&&(this.data^=1<<ji)}get depthMask(){return!!(this.data&1<<Ki)}set depthMask(e){!!(this.data&1<<Ki)!==e&&(this.data^=1<<Ki)}get clockwiseFrontFace(){return!!(this.data&1<<qi)}set clockwiseFrontFace(e){!!(this.data&1<<qi)!==e&&(this.data^=1<<qi)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==k.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new _r;return e.depthTest=!1,e.blend=!0,e}}const Ts=[];function Oa(t,e){if(!t)return null;let r="";if(typeof t=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(let i=Ts.length-1;i>=0;--i){const s=Ts[i];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Fe{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,i,s,n,a,o,c){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:f}=this;this._aliasCount++;for(let l=0,u=f.length;l<u;l++)f[l][h](e,r,i,s,n,a,o,c);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Fe.prototype,{dispatch:{value:Fe.prototype.emit},run:{value:Fe.prototype.emit}});class mr{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Fe("setRealSize"),this.onUpdate=new Fe("update"),this.onError=new Fe("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class Ys extends mr{constructor(e,r){const{width:i,height:s}=r||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=e}upload(e,r,i){const s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===nt.UNPACK);const n=r.realWidth,a=r.realHeight;return i.width===n&&i.height===a?s.texSubImage2D(r.target,0,0,0,n,a,r.format,i.type,this.data):(i.width=n,i.height=a,s.texImage2D(r.target,0,i.internalFormat,n,a,0,r.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const Cf={scaleMode:ve.NEAREST,format:O.RGBA,alphaMode:nt.NPM},Rt=class extends br{constructor(t=null,e=null){super(),e=Object.assign({},Rt.defaultOptions,e);const{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:n,width:a,height:o,wrapMode:c,format:h,type:f,target:l,resolution:u,resourceOptions:b}=e;t&&!(t instanceof mr)&&(t=Oa(t,b),t.internal=!0),this.resolution=u||W.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((o||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=n,this.format=h,this.type=f,this.target=l,this.alphaMode=r,this.uid=pr(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&o>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=zn(this.realWidth)&&zn(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Qe[this.cacheId],delete ke[this.cacheId],this.cacheId=null),this.dispose(),Rt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=W.STRICT_TEXTURE_CACHE){const i=typeof t=="string";let s=null;if(i)s=t;else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${pr()}`}s=t._pixiId}let n=Qe[s];if(i&&r&&!n)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return n||(n=new Rt(t,e),n.cacheId=s,Rt.addToCache(n,s)),n}static fromBuffer(t,e,r,i){t=t||new Float32Array(e*r*4);const s=new Ys(t,{width:e,height:r}),n=t instanceof Float32Array?q.FLOAT:q.UNSIGNED_BYTE;return new Rt(s,Object.assign({},Cf,{type:n},i))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Qe[e]&&Qe[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Qe[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Qe[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete Qe[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Qe[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let Z=Rt;Z.defaultOptions={mipmap:xt.POW2,anisotropicLevel:0,scaleMode:ve.LINEAR,wrapMode:Ls.CLAMP,alphaMode:nt.UNPACK,target:Ot.TEXTURE_2D,format:O.RGBA,type:q.UNSIGNED_BYTE};Z._globalBatch=0;class Mf{constructor(){this.texArray=null,this.blend=0,this.type=ii.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Nf=0;class be{constructor(e,r=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=Nf++,this.disposeRunner=new Fe("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Xe.ELEMENT_ARRAY_BUFFER:Xe.ARRAY_BUFFER}get index(){return this.type===Xe.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new be(e)}}class fi{constructor(e,r=0,i=!1,s=q.FLOAT,n,a,o,c=1){this.buffer=e,this.size=r,this.normalized=i,this.type=s,this.stride=n,this.start=a,this.instance=o,this.divisor=c}destroy(){this.buffer=null}static from(e,r,i,s,n){return new fi(e,r,i,s,n)}}const Bf={Float32Array,Uint32Array,Int32Array,Uint8Array};function Of(t,e){let r=0,i=0;const s={};for(let c=0;c<t.length;c++)i+=e[c],r+=t[c].length;const n=new ArrayBuffer(r*4);let a=null,o=0;for(let c=0;c<t.length;c++){const h=e[c],f=t[c],l=Ba(f);s[l]||(s[l]=new Bf[l](n)),a=s[l];for(let u=0;u<f.length;u++){const b=(u/h|0)*i+o,y=u%h;a[b+y]=f[u]}o+=h}return new Float32Array(n)}const Kn={5126:4,5123:2,5121:1};let Ff=0;const Df={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Vt{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=Ff++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Fe("disposeGeometry"),this.refCount=0}addAttribute(e,r,i=0,s=!1,n,a,o,c=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof be||(r instanceof Array&&(r=new Float32Array(r)),r=new be(r));const h=e.split("|");if(h.length>1){for(let l=0;l<h.length;l++)this.addAttribute(h[l],r,i,s,n);return this}let f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[e]=new fi(f,i,s,n,a,o,c),this.instanced=this.instanced||c,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof be||(e instanceof Array&&(e=new Uint16Array(e)),e=new be(e)),e.type=Xe.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],i=new be;let s;for(s in this.attributes){const n=this.attributes[s],a=this.buffers[n.buffer];e.push(a.data),r.push(n.size*Kn[n.type]/4),n.buffer=0}for(i.data=Of(e,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Vt;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new be(this.buffers[r].data.slice(0));for(const r in this.attributes){const i=this.attributes[r];e.attributes[r]=new fi(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Xe.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new Vt,i=[],s=[],n=[];let a;for(let o=0;o<e.length;o++){a=e[o];for(let c=0;c<a.buffers.length;c++)s[c]=s[c]||0,s[c]+=a.buffers[c].data.length,n[c]=0}for(let o=0;o<a.buffers.length;o++)i[o]=new Df[Ba(a.buffers[o].data)](s[o]),r.buffers[o]=new be(i[o]);for(let o=0;o<e.length;o++){a=e[o];for(let c=0;c<a.buffers.length;c++)i[c].set(a.buffers[c].data,n[c]),n[c]+=a.buffers[c].data.length}if(r.attributes=a.attributes,a.indexBuffer){r.indexBuffer=r.buffers[a.buffers.indexOf(a.indexBuffer)],r.indexBuffer.type=Xe.ELEMENT_ARRAY_BUFFER;let o=0,c=0,h=0,f=0;for(let l=0;l<a.buffers.length;l++)if(a.buffers[l]!==a.indexBuffer){f=l;break}for(const l in a.attributes){const u=a.attributes[l];(u.buffer|0)===f&&(c+=u.size*Kn[u.type]/4)}for(let l=0;l<e.length;l++){const u=e[l].indexBuffer.data;for(let b=0;b<u.length;b++)r.indexBuffer.data[b+h]+=o;o+=e[l].buffers[f].data.length/c,h+=u.length}}return r}}class Lf extends Vt{constructor(e=!1){super(),this._buffer=new be(null,e,!1),this._indexBuffer=new be(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,q.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,q.FLOAT).addAttribute("aColor",this._buffer,4,!0,q.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,q.FLOAT).addIndex(this._indexBuffer)}}const Uf=Math.PI*2,kf=180/Math.PI,Gf=Math.PI/180;var Fa=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Fa||{});let ie=class Da{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Da(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}};const Lr=[new ie,new ie,new ie,new ie];class re{constructor(e=0,r=0,i=0,s=0){this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(s),this.type=Fa.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new re(0,0,0,0)}clone(){return new re(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const A=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=A)return!1;const g=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>g}const i=this.left,s=this.right,n=this.top,a=this.bottom;if(s<=i||a<=n)return!1;const o=Lr[0].set(e.left,e.top),c=Lr[1].set(e.left,e.bottom),h=Lr[2].set(e.right,e.top),f=Lr[3].set(e.right,e.bottom);if(h.x<=o.x||c.y<=o.y)return!1;const l=Math.sign(r.a*r.d-r.b*r.c);if(l===0||(r.apply(o,o),r.apply(c,c),r.apply(h,h),r.apply(f,f),Math.max(o.x,c.x,h.x,f.x)<=i||Math.min(o.x,c.x,h.x,f.x)>=s||Math.max(o.y,c.y,h.y,f.y)<=n||Math.min(o.y,c.y,h.y,f.y)>=a))return!1;const u=l*(c.y-o.y),b=l*(o.x-c.x),y=u*i+b*n,w=u*s+b*n,T=u*i+b*a,S=u*s+b*a;if(Math.max(y,w,T,S)<=u*o.x+b*o.y||Math.min(y,w,T,S)>=u*f.x+b*f.y)return!1;const p=l*(o.y-h.y),d=l*(h.x-o.x),x=p*i+d*n,E=p*s+d*n,_=p*i+d*a,I=p*s+d*a;return!(Math.max(x,E,_,I)<=p*o.x+d*o.y||Math.min(x,E,_,I)>=p*f.x+d*f.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),n=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(e=1,r=.001){const i=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=s-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=s,this.height=n-s,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class ue{constructor(e=1,r=0,i=0,s=1,n=0,a=0){this.array=null,this.a=e,this.b=r,this.c=i,this.d=s,this.tx=n,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,i,s,n,a){return this.a=e,this.b=r,this.c=i,this.d=s,this.tx=n,this.ty=a,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,r){r=r||new ie;const i=e.x,s=e.y;return r.x=this.a*i+this.c*s+this.tx,r.y=this.b*i+this.d*s+this.ty,r}applyInverse(e,r){r=r||new ie;const i=1/(this.a*this.d+this.c*-this.b),s=e.x,n=e.y;return r.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),i=Math.sin(e),s=this.a,n=this.c,a=this.tx;return this.a=s*r-this.b*i,this.b=s*i+this.b*r,this.c=n*r-this.d*i,this.d=n*i+this.d*r,this.tx=a*r-this.ty*i,this.ty=a*i+this.ty*r,this}append(e){const r=this.a,i=this.b,s=this.c,n=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*i+e.b*n,this.c=e.c*r+e.d*s,this.d=e.c*i+e.d*n,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*n+this.ty,this}setTransform(e,r,i,s,n,a,o,c,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-c)*a,this.d=Math.cos(o-c)*a,this.tx=e-(i*this.a+s*this.c),this.ty=r-(i*this.b+s*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,i=this.b,s=this.c,n=this.d,a=e.pivot,o=-Math.atan2(-s,n),c=Math.atan2(i,r),h=Math.abs(o+c);return h<1e-5||Math.abs(Uf-h)<1e-5?(e.rotation=c,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=c),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(s*s+n*n),e.position.x=this.tx+(a.x*r+a.y*s),e.position.y=this.ty+(a.x*i+a.y*n),e}invert(){const e=this.a,r=this.b,i=this.c,s=this.d,n=this.tx,a=e*s-r*i;return this.a=s/a,this.b=-r/a,this.c=-i/a,this.d=e/a,this.tx=(i*this.ty-s*n)/a,this.ty=-(e*this.ty-r*n)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ue;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new ue}static get TEMP_MATRIX(){return new ue}}const ut=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],pt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],mt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ws=[],La=[],Ur=Math.sign;function Xf(){for(let t=0;t<16;t++){const e=[];ws.push(e);for(let r=0;r<16;r++){const i=Ur(ut[t]*ut[r]+pt[t]*dt[r]),s=Ur(dt[t]*ut[r]+mt[t]*dt[r]),n=Ur(ut[t]*pt[r]+pt[t]*mt[r]),a=Ur(dt[t]*pt[r]+mt[t]*mt[r]);for(let o=0;o<16;o++)if(ut[o]===i&&dt[o]===s&&pt[o]===n&&mt[o]===a){e.push(o);break}}}for(let t=0;t<16;t++){const e=new ue;e.set(ut[t],dt[t],pt[t],mt[t],0,0),La.push(e)}}Xf();const se={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>ut[t],uY:t=>dt[t],vX:t=>pt[t],vY:t=>mt[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>ws[t][e],sub:(t,e)=>ws[t][se.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?se.S:se.N:Math.abs(e)*2<=Math.abs(t)?t>0?se.E:se.W:e>0?t>0?se.SE:se.SW:t>0?se.NE:se.NW,matrixAppendRotationInv:(t,e,r=0,i=0)=>{const s=La[se.inv(e)];s.tx=r,s.ty=i,t.append(s)}};class bt{constructor(e,r,i=0,s=0){this._x=i,this._y=s,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new bt(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const Ua=class{constructor(){this.worldTransform=new ue,this.localTransform=new ue,this.position=new bt(this.onChange,this,0,0),this.scale=new bt(this.onChange,this,1,1),this.pivot=new bt(this.onChange,this,0,0),this.skew=new bt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let js=Ua;js.IDENTITY=new Ua;var Vf=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Hf=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Zn(t,e,r){const i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function Zi(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function ka(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Zi(2*e);case"bvec3":return Zi(3*e);case"bvec4":return Zi(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ut=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],$f={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},zf={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Wf(t,e){var i;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in t.uniforms){const n=e[s];if(!n){(i=t.uniforms[s])!=null&&i.group&&(t.uniforms[s].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const a=t.uniforms[s];let o=!1;for(let c=0;c<Ut.length;c++)if(Ut[c].test(n,a)){r.push(Ut[c].code(s,a)),o=!0;break}if(!o){const h=(n.size===1&&!n.isArray?$f:zf)[n.type].replace("location",`ud["${s}"].location`);r.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const Ga={};let It=Ga;function Yf(){if(It===Ga||It!=null&&It.isContextLost()){const t=W.ADAPTER.createCanvas();let e;W.PREFER_ENV>=Tt.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),It=e}return It}let kr;function jf(){if(!kr){kr=Ae.MEDIUM;const t=Yf();t&&t.getShaderPrecisionFormat&&(kr=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?Ae.HIGH:Ae.MEDIUM)}return kr}function Qn(t,e){const r=t.getShaderSource(e).split(`
`).map((h,f)=>`${f}: ${h}`),i=t.getShaderInfoLog(e),s=i.split(`
`),n={},a=s.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!n[h]?(n[h]=!0,!0):!1),o=[""];a.forEach(h=>{r[h-1]=`%c${r[h-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const c=r.join(`
`);o[0]=c,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function qf(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Qn(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||Qn(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const Kf={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Xa(t){return Kf[t]}let Gr=null;const Jn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Va(t,e){if(!Gr){const r=Object.keys(Jn);Gr={};for(let i=0;i<r.length;++i){const s=r[i];Gr[t[s]]=Jn[s]}}return Gr[e]}function ea(t,e,r){if(t.substring(0,9)!=="precision"){let i=e;return e===Ae.HIGH&&r!==Ae.HIGH&&(i=Ae.MEDIUM),`precision ${i} float;
${t}`}else if(r!==Ae.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Qt;function Zf(){if(typeof Qt=="boolean")return Qt;try{Qt=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Qt=!1}return Qt}let Qf=0;const Xr={},Ct=class{constructor(t,e,r="pixi-shader",i={}){this.extra={},this.id=Qf++,this.vertexSrc=t||Ct.defaultVertexSrc,this.fragmentSrc=e||Ct.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Xr[r]?(Xr[r]++,r+=`-${Xr[r]}`):Xr[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=ea(this.vertexSrc,Ct.defaultVertexPrecision,Ae.HIGH),this.fragmentSrc=ea(this.fragmentSrc,Ct.defaultFragmentPrecision,jf())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Hf}static get defaultFragmentSrc(){return Vf}static from(t,e,r){const i=t+e;let s=Yn[i];return s||(Yn[i]=s=new Ct(t,e,r)),s}};let je=Ct;je.defaultVertexPrecision=Ae.HIGH;je.defaultFragmentPrecision=Mt.apple.device?Ae.HIGH:Ae.MEDIUM;let Jf=0;class Ve{constructor(e,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Jf++,this.static=!!r,this.ubo=!!i,e instanceof be?(this.buffer=e,this.buffer.type=Xe.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new be(new Float32Array(1)),this.buffer.type=Xe.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,i){if(!this.ubo)this.uniforms[e]=new Ve(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,i){return new Ve(e,r,i)}static uboFrom(e,r){return new Ve(e,r??!0,!0)}}class gi{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof Ve?this.uniformGroup=r:this.uniformGroup=new Ve(r):this.uniformGroup=new Ve({}),this.disposeRunner=new Fe("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const i in r.uniforms){const s=r.uniforms[i];if(s.group&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,i){const s=je.from(e,r);return new gi(s,i)}}class el{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let n=0;n<e;n++)i[n]=n;this.defaultGroupCache[e]=Ve.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new je(this.vertexSrc,s)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new ue,default:this.defaultGroupCache[e]};return new gi(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let i=0;i<e;i++)i>0&&(r+=`
else `),i<e-1&&(r+=`if(vTextureId < ${i}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class tl{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function rl(){return!Mt.apple.device}function il(t){let e=!0;const r=W.ADAPTER.getNavigator();if(Mt.tablet||Mt.phone){if(Mt.apple.device){const i=r.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(Mt.android.device){const i=r.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?t:4}class Ha{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var sl=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,nl=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Re=class extends Ha{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Lf,this.vertexSize=6,this.state=_r.for2d(),this.size=Re.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??il(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??rl(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return Q("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return nl}static get defaultFragmentTemplate(){return sl}setShaderGenerator({vertex:t=Re.defaultVertexSrc,fragment:e=Re.defaultFragmentTemplate}={}){this.shaderGenerator=new el(t,e)}contextChange(){const t=this.renderer.gl;W.PREFER_ENV===Tt.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Re.defaultMaxTextures),this.maxTextures=Rf(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Re,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new Mf);for(;e.length<i;)e.push(new tl);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=Re._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,n=this.renderer.textureGC.count;let a=++Z._globalBatch,o=0,c=r[0],h=0;i.copyBoundTextures(s,e);for(let f=0;f<this._bufferSize;++f){const l=t[f];t[f]=null,l._batchEnabled!==a&&(c.count>=e&&(i.boundArray(c,s,a,e),this.buildDrawCalls(c,h,f),h=f,c=r[++o],++a),l._batchEnabled=a,l.touched=n,c.elements[c.count++]=l)}c.count>0&&(i.boundArray(c,s,a,e),this.buildDrawCalls(c,h,this._bufferSize),++o,++a);for(let f=0;f<s.length;f++)s[f]=null;Z._globalBatch=a}buildDrawCalls(t,e,r){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:n,vertexSize:a}=this,o=Re._drawCallPool;let c=this._dcIndex,h=this._aIndex,f=this._iIndex,l=o[c];l.start=this._iIndex,l.texArray=t;for(let u=e;u<r;++u){const b=i[u],y=b._texture.baseTexture,w=Tf[y.alphaMode?1:0][b.blendMode];i[u]=null,e<u&&l.blend!==w&&(l.size=f-l.start,e=u,l=o[++c],l.texArray=t,l.start=f),this.packInterleavedGeometry(b,s,n,h,f),h+=b.vertexData.length/2*a,f+=b.indices.length,l.blend=w}e<r&&(l.size=f-l.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=f}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;Re.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,i=Re._drawCallPool;let s=null;for(let n=0;n<t;n++){const{texArray:a,type:o,size:c,start:h,blend:f}=i[n];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=f,r.set(this.state),e.drawElements(o,c,e.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Re.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=hi(Math.ceil(t/8)),r=Wn(e),i=e*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new If(i*this.vertexSize*4)),s}getIndexBuffer(t){const e=hi(Math.ceil(t/12)),r=Wn(e),i=e*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(t,e,r,i,s){const{uint32View:n,float32View:a}=e,o=i/this.vertexSize,c=t.uvs,h=t.indices,f=t.vertexData,l=t._texture.baseTexture._batchLocation,u=Math.min(t.worldAlpha,1),b=ot.shared.setValue(t._tintRGB).toPremultiplied(u,t._texture.baseTexture.alphaMode>0);for(let y=0;y<f.length;y+=2)a[i++]=f[y],a[i++]=f[y+1],a[i++]=c[y],a[i++]=c[y+1],n[i++]=b,a[i++]=l;for(let y=0;y<h.length;y++)r[s++]=o+h[y]}};let Me=Re;Me.defaultBatchSize=4096;Me.extension={name:"batch",type:X.RendererPlugin};Me._drawCallPool=[];Me._textureArrayPool=[];K.add(Me);var al=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,ol=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const rr=class extends gi{constructor(t,e,r){const i=je.from(t||rr.defaultVertexSrc,e||rr.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=rr.defaultResolution,this.multisample=rr.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new _r}apply(t,e,r,i,s){t.applyFilter(this,e,r,i)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return ol}static get defaultFragmentSrc(){return al}};let rt=rr;rt.defaultResolution=1;rt.defaultMultisample=oe.NONE;class bi{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ot(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:i,backgroundAlpha:s}=e,n=i??r;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}bi.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};bi.extension={type:[X.RendererSystem,X.CanvasRendererSystem],name:"background"};K.add(bi);class $a{constructor(e){this.renderer=e,this.emptyRenderer=new Ha(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:i}=this.renderer.texture;for(let s=r-1;s>=0;--s)e[s]=i[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,r,i,s){const{elements:n,ids:a,count:o}=e;let c=0;for(let h=0;h<o;h++){const f=n[h],l=f._batchLocation;if(l>=0&&l<s&&r[l]===f){a[h]=l;continue}for(;c<s;){const u=r[c];if(u&&u._batchEnabled===i&&u._batchLocation===c){c++;continue}a[h]=c,f._batchLocation=c,r[c]=f;break}}}destroy(){this.renderer=null}}$a.extension={type:X.RendererSystem,name:"batch"};K.add($a);let ta=0;class vi{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=ta++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=ta++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let i;if(W.PREFER_ENV>=Tt.WEBGL2&&(i=e.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}vi.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};vi.extension={type:X.RendererSystem,name:"context"};K.add(vi);class cl extends Ys{upload(e,r,i){const s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===nt.UNPACK);const n=r.realWidth,a=r.realHeight;return i.width===n&&i.height===a?s.texSubImage2D(r.target,0,0,0,n,a,r.format,i.type,this.data):(i.width=n,i.height=a,s.texImage2D(r.target,0,i.internalFormat,n,a,0,r.format,i.type,this.data)),!0}}class As{constructor(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Fe("disposeFramebuffer"),this.multisample=oe.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new Z(null,{scaleMode:ve.NEAREST,resolution:1,mipmap:xt.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Z(new cl(null,{width:this.width,height:this.height}),{scaleMode:ve.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:xt.OFF,format:O.DEPTH_COMPONENT,type:q.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const s=this.colorTextures[i],n=s.resolution;s.setSize(e/n,r/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,r/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class za extends Z{constructor(e={}){if(typeof e=="number"){const r=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];e={width:r,height:i,scaleMode:s,resolution:n}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=oe.NONE),super(null,e),this.mipmap=xt.OFF,this.valid=!0,this._clear=new ot([0,0,0,0]),this.framebuffer=new As(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class it extends mr{constructor(e){const r=e,i=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;super(i,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,i){i===void 0&&!r.startsWith("data:")?e.crossOrigin=Af(r):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,r,i,s){const n=e.gl,a=r.realWidth,o=r.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1&&s.buffered.length===0)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===nt.UNPACK),!this.noSubImage&&r.target===n.TEXTURE_2D&&i.width===a&&i.height===o?n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,i.type,s):(i.width=a,i.height=o,n.texImage2D(r.target,0,i.internalFormat,r.format,i.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(r,i),super.update()}dispose(){this.source=null}}class Wa extends it{constructor(e,r){if(r=r||{},typeof e=="string"){const i=new Image;it.crossOrigin(i,e,r.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??W.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,i)=>{const s=this.source;this.url=s.src;const n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.resize(s.width,s.height),this._load=null,this.createBitmap?r(this.process()):r(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=a=>{i(a),this.onError.emit(a)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>r(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===nt.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,i){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,i,this.bitmap),!this.preserveBitmap){let s=!0;const n=r._glTextures;for(const a in n){const o=n[a];if(o!==i&&o.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Ya{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,i){const s=r.width,n=r.height;if(i){const a=e.width/2/s,o=e.height/2/n,c=e.x/s+a,h=e.y/n+o;i=se.add(i,se.NW),this.x0=c+a*se.uX(i),this.y0=h+o*se.uY(i),i=se.add(i,2),this.x1=c+a*se.uX(i),this.y1=h+o*se.uY(i),i=se.add(i,2),this.x2=c+a*se.uX(i),this.y2=h+o*se.uY(i),i=se.add(i,2),this.x3=c+a*se.uX(i),this.y3=h+o*se.uY(i)}else this.x0=e.x/s,this.y0=e.y/n,this.x1=(e.x+e.width)/s,this.y1=e.y/n,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/n,this.x3=e.x/s,this.y3=(e.y+e.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const ra=new Ya;function Vr(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class z extends br{constructor(e,r,i,s,n,a,o){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new re(0,0,1,1)),e instanceof z&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=s,this.valid=!1,this._uvs=ra,this.uvMatrix=null,this.orig=i||r,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new ie(a.x,a.y):new ie(0,0),this.defaultBorders=o,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&ke[r.url]&&z.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,z.removeFromCache(this),this.textureCacheIds=null}clone(){var s;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),i=new z(this.baseTexture,!this.noFrame&&e,r,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===ra&&(this._uvs=new Ya),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},i=W.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else if(e instanceof Z){if(!e.cacheId){const o=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${o}-${pr()}`,Z.addToCache(e,e.cacheId)}n=e.cacheId}else{if(!e._pixiId){const o=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${pr()}`}n=e._pixiId}let a=ke[n];if(s&&i&&!a)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!a&&!(e instanceof Z)?(r.resolution||(r.resolution=jn(e)),a=new z(new Z(e,r)),a.baseTexture.cacheId=n,Z.addToCache(a.baseTexture,n),z.addToCache(a,n)):!a&&e instanceof Z&&(a=new z(e),z.addToCache(a,n)),a}static fromURL(e,r){const i=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),s=z.from(e,Object.assign({resourceOptions:i},r),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(e,r,i,s){return new z(Z.fromBuffer(e,r,i,s))}static fromLoader(e,r,i,s){const n=new Z(e,Object.assign({scaleMode:Z.defaultOptions.scaleMode,resolution:jn(r)},s)),{resource:a}=n;a instanceof Wa&&(a.url=r);const o=new z(n);return i||(i=r),Z.addToCache(o.baseTexture,i),z.addToCache(o,i),i!==r&&(Z.addToCache(o.baseTexture,r),z.addToCache(o,r)),o.baseTexture.valid?Promise.resolve(o):new Promise(c=>{o.baseTexture.once("loaded",()=>c(o))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),ke[r]&&ke[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),ke[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=ke[e];if(r){const i=r.textureCacheIds.indexOf(e);return i>-1&&r.textureCacheIds.splice(i,1),delete ke[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)ke[e.textureCacheIds[r]]===e&&delete ke[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:i,width:s,height:n}=e,a=r+s>this.baseTexture.width,o=i+n>this.baseTexture.height;if(a||o){const c=a&&o?"and":"or",h=`X: ${r} + ${s} = ${r+s} > ${this.baseTexture.width}`,f=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${c} ${f}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return z._EMPTY||(z._EMPTY=new z(new Z),Vr(z._EMPTY),Vr(z._EMPTY.baseTexture)),z._EMPTY}static get WHITE(){if(!z._WHITE){const e=W.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),z._WHITE=new z(Z.from(e)),Vr(z._WHITE),Vr(z._WHITE.baseTexture)}return z._WHITE}}class _i extends z{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,i=!0){const s=this.baseTexture.resolution,n=Math.round(e*s)/s,a=Math.round(r*s)/s;this.valid=n>0&&a>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(n,a),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new _i(new za(e))}}class ja{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,i=oe.NONE){const s=new za(Object.assign({width:e,height:r,resolution:1,multisample:i},this.textureOptions));return new _i(s)}getOptimalTexture(e,r,i=1,s=oe.NONE){let n;e=Math.ceil(e*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=hi(e),r=hi(r),n=((e&65535)<<16|r&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let a=this.texturePool[n].pop();return a||(a=this.createTexture(e,r,s)),a.filterPoolKey=n,a.setResolution(i),a}getFilterTexture(e,r,i){const s=this.getOptimalTexture(e.width,e.height,r||e.resolution,i||oe.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}ja.SCREEN_KEY=-1;class hl extends Vt{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class fl extends Vt{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new be(this.vertices),this.uvBuffer=new be(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+r.width/e.width,this.uvs[3]=s,this.uvs[4]=i+r.width/e.width,this.uvs[5]=s+r.height/e.height,this.uvs[6]=i,this.uvs[7]=s+r.height/e.height,i=r.x,s=r.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+r.width,this.vertices[3]=s,this.vertices[4]=i+r.width,this.vertices[5]=s+r.height,this.vertices[6]=i,this.vertices[7]=s+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class ll{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=oe.NONE,this.sourceFrame=new re,this.destinationFrame=new re,this.bindingSourceFrame=new re,this.bindingDestinationFrame=new re,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Hr=[new ie,new ie,new ie,new ie],Qi=new ue;class qa{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new ja,this.statePool=[],this.quad=new hl,this.quadUv=new fl,this.tempRect=new re,this.activeState={},this.globalUniforms=new Ve({outputFrame:new re,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new ll,a=this.renderer.renderTexture;let o=r[0].resolution,c=r[0].multisample,h=r[0].padding,f=r[0].autoFit,l=r[0].legacy??!0;for(let y=1;y<r.length;y++){const w=r[y];o=Math.min(o,w.resolution),c=Math.min(c,w.multisample),h=this.useMaxPadding?Math.max(h,w.padding):h+w.padding,f=f&&w.autoFit,l=l||(w.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),s.push(n),n.resolution=o,n.multisample=c,n.legacy=l,n.target=e,n.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),n.sourceFrame.pad(h);const u=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(Qi.copyFrom(i.projection.transform).invert(),u),f?(n.sourceFrame.fit(u),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(u)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o,c),n.filters=r,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const b=this.tempRect;b.x=0,b.y=0,b.width=n.sourceFrame.width,b.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(a.sourceFrame),n.bindingDestinationFrame.copyFrom(a.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,a.bind(n.renderTexture,n.sourceFrame,b),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),i=r.filters;this.activeState=r;const s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;const n=s.inputSize,a=s.inputPixel,o=s.inputClamp;if(n[0]=r.destinationFrame.width,n[1]=r.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],a[0]=Math.round(n[0]*r.resolution),a[1]=Math.round(n[1]*r.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=r.sourceFrame.width*n[2]-.5*a[2],o[3]=r.sourceFrame.height*n[3]-.5*a[3],r.legacy){const h=s.filterArea;h[0]=r.destinationFrame.width,h[1]=r.destinationFrame.height,h[2]=r.sourceFrame.x,h[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const c=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,c.renderTexture,lt.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let h=r.renderTexture,f=this.getOptimalFilterTexture(h.width,h.height,r.resolution);f.filterFrame=h.filterFrame;let l=0;for(l=0;l<i.length-1;++l){l===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(h.width,h.height,r.resolution),f.filterFrame=h.filterFrame),i[l].apply(this,h,f,lt.CLEAR,r);const u=h;h=f,f=u}i[l].apply(this,h,c.renderTexture,lt.BLEND,r),l>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=lt.CLEAR){const{renderTexture:i,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!=null&&e.filterFrame){const a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,i.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=s.stateId&1||this.forceClear;(r===lt.CLEAR||r===lt.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,i,s){const n=this.renderer;n.state.set(e.state),this.bindAndClear(i,s),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(ii.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(ii.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=r._texture,a=e.set(s.width,0,0,s.height,i.x,i.y),o=r.worldTransform.copyTo(ue.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/n.width,1/n.height),a.translate(r.anchor.x,r.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,i=1,s=oe.NONE){return this.texturePool.getOptimalTexture(e,r,i,s)}getFilterTexture(e,r,i){if(typeof e=="number"){const n=e;e=r,r=n}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,i||oe.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const i=Hr[0],s=Hr[1],n=Hr[2],a=Hr[3];i.set(r.left,r.top),s.set(r.left,r.bottom),n.set(r.right,r.top),a.set(r.right,r.bottom),e.apply(i,i),e.apply(s,s),e.apply(n,n),e.apply(a,a);const o=Math.min(i.x,s.x,n.x,a.x),c=Math.min(i.y,s.y,n.y,a.y),h=Math.max(i.x,s.x,n.x,a.x),f=Math.max(i.y,s.y,n.y,a.y);r.x=o,r.y=c,r.width=h-o,r.height=f-c}roundFrame(e,r,i,s,n){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(n){const{a,b:o,c,d:h}=n;if((Math.abs(o)>1e-4||Math.abs(c)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(h)>1e-4))return}n=n?Qi.copyFrom(n):Qi.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,e),e.ceil(r),this.transformAABB(n.invert(),e)}}}qa.extension={type:X.RendererSystem,name:"filter"};K.add(qa);class ul{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=oe.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const dl=new re;class Ka{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new As(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new re,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;W.PREFER_ENV===Tt.WEBGL_LEGACY&&(r=null,i=null),r?e.drawBuffers=s=>r.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,i=0){const{gl:s}=this;if(e){const n=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,n.mipLevel=i),n.dirtyId!==e.dirtyId&&(n.dirtyId=e.dirtyId,n.dirtyFormat!==e.dirtyFormat?(n.dirtyFormat=e.dirtyFormat,n.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):n.dirtySize!==e.dirtySize&&(n.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let a=0;a<e.colorTextures.length;a++){const o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const a=r.width>>i,o=r.height>>i,c=a/r.width;this.setViewport(r.x*c,r.y*c,a,o)}else{const a=e.width>>i,o=e.height>>i;this.setViewport(0,0,a,o)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,i,s){const n=this.viewport;e=Math.round(e),r=Math.round(r),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==e||n.y!==r)&&(n.x=e,n.y=r,n.width=i,n.height=s,this.gl.viewport(e,r,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,i,s,n=as.COLOR|as.DEPTH){const{gl:a}=this;a.clearColor(e,r,i,s),a.clear(n)}initFramebuffer(e){const{gl:r}=this,i=new ul(r.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID];i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));const s=e.colorTextures;let n=s.length;r.drawBuffers||(n=Math.min(n,1));for(let a=0;a<n;a++){const o=s[a],c=o.parentTextureArray||o;this.renderer.texture.bind(c,0),a===0&&i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:i}=this,s=e.glFramebuffers[this.CONTEXT_UID],n=e.colorTextures;let a=n.length;i.drawBuffers||(a=Math.min(a,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const o=[];for(let c=0;c<a;c++){const h=n[c],f=h.parentTextureArray||h;this.renderer.texture.bind(f,0),c===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+c,h.target,f._glTextures[this.CONTEXT_UID].texture,r),o.push(i.COLOR_ATTACHMENT0+c))}if(o.length>1&&i.drawBuffers(o),e.depthTexture&&this.writeDepthTexture){const h=e.depthTexture;this.renderer.texture.bind(h,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s.stencil)):s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let i=oe.NONE;if(e<=1||r===null)return i;for(let s=0;s<r.length;s++)if(r[s]<=e){i=r[s];break}return i===1&&(i=oe.NONE),i}blit(e,r,i){const{current:s,renderer:n,gl:a,CONTEXT_UID:o}=this;if(n.context.webGLVersion!==2||!s)return;const c=s.glFramebuffers[o];if(!c)return;if(!e){if(!c.msaaBuffer)return;const f=s.colorTextures[0];if(!f)return;c.blitFramebuffer||(c.blitFramebuffer=new As(s.width,s.height),c.blitFramebuffer.addColorTexture(0,f)),e=c.blitFramebuffer,e.colorTextures[0]!==f&&(e.colorTextures[0]=f,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}r||(r=dl,r.width=s.width,r.height=s.height),i||(i=r);const h=r.width===i.width&&r.height===i.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,c.framebuffer),a.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,h?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const i=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(e);n>=0&&this.managedFramebuffers.splice(n,1),e.disposeRunner.remove(this),r||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<r.length;i++)this.disposeFramebuffer(r[i],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;e.stencil=!0;const i=e.width,s=e.height,n=this.gl,a=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,a),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,i,s):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,s),r.stencil=a,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new re}destroy(){this.renderer=null}}Ka.extension={type:X.RendererSystem,name:"framebuffer"};K.add(Ka);const Ji={5126:4,5123:2,5121:1};class Za{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;W.PREFER_ENV===Tt.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=s=>i.bindVertexArrayOES(s),e.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),e.drawElementsInstanced=(s,n,a,o,c)=>i.drawElementsInstancedANGLE(s,n,a,o,c),e.drawArraysInstanced=(s,n,a,o)=>i.drawArraysInstancedANGLE(s,n,a,o)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:i}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);const a=s[r.program.id]||this.initGeometryVao(e,r,n);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const s=e.buffers[i];r.update(s)}}checkCompatibility(e,r){const i=e.attributes,s=r.attributeData;for(const n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(e,r){const i=e.attributes,s=r.attributeData,n=["g",e.id];for(const a in i)s[a]&&n.push(a,s[a].location);return n.join("-")}initGeometryVao(e,r,i=!0){const s=this.gl,n=this.CONTEXT_UID,a=this.renderer.buffer,o=r.program;o.glPrograms[n]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,o);const c=this.getSignature(e,o),h=e.glVertexArrayObjects[this.CONTEXT_UID];let f=h[c];if(f)return h[o.id]=f,f;const l=e.buffers,u=e.attributes,b={},y={};for(const w in l)b[w]=0,y[w]=0;for(const w in u)!u[w].size&&o.attributeData[w]?u[w].size=o.attributeData[w].size:u[w].size||console.warn(`PIXI Geometry attribute '${w}' size cannot be determined (likely the bound shader does not have the attribute)`),b[u[w].buffer]+=u[w].size*Ji[u[w].type];for(const w in u){const T=u[w],S=T.size;T.stride===void 0&&(b[T.buffer]===S*Ji[T.type]?T.stride=0:T.stride=b[T.buffer]),T.start===void 0&&(T.start=y[T.buffer],y[T.buffer]+=S*Ji[T.type])}f=s.createVertexArray(),s.bindVertexArray(f);for(let w=0;w<l.length;w++){const T=l[w];a.bind(T),i&&T._glBuffers[n].refCount++}return this.activateVao(e,o),h[o.id]=f,h[c]=f,s.bindVertexArray(null),a.unbind(Xe.ARRAY_BUFFER),f}disposeGeometry(e,r){var o;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=e.buffers,a=(o=this.renderer)==null?void 0:o.buffer;if(e.disposeRunner.remove(this),!!i){if(a)for(let c=0;c<n.length;c++){const h=n[c]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&a.dispose(n[c],r))}if(!r){for(const c in i)if(c[0]==="g"){const h=i[c];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],e)}activateVao(e,r){const i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,a=e.buffers,o=e.attributes;e.indexBuffer&&n.bind(e.indexBuffer);let c=null;for(const h in o){const f=o[h],l=a[f.buffer],u=l._glBuffers[s];if(r.attributeData[h]){c!==u&&(n.bind(l),c=u);const b=r.attributeData[h].location;if(i.enableVertexAttribArray(b),i.vertexAttribPointer(b,f.size,f.type||i.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)i.vertexAttribDivisor(b,f.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,i,s){const{gl:n}=this,a=this._activeGeometry;if(a.indexBuffer){const o=a.indexBuffer.data.BYTES_PER_ELEMENT,c=o===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?n.drawElementsInstanced(e,r||a.indexBuffer.data.length,c,(i||0)*o,s||1):n.drawElements(e,r||a.indexBuffer.data.length,c,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?n.drawArraysInstanced(e,i,r||a.getSize(),s||1):n.drawArrays(e,i,r||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Za.extension={type:X.RendererSystem,name:"geometry"};K.add(Za);const ia=new ue;class pl{constructor(e,r){this._texture=e,this.mapCoord=new ue,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const i=this.mapCoord;for(let s=0;s<e.length;s+=2){const n=e[s],a=e[s+1];r[s]=n*i.a+a*i.c+i.tx,r[s+1]=n*i.b+a*i.d+i.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=r.orig,n=r.trim;n&&(ia.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(ia));const a=r.baseTexture,o=this.uClampFrame,c=this.clampMargin/a.resolution,h=this.clampOffset;return o[0]=(r._frame.x+c+h)/a.width,o[1]=(r._frame.y+c+h)/a.height,o[2]=(r._frame.x+r._frame.width-c+h)/a.width,o[3]=(r._frame.y+r._frame.height-c+h)/a.height,this.uClampOffset[0]=h/a.realWidth,this.uClampOffset[1]=h/a.realHeight,this.isSimple=r._frame.width===a.width&&r._frame.height===a.height&&r.rotate===0,!0}}var ml=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,yl=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class gl extends rt{constructor(e,r,i){let s=null;typeof e!="string"&&r===void 0&&i===void 0&&(s=e,e=void 0,r=void 0,i=void 0),super(e||yl,r||ml,i),this.maskSprite=s,this.maskMatrix=new ue}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,i,s){const n=this._maskSprite,a=n._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new pl(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,r,i,s))}}class bl{constructor(e=null){this.type=ce.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=rt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ce.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Qa{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let i=r;if(!i.isMaskData){const n=this.maskDataPool.pop()||new bl;n.pooled=!0,n.maskObject=r,i=n}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==ce.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case ce.SCISSOR:this.renderer.scissor.push(i);break;case ce.STENCIL:this.renderer.stencil.push(i);break;case ce.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case ce.COLOR:this.pushColorMask(i);break}i.type===ce.SPRITE&&this.maskStack.push(i)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case ce.SCISSOR:this.renderer.scissor.pop(r);break;case ce.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case ce.SPRITE:this.popSpriteMask(r);break;case ce.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===ce.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=ce.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=ce.SCISSOR:e.type=ce.STENCIL:e.type=ce.COLOR}pushSpriteMask(e){const{maskObject:r}=e,i=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new gl]));const n=this.renderer,a=n.renderTexture;let o,c;if(a.current){const f=a.current;o=e.resolution||f.resolution,c=e.multisample??f.multisample}else o=e.resolution||n.resolution,c=e.multisample??n.multisample;s[0].resolution=o,s[0].multisample=c,s[0].maskSprite=r;const h=i.filterArea;i.filterArea=r.getBounds(!0),n.filter.push(i,s),i.filterArea=h,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,i=e._colorMask=r&e.colorMask;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const r=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}Qa.extension={type:X.RendererSystem,name:"mask"};K.add(Qa);class Ja{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,i=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==i&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const sa=new ue,na=[],Jr=class extends Ja{constructor(t){super(t),this.glConst=W.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:i}=this,s=i.renderTexture,n=r.getBounds(!0,na.pop()??new re);this.roundFrameToPixels(n,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),e&&n.fit(e),t._scissorRectLocal=n}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:i,d:s}=t;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Jr.isMatrixRotated(e.worldTransform)||Jr.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,i,s){Jr.isMatrixRotated(s)||(s=s?sa.copyFrom(s):sa.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,t),t.fit(i),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&na.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let eo=Jr;eo.extension={type:X.RendererSystem,name:"scissor"};K.add(eo);class to extends Ja{constructor(e){super(e),this.glConst=W.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:i}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const n=e._colorMask;n!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,n!==0&&(e._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(i._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}to.extension={type:X.RendererSystem,name:"stencil"};K.add(to);class ro{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Q("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Q("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Q("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}ro.extension={type:[X.RendererSystem,X.CanvasRendererSystem],name:"_plugin"};K.add(ro);class io{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ue,this.transform=null}update(e,r,i,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(e,r,i,s){const n=this.projectionMatrix,a=s?-1:1;n.identity(),n.a=1/r.width*2,n.d=a*(1/r.height*2),n.tx=-1-r.x*n.a,n.ty=-a-r.y*n.d}setTransform(e){}destroy(){this.renderer=null}}io.extension={type:X.RendererSystem,name:"projection"};K.add(io);const vl=new js;class so{constructor(e){this.renderer=e,this._tempMatrix=new ue}generateTexture(e,r){const{region:i,...s}=r||{},n=i||e.getLocalBounds(null,!0);n.width===0&&(n.width=1),n.height===0&&(n.height=1);const a=_i.create({width:n.width,height:n.height,...s});this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const o=e.transform;return e.transform=vl,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=o,a}destroy(){}}so.extension={type:[X.RendererSystem,X.CanvasRendererSystem],name:"textureGenerator"};K.add(so);const ht=new re,Jt=new re;class no{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new re,this.destinationFrame=new re,this.viewportFrame=new re}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,i){const s=this.renderer;this.current=e;let n,a,o;e?(n=e.baseTexture,o=n.resolution,r||(ht.width=e.frame.width,ht.height=e.frame.height,r=ht),i||(Jt.x=e.frame.x,Jt.y=e.frame.y,Jt.width=r.width,Jt.height=r.height,i=Jt),a=n.framebuffer):(o=s.resolution,r||(ht.width=s._view.screen.width,ht.height=s._view.screen.height,r=ht),i||(i=ht,i.width=r.width,i.height=r.height));const c=this.viewportFrame;c.x=i.x*o,c.y=i.y*o,c.width=i.width*o,c.height=i.height*o,e||(c.y=s.view.height-(c.y+c.height)),c.ceil(),this.renderer.framebuffer.bind(a,c),this.renderer.projection.update(i,r,o,!a),e?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)}clear(e,r){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=ot.shared.setValue(e||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const n=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,o=n.width!==a.width||n.height!==a.height;if(o){let{x:c,y:h,width:f,height:l}=this.viewportFrame;c=Math.round(c),h=Math.round(h),f=Math.round(f),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(c,h,f,l)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,r),o&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}no.extension={type:X.RendererSystem,name:"renderTexture"};K.add(no);class _l{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function xl(t,e){const r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const n=e.getActiveAttrib(t,s);if(n.name.startsWith("gl_"))continue;const a=Va(e,n.type),o={type:a,name:n.name,size:Xa(a),location:e.getAttribLocation(t,n.name)};r[n.name]=o}return r}function El(t,e){const r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const n=e.getActiveUniform(t,s),a=n.name.replace(/\[.*?\]$/,""),o=!!n.name.match(/\[.*?\]$/),c=Va(e,n.type);r[a]={name:a,index:s,type:c,size:n.size,isArray:o,value:ka(c,n.size)}}return r}function Tl(t,e){var c;const r=Zn(t,t.VERTEX_SHADER,e.vertexSrc),i=Zn(t,t.FRAGMENT_SHADER,e.fragmentSrc),s=t.createProgram();t.attachShader(s,r),t.attachShader(s,i);const n=(c=e.extra)==null?void 0:c.transformFeedbackVaryings;if(n&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||qf(t,s,r,i),e.attributeData=xl(s,t),e.uniformData=El(s,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const h=Object.keys(e.attributeData);h.sort((f,l)=>f>l?1:-1);for(let f=0;f<h.length;f++)e.attributeData[h[f]].location=f,t.bindAttribLocation(s,f,h[f]);t.linkProgram(s)}t.deleteShader(r),t.deleteShader(i);const a={};for(const h in e.uniformData){const f=e.uniformData[h];a[h]={location:t.getUniformLocation(s,h),value:ka(f.type,f.size)}}return new _l(s,a)}function wl(t,e,r,i,s){r.buffer.update(s)}const Al={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},ao={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Il(t){const e=t.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let r=0,i=0,s=0;for(let n=0;n<e.length;n++){const a=e[n];if(r=ao[a.data.type],a.data.size>1&&(r=Math.max(r,16)*a.data.size),a.dataLen=r,i%r!==0&&i<16){const o=i%r%16;i+=o,s+=o}i+r>16?(s=Math.ceil(s/16)*16,a.offset=s,s+=r,i=r):(a.offset=s,i+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function Sl(t,e){const r=[];for(const i in t)e[i]&&r.push(e[i]);return r.sort((i,s)=>i.index-s.index),r}function Pl(t,e){if(!t.autoManage)return{size:0,syncFunc:wl};const r=Sl(t.uniforms,e),{uboElements:i,size:s}=Il(r),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let a=0;a<i.length;a++){const o=i[a],c=t.uniforms[o.data.name],h=o.data.name;let f=!1;for(let l=0;l<Ut.length;l++){const u=Ut[l];if(u.codeUbo&&u.test(o.data,c)){n.push(`offset = ${o.offset/4};`,Ut[l].codeUbo(o.data.name,c)),f=!0;break}}if(!f)if(o.data.size>1){const l=Xa(o.data.type),u=Math.max(ao[o.data.type]/16,1),b=l/u,y=(4-b%4)%4;n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${o.offset/4};

                t = 0;

                for(var i=0; i < ${o.data.size*u}; i++)
                {
                    for(var j = 0; j < ${b}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${y};
                }

                `)}else{const l=Al[o.data.type];n.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${o.offset/4};
                ${l};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let Rl=0;const $r={textureCount:0,uboCount:0};class oo{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Rl++}systemCheck(){if(!Zf())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),r||($r.textureCount=0,$r.uboCount=0,this.syncUniformGroup(e.uniformGroup,$r)),s}setUniforms(e){const r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,r){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,r))}syncUniforms(e,r,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=Wf(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const s=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,r);e.buffer.update(),s(i.uniformData,e.uniforms,this.renderer,$r,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[r])}createSyncBufferGroup(e,r,i){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const n=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const a=this.getSignature(e,this.shader.program.uniformData,"ubo");let o=this._uboCache[a];if(o||(o=this._uboCache[a]=Pl(e,this.shader.program.uniformData)),e.autoManage){const c=new Float32Array(o.size/4);e.buffer.update(c)}return r.uniformGroups[e.id]=o.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,i){const s=e.uniforms,n=[`${i}-`];for(const a in s)n.push(a),r[a]&&n.push(r[a].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,i=e.program,s=Tl(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}oo.extension={type:X.RendererSystem,name:"shader"};K.add(oo);class xi{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}xi.defaultOptions={hello:!1};xi.extension={type:[X.RendererSystem,X.CanvasRendererSystem],name:"startup"};K.add(xi);function Cl(t,e=[]){return e[k.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.ADD]=[t.ONE,t.ONE],e[k.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.NONE]=[0,0],e[k.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[k.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[k.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[k.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[k.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[k.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[k.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[k.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[k.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[k.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[k.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const Ml=0,Nl=1,Bl=2,Ol=3,Fl=4,Dl=5,Is=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=k.NONE,this._blendEq=!1,this.map=[],this.map[Ml]=this.setBlend,this.map[Nl]=this.setOffset,this.map[Bl]=this.setCullFace,this.map[Ol]=this.setDepthTest,this.map[Fl]=this.setFrontFace,this.map[Dl]=this.setDepthMask,this.checks=[],this.defaultState=new _r,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=Cl(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Is.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Is.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let co=Is;co.extension={type:X.RendererSystem,name:"state"};K.add(co);class Ll extends br{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(s=>e.systems[s]),i=[...r,...Object.keys(e.systems).filter(s=>!r.includes(s))];for(const s of i)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(r=>{this.runners[r]=new Fe(r)})}addSystem(e,r){const i=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=i,this._systemsHash[r]=i;for(const s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(e,r){const i=Object.keys(this._systemsHash);e.items.forEach(s=>{const n=i.find(a=>this._systemsHash[a]===s);s[e.name](r[n])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const ei=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=ei.defaultMaxIdle,this.checkCountMax=ei.defaultCheckCountMax,this.mode=ei.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Us.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let i=0;i<e.length;i++){const s=e[i];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<e.length;s++)e[s]!==null&&(e[i++]=e[s]);e.length=i}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let i=t.children.length-1;i>=0;i--)this.unload(t.children[i])}destroy(){this.renderer=null}};let Ne=ei;Ne.defaultMode=Us.AUTO;Ne.defaultMaxIdle=60*60;Ne.defaultCheckCountMax=60*10;Ne.extension={type:X.RendererSystem,name:"textureGC"};K.add(Ne);class es{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=q.UNSIGNED_BYTE,this.internalFormat=O.RGBA,this.samplerType=0}}function Ul(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[q.UNSIGNED_BYTE]:{[O.RGBA]:t.RGBA8,[O.RGB]:t.RGB8,[O.RG]:t.RG8,[O.RED]:t.R8,[O.RGBA_INTEGER]:t.RGBA8UI,[O.RGB_INTEGER]:t.RGB8UI,[O.RG_INTEGER]:t.RG8UI,[O.RED_INTEGER]:t.R8UI,[O.ALPHA]:t.ALPHA,[O.LUMINANCE]:t.LUMINANCE,[O.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[q.BYTE]:{[O.RGBA]:t.RGBA8_SNORM,[O.RGB]:t.RGB8_SNORM,[O.RG]:t.RG8_SNORM,[O.RED]:t.R8_SNORM,[O.RGBA_INTEGER]:t.RGBA8I,[O.RGB_INTEGER]:t.RGB8I,[O.RG_INTEGER]:t.RG8I,[O.RED_INTEGER]:t.R8I},[q.UNSIGNED_SHORT]:{[O.RGBA_INTEGER]:t.RGBA16UI,[O.RGB_INTEGER]:t.RGB16UI,[O.RG_INTEGER]:t.RG16UI,[O.RED_INTEGER]:t.R16UI,[O.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[q.SHORT]:{[O.RGBA_INTEGER]:t.RGBA16I,[O.RGB_INTEGER]:t.RGB16I,[O.RG_INTEGER]:t.RG16I,[O.RED_INTEGER]:t.R16I},[q.UNSIGNED_INT]:{[O.RGBA_INTEGER]:t.RGBA32UI,[O.RGB_INTEGER]:t.RGB32UI,[O.RG_INTEGER]:t.RG32UI,[O.RED_INTEGER]:t.R32UI,[O.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[q.INT]:{[O.RGBA_INTEGER]:t.RGBA32I,[O.RGB_INTEGER]:t.RGB32I,[O.RG_INTEGER]:t.RG32I,[O.RED_INTEGER]:t.R32I},[q.FLOAT]:{[O.RGBA]:t.RGBA32F,[O.RGB]:t.RGB32F,[O.RG]:t.RG32F,[O.RED]:t.R32F,[O.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[q.HALF_FLOAT]:{[O.RGBA]:t.RGBA16F,[O.RGB]:t.RGB16F,[O.RG]:t.RG16F,[O.RED]:t.R16F},[q.UNSIGNED_SHORT_5_6_5]:{[O.RGB]:t.RGB565},[q.UNSIGNED_SHORT_4_4_4_4]:{[O.RGBA]:t.RGBA4},[q.UNSIGNED_SHORT_5_5_5_1]:{[O.RGBA]:t.RGB5_A1},[q.UNSIGNED_INT_2_10_10_10_REV]:{[O.RGBA]:t.RGB10_A2,[O.RGBA_INTEGER]:t.RGB10_A2UI},[q.UNSIGNED_INT_10F_11F_11F_REV]:{[O.RGB]:t.R11F_G11F_B10F},[q.UNSIGNED_INT_5_9_9_9_REV]:{[O.RGB]:t.RGB9_E5},[q.UNSIGNED_INT_24_8]:{[O.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[q.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[O.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[q.UNSIGNED_BYTE]:{[O.RGBA]:t.RGBA,[O.RGB]:t.RGB,[O.ALPHA]:t.ALPHA,[O.LUMINANCE]:t.LUMINANCE,[O.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[q.UNSIGNED_SHORT_5_6_5]:{[O.RGB]:t.RGB},[q.UNSIGNED_SHORT_4_4_4_4]:{[O.RGBA]:t.RGBA},[q.UNSIGNED_SHORT_5_5_5_1]:{[O.RGBA]:t.RGBA}},e}class ho{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Z,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Ul(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let s=0;s<r;s++)this.boundTextures[s]=null;this.emptyTextures={};const i=new es(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new es(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,r=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),e!=null&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===e&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(e.target,this.emptyTextures[e.target].texture),i[s]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=e-1;n>=0;--n){const a=r[n];a&&a._glTextures[s].samplerType!==os.FLOAT&&this.renderer.texture.unbind(a)}}initTexture(e){const r=new es(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var i;r.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,this.webGLVersion===2&&e.type===q.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var s;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const i=this.renderer;if(this.initTextureType(e,r),(s=e.resource)!=null&&s.upload(i,e,r))r.samplerType!==os.FLOAT&&(this.hasIntegerTextures=!0);else{const n=e.realWidth,a=e.realHeight,o=i.gl;(r.width!==n||r.height!==a||r.dirtyId<0)&&(r.width=n,r.height=a,o.texImage2D(e.target,0,r.internalFormat,n,a,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const s=this.managedTextures.indexOf(e);s!==-1&&Qr(this.managedTextures,s,1)}}updateTextureStyle(e){var i;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===xt.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Ls.CLAMP:r.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const i=this.gl;if(r.mipmap&&e.mipmap!==xt.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ve.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===ve.LINEAR){const n=Math.min(e.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ve.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===ve.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}ho.extension={type:X.RendererSystem,name:"texture"};K.add(ho);class fo{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:i}=this,s=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:i,renderer:s}=this;r&&s.shader.bind(r),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:i,CONTEXT_UID:s}=this,n=r.createTransformFeedback();e._glTransformFeedbacks[s]=n,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let a=0;a<e.buffers.length;a++){const o=e.buffers[a];o&&(i.buffer.update(o),o._glBuffers[s].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,a,o._glBuffers[s].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),n}disposeTransformFeedback(e,r){const i=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let a=0;a<e.buffers.length;a++){const o=e.buffers[a];if(!o)continue;const c=o._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!r&&n.dispose(o,r))}i&&(r||s.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}fo.extension={type:X.RendererSystem,name:"transformFeedback"};K.add(fo);class Ei{constructor(e){this.renderer=e}init(e){this.screen=new re(0,0,e.width,e.height),this.element=e.view||W.ADAPTER.createCanvas(),this.resolution=e.resolution||W.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Ei.defaultOptions={width:800,height:600,resolution:W.RESOLUTION,autoDensity:!1};Ei.extension={type:[X.RendererSystem,X.CanvasRendererSystem],name:"_view"};K.add(Ei);W.PREFER_ENV=Tt.WEBGL2;W.STRICT_TEXTURE_CACHE=!1;W.RENDER_OPTIONS={...vi.defaultOptions,...bi.defaultOptions,...Ei.defaultOptions,...xi.defaultOptions};Object.defineProperties(W,{WRAP_MODE:{get(){return Z.defaultOptions.wrapMode},set(t){Q("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Z.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Z.defaultOptions.scaleMode},set(t){Q("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Z.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Z.defaultOptions.mipmap},set(t){Q("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Z.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Z.defaultOptions.anisotropicLevel},set(t){Q("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Z.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return Q("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),rt.defaultResolution},set(t){rt.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return Q("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),rt.defaultMultisample},set(t){rt.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Me.defaultMaxTextures},set(t){Q("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Me.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Me.defaultBatchSize},set(t){Q("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Me.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Me.canUploadSameBuffer},set(t){Q("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Me.canUploadSameBuffer=t}},GC_MODE:{get(){return Ne.defaultMode},set(t){Q("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ne.defaultMode=t}},GC_MAX_IDLE:{get(){return Ne.defaultMaxIdle},set(t){Q("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ne.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Ne.defaultCheckCountMax},set(t){Q("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ne.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return je.defaultVertexPrecision},set(t){Q("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),je.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return je.defaultFragmentPrecision},set(t){Q("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),je.defaultFragmentPrecision=t}}});var yr=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(yr||{});class ts{constructor(e,r=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=i,this.once=s}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const xe=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ts(null,null,1/0),this.deltaMS=1/xe.targetFPMS,this.elapsedMS=1/xe.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=yr.NORMAL){return this._addListener(new ts(t,e,r))}addOnce(t,e,r=yr.NORMAL){return this._addListener(new ts(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*xe.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,xe.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!xe._shared){const t=xe._shared=new xe;t.autoStart=!0,t._protected=!0}return xe._shared}static get system(){if(!xe._system){const t=xe._system=new xe;t.autoStart=!0,t._protected=!0}return xe._system}};let Ee=xe;Ee.targetFPMS=.06;Object.defineProperties(W,{TARGET_FPMS:{get(){return Ee.targetFPMS},set(t){Q("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ee.targetFPMS=t}}});class lo{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,yr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ee.shared:new Ee,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}lo.extension=X.Application;K.add(lo);const uo=[];K.handleByList(X.Renderer,uo);function kl(t){for(const e of uo)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}class po{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}r>=oe.HIGH?this.multisample=oe.HIGH:r>=oe.MEDIUM?this.multisample=oe.MEDIUM:r>=oe.LOW?this.multisample=oe.LOW:this.multisample=oe.NONE}destroy(){}}po.extension={type:X.RendererSystem,name:"_multisample"};K.add(po);class Gl{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class mo{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:i}=this,s=e._glBuffers[i]||this.createGLBuffer(e);r.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[r]!==e){const n=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[r]=e,i.bindBufferBase(i.UNIFORM_BUFFER,r,n.buffer)}}bindBufferRange(e,r,i){const{gl:s,CONTEXT_UID:n}=this;i=i||0;const a=e._glBuffers[n]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,a.buffer,i*256,256)}update(e){const{gl:r,CONTEXT_UID:i}=this,s=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,r.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const n=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,n)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),i&&(r||s.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:i}=this;return e._glBuffers[r]=new Gl(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}mo.extension={type:X.RendererSystem,name:"buffer"};K.add(mo);class yo{constructor(e){this.renderer=e}render(e,r){const i=this.renderer;let s,n,a,o;if(r&&(s=r.renderTexture,n=r.clear,a=r.transform,o=r.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=a,!i.context.isLost){if(s||(this.lastObjectRendered=e),!o){const c=e.enableTempParent();e.updateTransform(),e.disableTempParent(c)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),s&&(r.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}yo.extension={type:X.RendererSystem,name:"objectRenderer"};K.add(yo);const Ss=class extends Ll{constructor(t){super(),this.type=ha.WEBGL,t=Object.assign({},W.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ve({projectionMatrix:new ue},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Ss.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(Q("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Ss.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:uf()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Q("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Q("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Q("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Q("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){Q("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return Q("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){Q("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return Q("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Wt=Ss;Wt.extension={type:X.Renderer,priority:1};Wt.__plugins={};Wt.__systems={};K.handleByMap(X.RendererPlugin,Wt.__plugins);K.handleByMap(X.RendererSystem,Wt.__systems);K.add(Wt);class go extends mr{constructor(e,r){const{width:i,height:s}=r||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<e;n++){const a=new Z;this.items.push(a),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof mr?this.addResourceAt(e[i],i):this.addResourceAt(Oa(e[i],r),i))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const r=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(r).then(()=>{const{realWidth:i,realHeight:s}=this.items[0];return this.resize(i,s),Promise.resolve(this)}),this._load}}class Xl extends go{constructor(e,r){const{width:i,height:s}=r||{};let n,a;Array.isArray(e)?(n=e,a=e.length):a=e,super(a,{width:i,height:s}),n&&this.initFromArray(n,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Ot.TEXTURE_2D_ARRAY}upload(e,r,i){const{length:s,itemDirtyIds:n,items:a}=this,{gl:o}=e;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,r.format,i.type,null);for(let c=0;c<s;c++){const h=a[c];n[c]<h.dirtyId&&(n[c]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,c,h.resource.width,h.resource.height,1,r.format,i.type,h.resource.source))}return!0}}class Vl extends it{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ir=class extends go{constructor(t,e){const{width:r,height:i,autoLoad:s,linkBaseTexture:n}=e||{};if(t&&t.length!==ir.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<ir.SIDES;a++)this.items[a].target=Ot.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=n!==!1,t&&this.initFromArray(t,e),s!==!1&&this.load()}bind(t){super.bind(t),t.target=Ot.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Ot.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const i=this.itemDirtyIds;for(let s=0;s<ir.SIDES;s++){const n=this.items[s];(i[s]<n.dirtyId||r.dirtyId<e.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(t,n,r),i[s]=n.dirtyId):i[s]<-1&&(t.gl.texImage2D(n.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ir.SIDES}};let bo=ir;bo.SIDES=6;class Bt extends it{constructor(e,r){r=r||{};let i,s;typeof e=="string"?(i=Bt.EMPTY,s=e):(i=e,s=null),super(i),this.url=s,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const i=await W.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===nt.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),e(this)}catch(i){if(this.destroyed)return;r(i),this.onError.emit(i)}}),this._load)}upload(e,r,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Bt._EMPTY=Bt._EMPTY??W.ADAPTER.createCanvas(0,0),Bt._EMPTY}}const ti=class extends it{constructor(t,e){e=e||{},super(W.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},ti.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;it.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=e*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*e,s=this._overrideHeight||this._overrideWidth/e*r),i=Math.round(i),s=Math.round(s);const n=this.source;n.width=i,n.height=s,n._pixiId=`canvas_${pr()}`,n.getContext("2d").drawImage(t,0,0,e,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(t){const e=ti.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&ti.SVG_XML.test(t)}};let qs=ti;qs.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;qs.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Ps=class extends it{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const i=t[0].src||t[0];it.crossOrigin(r,i,e.crossorigin);for(let s=0;s<t.length;++s){const n=document.createElement("source");let{src:a,mime:o}=t[s];a=a||t[s];const c=a.split("?").shift().toLowerCase(),h=c.slice(c.lastIndexOf(".")+1);o=o||Ps.MIME_TYPES[h]||`video/${h}`,n.src=a,n.type=o,r.appendChild(n)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=Ee.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ee.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Ee.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Ee.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ee.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ee.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||Ps.TYPES.includes(e)}};let Ks=Ps;Ks.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Ks.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Ts.push(Bt,Wa,Vl,Ks,qs,Ys,bo,Xl);class Rs{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?re.EMPTY:(e=e||new re(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:i,b:s,c:n,d:a,tx:o,ty:c}=e,h=i*r.x+n*r.y+o,f=s*r.x+a*r.y+c;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(e){let r=this.minX,i=this.minY,s=this.maxX,n=this.maxY,a=e[0],o=e[1];r=a<r?a:r,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,a=e[2],o=e[3],r=a<r?a:r,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,a=e[4],o=e[5],r=a<r?a:r,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,a=e[6],o=e[7],r=a<r?a:r,i=o<i?o:i,s=a>s?a:s,n=o>n?o:n,this.minX=r,this.minY=i,this.maxX=s,this.maxY=n}addFrame(e,r,i,s,n){this.addFrameMatrix(e.worldTransform,r,i,s,n)}addFrameMatrix(e,r,i,s,n){const a=e.a,o=e.b,c=e.c,h=e.d,f=e.tx,l=e.ty;let u=this.minX,b=this.minY,y=this.maxX,w=this.maxY,T=a*r+c*i+f,S=o*r+h*i+l;u=T<u?T:u,b=S<b?S:b,y=T>y?T:y,w=S>w?S:w,T=a*s+c*i+f,S=o*s+h*i+l,u=T<u?T:u,b=S<b?S:b,y=T>y?T:y,w=S>w?S:w,T=a*r+c*n+f,S=o*r+h*n+l,u=T<u?T:u,b=S<b?S:b,y=T>y?T:y,w=S>w?S:w,T=a*s+c*n+f,S=o*s+h*n+l,u=T<u?T:u,b=S<b?S:b,y=T>y?T:y,w=S>w?S:w,this.minX=u,this.minY=b,this.maxX=y,this.maxY=w}addVertexData(e,r,i){let s=this.minX,n=this.minY,a=this.maxX,o=this.maxY;for(let c=r;c<i;c+=2){const h=e[c],f=e[c+1];s=h<s?h:s,n=f<n?f:n,a=h>a?h:a,o=f>o?f:o}this.minX=s,this.minY=n,this.maxX=a,this.maxY=o}addVertices(e,r,i,s){this.addVerticesMatrix(e.worldTransform,r,i,s)}addVerticesMatrix(e,r,i,s,n=0,a=n){const o=e.a,c=e.b,h=e.c,f=e.d,l=e.tx,u=e.ty;let b=this.minX,y=this.minY,w=this.maxX,T=this.maxY;for(let S=i;S<s;S+=2){const p=r[S],d=r[S+1],x=o*p+h*d+l,E=f*d+c*p+u;b=Math.min(b,x-n),w=Math.max(w,x+n),y=Math.min(y,E-a),T=Math.max(T,E+a)}this.minX=b,this.minY=y,this.maxX=w,this.maxY=T}addBounds(e){const r=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>n?e.maxY:n}addBoundsMask(e,r){const i=e.minX>r.minX?e.minX:r.minX,s=e.minY>r.minY?e.minY:r.minY,n=e.maxX<r.maxX?e.maxX:r.maxX,a=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=n&&s<=a){const o=this.minX,c=this.minY,h=this.maxX,f=this.maxY;this.minX=i<o?i:o,this.minY=s<c?s:c,this.maxX=n>h?n:h,this.maxY=a>f?a:f}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const i=e.minX>r.x?e.minX:r.x,s=e.minY>r.y?e.minY:r.y,n=e.maxX<r.x+r.width?e.maxX:r.x+r.width,a=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=n&&s<=a){const o=this.minX,c=this.minY,h=this.maxX,f=this.maxY;this.minX=i<o?i:o,this.minY=s<c?s:c,this.maxX=n>h?n:h,this.maxY=a>f?a:f}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,i,s,n,a){e-=n,r-=a,i+=n,s+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s}}class st extends br{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new js,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Rs,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let i=0;i<r.length;++i){const s=r[i];Object.defineProperty(st.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new re),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new re),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Rs);const r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,e);return this.parent=i,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-n,a}toGlobal(e,r,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,i,s){return r&&(e=r.toGlobal(e,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,i=1,s=1,n=0,a=0,o=0,c=0,h=0){return this.position.x=e,this.position.y=r,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=a,this.skew.y=o,this.pivot.x=c,this.pivot.y=h,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Hl),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*kf}set angle(e){this.transform.rotation=e*Gf}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class Hl extends st{constructor(){super(...arguments),this.sortDirty=null}}st.prototype.displayObjectUpdateTransform=st.prototype.updateTransform;const $l=new ue;function zl(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const Cs=class extends st{constructor(){super(),this.children=[],this.sortableChildren=Cs.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);Qr(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(r===-1)return null;e.parent=null,e.transform._parentID=-1,Qr(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Qr(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,i=e,s=i-r;let n;if(s>0&&s<=i){n=this.children.splice(r,s);for(let a=0;a<n.length;++a)n[a].parent=null,n[a].transform&&(n[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<n.length;++a)n[a].emit("removed",this),this.emit("childRemoved",n[a],this,a);return n}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const i=this.children[e];i._lastSortedIndex=e,!t&&i.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(zl),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const r=this.children[t];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let i=0,s=this.children.length;i<s;++i){const n=this.children[i];n.visible&&n.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==Cs.prototype._render&&(r=this.getBounds(!0));const s=t.projection.transform;if(s&&(i?(i=$l.copyFrom(i),i.prepend(s)):i=s),r&&e.intersects(r,i))this._render(t);else if(this.cullArea)return;for(let n=0,a=this.children.length;n<a;++n){const o=this.children[n],c=o.cullable;o.cullable=c||!this.cullArea,o.render(t),o.cullable=c}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let r=0,i=this.children.length;r<i;++r)this.children[r].render(t)}}renderAdvanced(t){var s,n,a;const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let o=0;o<e.length;o++)e[o].enabled&&this._enabledFilters.push(e[o])}const i=e&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==ce.NONE));if(i&&t.batch.flush(),e&&((n=this._enabledFilters)!=null&&n.length)&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let o=0,c=this.children.length;o<c;++o)this.children[o].render(t)}i&&t.batch.flush(),r&&t.mask.pop(this),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,r=this.removeChildren(0,this.children.length);if(e)for(let i=0;i<r.length;++i)r[i].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};let qe=Cs;qe.defaultSortableChildren=!1;qe.prototype.containerUpdateTransform=qe.prototype.updateTransform;Object.defineProperties(W,{SORTABLE_CHILDREN:{get(){return qe.defaultSortableChildren},set(t){Q("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),qe.defaultSortableChildren=t}}});const Ms=class{constructor(t){this.stage=new qe,t=Object.assign({forceCanvas:!1},t),this.renderer=kl(t),Ms._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=Ms._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let Zs=Ms;Zs._plugins=[];K.handleByList(X.Application,Zs._plugins);class vo{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,i;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:n}=this._resizeTo;r=s,i=n}this.renderer.resize(r,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}vo.extension=X.Application;K.add(vo);const er=new ie,Wl=new Uint16Array([0,1,2,0,2,3]);class xr extends qe{constructor(e){super(),this._anchor=new bt(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ot(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=k.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||z.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=Wl,this.pluginName="batch",this.isSprite=!0,this._roundPixels=W.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Fr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Fr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,i=r.a,s=r.b,n=r.c,a=r.d,o=r.tx,c=r.ty,h=this.vertexData,f=e.trim,l=e.orig,u=this._anchor;let b=0,y=0,w=0,T=0;if(f?(y=f.x-u._x*l.width,b=y+f.width,T=f.y-u._y*l.height,w=T+f.height):(y=-u._x*l.width,b=y+l.width,T=-u._y*l.height,w=T+l.height),h[0]=i*y+n*T+o,h[1]=a*T+s*y+c,h[2]=i*b+n*T+o,h[3]=a*T+s*b+c,h[4]=i*b+n*w+o,h[5]=a*w+s*b+c,h[6]=i*y+n*w+o,h[7]=a*w+s*y+c,this._roundPixels){const S=W.RESOLUTION;for(let p=0;p<h.length;++p)h[p]=Math.round(h[p]*S)/S}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,i=e.orig,s=this._anchor,n=this.transform.worldTransform,a=n.a,o=n.b,c=n.c,h=n.d,f=n.tx,l=n.ty,u=-s._x*i.width,b=u+i.width,y=-s._y*i.height,w=y+i.height;r[0]=a*u+c*y+f,r[1]=h*y+o*u+l,r[2]=a*b+c*y+f,r[3]=h*y+o*b+l,r[4]=a*b+c*w+f,r[5]=h*w+o*b+l,r[6]=a*u+c*w+f,r[7]=h*w+o*u+l}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Rs),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new re),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,er);const r=this._texture.orig.width,i=this._texture.orig.height,s=-r*this.anchor.x;let n=0;return er.x>=s&&er.x<s+r&&(n=-i*this.anchor.y,er.y>=n&&er.y<n+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(e,r){const i=e instanceof z?e:z.from(e,r);return new xr(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=Fr(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=Fr(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||z.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}class Yl{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Ee.system.add(this.tickerUpdate,this,yr.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ee.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const et=new Yl;class Ti{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ti.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ie,this.page=new ie,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class li extends Ti{constructor(){super(...arguments),this.client=new ie,this.movement=new ie,this.offset=new ie,this.global=new ie,this.screen=new ie}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,i){return e.worldTransform.applyInverse(i||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,i,s,n,a,o,c,h,f,l,u,b,y,w){throw new Error("Method not implemented.")}}class Ce extends li{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ht extends li{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Ht.DOM_DELTA_PIXEL=0;Ht.DOM_DELTA_LINE=1;Ht.DOM_DELTA_PAGE=2;const jl=2048,ql=new ie,rs=new ie;class Kl{constructor(e){this.dispatch=new br,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((i,s)=>i.priority-s.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let i=0,s=r.length;i<s;i++)r[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){et.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[s](this.rootTarget,this.rootTarget.eventMode,ql.set(e,r),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(e,r){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(e.currentTarget=i[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(e.currentTarget=i[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(r)?r:[r];for(let n=i.length-1;n>=0;n--)s.forEach(a=>{e.currentTarget=i[n],this.notifyTarget(e,a)})}propagationPath(e){const r=[e];for(let i=0;i<jl&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,i,s,n,a=!1){let o=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(et.pauseUpdate=!1),e.interactiveChildren&&e.children){const f=e.children;for(let l=f.length-1;l>=0;l--){const u=f[l],b=this.hitTestMoveRecursive(u,this._isInteractive(r)?r:u.eventMode,i,s,n,a||n(e,i));if(b){if(b.length>0&&!b[b.length-1].parent)continue;const y=e.isInteractive();(b.length>0||y)&&(y&&this._allInteractiveElements.push(e),b.push(e)),this._hitElements.length===0&&(this._hitElements=b),o=!0}}}const c=this._isInteractive(r),h=e.isInteractive();return h&&h&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:o?this._hitElements:c&&!n(e,i)&&s(e,i)?h?[e]:[]:null}hitTestRecursive(e,r,i,s,n){if(this._interactivePrune(e)||n(e,i))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(et.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let h=c.length-1;h>=0;h--){const f=c[h],l=this.hitTestRecursive(f,this._isInteractive(r)?r:f.eventMode,i,s,n);if(l){if(l.length>0&&!l[l.length-1].parent)continue;const u=e.isInteractive();return(l.length>0||u)&&l.push(e),l}}}const a=this._isInteractive(r),o=e.isInteractive();return a&&s(e,i)?o?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var i;if(e.hitArea&&(e.worldTransform.applyInverse(r,rs),!e.hitArea.contains(rs.x,rs.y)))return!0;if(e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var n,a;r=r??e.type;const i=`on${r}`;(a=(n=e.currentTarget)[i])==null||a.call(n,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof Ce)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const s=r.button===2;this.dispatchEvent(r,s?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var c,h;if(!(e instanceof Ce)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=r.pointerType==="mouse"||r.pointerType==="pen",s=this.trackingData(e.pointerId),n=this.findMountedTarget(s.overTargets);if(((c=s.overTargets)==null?void 0:c.length)>0&&n!==r.target){const f=e.type==="mousemove"?"mouseout":"pointerout",l=this.createPointerEvent(e,f,n);if(this.dispatchEvent(l,"pointerout"),i&&this.dispatchEvent(l,"mouseout"),!r.composedPath().includes(n)){const u=this.createPointerEvent(e,"pointerleave",n);for(u.eventPhase=u.AT_TARGET;u.target&&!r.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),i&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(l)}if(n!==r.target){const f=e.type==="mousemove"?"mouseover":"pointerover",l=this.clonePointerEvent(r,f);this.dispatchEvent(l,"pointerover"),i&&this.dispatchEvent(l,"mouseover");let u=n==null?void 0:n.parent;for(;u&&u!==this.rootTarget.parent&&u!==r.target;)u=u.parent;if(!u||u===this.rootTarget.parent){const y=this.clonePointerEvent(r,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==n&&y.target!==this.rootTarget.parent;)y.currentTarget=y.target,this.notifyTarget(y),i&&this.notifyTarget(y,"mouseenter"),y.target=y.target.parent;this.freeEvent(y)}this.freeEvent(l)}const a=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(r,"pointermove"),o&&a.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),o&&a.push("globaltouchmove")),i&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),o&&a.push("globalmousemove"),this.cursor=(h=r.target)==null?void 0:h.cursor),a.length>0&&this.all(r,a),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var a;if(!(e instanceof Ce)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),i=this.createPointerEvent(e),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(a=i.target)==null?void 0:a.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;r.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(e){if(!(e instanceof Ce)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(r.overTargets),n=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const a=this.createPointerEvent(e,"pointerleave",s);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),i&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;r.overTargets=null,this.freeEvent(n),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Ce)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const o=i.button===2;this.dispatchEvent(i,o?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[e.button]);let a=n;if(n&&!i.composedPath().includes(n)){let o=n;for(;o&&!i.composedPath().includes(o);){if(i.currentTarget=o,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const c=i.button===2;this.notifyTarget(i,c?"rightupoutside":"mouseupoutside")}o=o.parent}delete s.pressTargetsByButton[e.button],a=o}if(a){const o=this.clonePointerEvent(i,"click");o.target=a,o.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:o.target,timeStamp:r});const c=s.clicksByButton[e.button];if(c.target===o.target&&r-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=o.target,c.timeStamp=r,o.detail=c.clickCount,o.pointerType==="mouse"){const h=o.button===2;this.dispatchEvent(o,h?"rightclick":"click")}else o.pointerType==="touch"&&this.dispatchEvent(o,"tap");this.dispatchEvent(o,"pointertap"),this.freeEvent(o)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof Ce)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof Ht)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let i=1;i<e.length&&e[i].parent===r;i++)r=e[i];return r}createPointerEvent(e,r,i){const s=this.allocateEvent(Ce);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof r=="string"&&(s.type=r),s}createWheelEvent(e){const r=this.allocateEvent(Ht);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const i=this.allocateEvent(Ce);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=r??i.type,i}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof Ce&&r instanceof Ce&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof li&&r instanceof li&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const i=e.currentTarget._events[r];if(i&&e.currentTarget.isInteractive())if("fn"in i)i.once&&e.currentTarget.removeListener(r,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let s=0,n=i.length;s<n&&!e.propagationImmediatelyStopped;s++)i[s].once&&e.currentTarget.removeListener(r,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,e)}}const Zl=1,Ql={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Ns=class{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Kl(null),et.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ce(null),this.rootWheelEvent=new Ht(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ns.defaultEventFeatures},{set:(e,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),e[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:r}=this.renderer;this.setTargetElement(e),this.resolution=r,Ns._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let r=0,i=e.length;r<i;r++){const s=e[r],n=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;et.pointerMoved();const e=this.normalizeToPointerData(t);for(let r=0,i=e.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",i=this.normalizeToPointerData(t);for(let s=0,n=i.length;s<n;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);for(let r=0,i=e.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,et.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;et.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;et.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){let i;this.domElement.parentElement?i=this.domElement.getBoundingClientRect():i={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;t.x=(e-i.left)*(this.domElement.width/i.width)*s,t.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,i=t.changedTouches.length;r<i;r++){const s=t.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const r=t;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=Zl),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Ql[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};let gr=Ns;gr.extension={name:"events",type:[X.RendererSystem,X.CanvasRendererSystem]};gr.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};K.add(gr);function aa(t){return t==="dynamic"||t==="static"}const Jl={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??aa(gr.defaultEventMode)},set interactive(t){Q("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??gr.defaultEventMode},set eventMode(t){this._internalInteractive=aa(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof e=="function"?void 0:e;t=i?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,s)},removeEventListener(t,e,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof e=="function"?void 0:e;t=i?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,s)},dispatchEvent(t){if(!(t instanceof Ti))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};st.mixin(Jl);st.prototype.name=null;qe.prototype.getChildByName=function(e,r){for(let i=0,s=this.children.length;i<s;i++)if(this.children[i].name===e)return this.children[i];if(r)for(let i=0,s=this.children.length;i<s;i++){const n=this.children[i];if(!n.getChildByName)continue;const a=n.getChildByName(e,!0);if(a)return a}return null};const Er=(t,e)=>e(t),U=(t,e)=>new ie(t,e);U.from=t=>U(t.x,t.y);U.add=(t,e)=>U.from(Er(t,r=>U(r.x+e.x,r.y+e.y)));U.sub=(t,e)=>U.from(Er(t,r=>U(r.x-e.x,r.y-e.y)));U.mul=(t,e)=>U.from(Er(t,r=>U(r.x*e.x,r.y*e.y)));U.div=(t,e)=>U.from(Er(t,r=>U(r.x/e.x,r.y/e.y)));U.mod=(t,e)=>U.from(Er(t,r=>U(r.x%e.x,r.y%e.y)));const $t=(t,e,r,i)=>new re(t,e,r,i);$t.xy=t=>U(t.x,t.y);$t.wh=t=>U(t.width,t.height);const eu=t=>t.filter((e,r)=>r%2===0).map((e,r)=>U(e,t[r*2+1])),tu=(t,e)=>t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height,ru=(t,e)=>e instanceof ie?U((e.x-t.x)/2,(e.y-t.y)/2):U(e.x+(e.width-t.x)/2,e.y+(e.height-t.y)/2);class iu{constructor(){V(this,"_buttonDict");this._buttonDict=new Map,document.addEventListener("keydown",e=>{const r=e.key;this._buttonDict.has(r)||this._buttonDict.set(r,0)}),document.addEventListener("keyup",e=>{const r=e.key;this._buttonDict.delete(r)})}get buttonDict(){return this._buttonDict}update(){this._buttonDict.forEach((e,r)=>{this._buttonDict.has(r)&&this._buttonDict.set(r,e+1)})}}var _o=(t=>(t[t.A=0]="A",t[t.B=1]="B",t[t.X=2]="X",t[t.Y=3]="Y",t[t.L1=4]="L1",t[t.R1=5]="R1",t[t.L2=6]="L2",t[t.R2=7]="R2",t[t.SELECT=8]="SELECT",t[t.START=9]="START",t[t.L3=10]="L3",t[t.R3=11]="R3",t[t.UP=12]="UP",t[t.DOWN=13]="DOWN",t[t.LEFT=14]="LEFT",t[t.RIGHT=15]="RIGHT",t[t.CENTER=16]="CENTER",t))(_o||{});const su=(t,e,r)=>{const[i,s]=[(e-r+360)%360,(e+r)%360];return i>s&&(t.angle>=i||t.angle<=s)||t.angle>=i&&t.angle<=s?t.velocity:0};class nu{constructor(){V(this,"_buttonDict");V(this,"_stickDict");this._buttonDict=new Map,this._stickDict=new Map,window.addEventListener("gamepadconnected",()=>{})}get buttonDict(){return this._buttonDict}get stickDict(){return this._stickDict}update(){navigator.getGamepads().forEach((e,r)=>{e&&(this._buttonDict.has(r)||this._buttonDict.set(r,new Map),e.buttons.forEach((i,s)=>{const n=this._buttonDict.get(r);if(!n)return;const a=_o[s],o=n.has(a);if(i.pressed&&!o)n.set(a,1);else if(!i.pressed&&o)n.delete(a);else if(i.pressed&&o){const c=n.get(a);if(!c)return;n.set(a,c+1)}}),this._stickDict.set(r,eu(e.axes).map(({x:i,y:s})=>({dx:Math.min(Math.max(i,-1),1),dy:Math.min(Math.max(s,-1),1),angle:(Math.atan2(s,i)*(180/Math.PI)+360)%360,velocity:Math.min(Math.max(Math.sqrt(i*i+s*s),0),1)}))))})}}var Bs=(t=>(t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT",t[t.WHEEL_UP=100]="WHEEL_UP",t[t.WHEEL_DOWN=101]="WHEEL_DOWN",t[t.WHEEL_LEFT=102]="WHEEL_LEFT",t[t.WHEEL_RIGHT=103]="WHEEL_RIGHT",t))(Bs||{});class au{constructor(e,r){V(this,"screenSize");V(this,"wheelDelta");V(this,"prevPosition");V(this,"_buttonDict");V(this,"_position");V(this,"_deltaPosition");this.screenSize=e,this._buttonDict=new Map,this.wheelDelta=U(0,0),this._position=U(0,0),this.prevPosition=U(0,0),this._deltaPosition=U(0,0),document.addEventListener("mousedown",s=>{const n=Bs[s.button];s.button<3&&!this._buttonDict.has(n)&&this._buttonDict.set(n,0)}),document.addEventListener("mouseup",s=>{const n=Bs[s.button];this._buttonDict.delete(n)}),document.addEventListener("contextmenu",s=>s.preventDefault()),document.addEventListener("wheel",({deltaX:s,deltaY:n})=>{this.wheelDelta.x=s,this.wheelDelta.y=n,n<0&&!this._buttonDict.has("WHEEL_UP")&&this._buttonDict.set("WHEEL_UP",0),n>0&&!this._buttonDict.has("WHEEL_DOWN")&&this._buttonDict.set("WHEEL_DOWN",0),s<0&&!this._buttonDict.has("WHEEL_LEFT")&&this._buttonDict.set("WHEEL_LEFT",0),s>0&&!this._buttonDict.has("WHEEL_RIGHT")&&this._buttonDict.set("WHEEL_RIGHT",0)});const i=new xr(z.WHITE);i.name="MouseManager: touchScreen",i.width=this.screenSize.x,i.height=this.screenSize.y,i.alpha=0,i.eventMode="static",i.on("pointermove",s=>{this.prevPosition.set(this._position.x,this._position.y),this._position.set(s.global.x,s.global.y),this._deltaPosition.set(this._position.x-this.prevPosition.x,this._position.y-this.prevPosition.y)}),r.addChild(i)}get buttonDict(){return this._buttonDict}get deltaPosition(){return this._deltaPosition}get position(){return this._position}update(){this._buttonDict.forEach((e,r)=>{this._buttonDict.has(r)&&this._buttonDict.set(r,e+1);const i=5;((this._buttonDict.get("WHEEL_UP")??0)>=i||(this._buttonDict.get("WHEEL_DOWN")??0)>=i||(this._buttonDict.get("WHEEL_LEFT")??0)>=i||(this._buttonDict.get("WHEEL_RIGHT")??0)>=i)&&(this._buttonDict.delete("WHEEL_UP"),this._buttonDict.delete("WHEEL_DOWN"),this._buttonDict.delete("WHEEL_LEFT"),this._buttonDict.delete("WHEEL_RIGHT"),this.wheelDelta.set(0,0)),this._deltaPosition.set(this._position.x-this.prevPosition.x,this._position.y-this.prevPosition.y)})}}class ou{constructor(e,r){V(this,"keyboardDevice");V(this,"gamepadDevice");V(this,"mouseDevice");this.keyboardDevice=new iu,this.gamepadDevice=new nu,this.mouseDevice=new au(e,r)}_update(){this.keyboardDevice.update(),this.gamepadDevice.update(),this.mouseDevice.update()}isKeyTriggered(e){return(this.keyboardDevice.buttonDict.get(e)??NaN)===1}isKeyPressed(e,r=1){return(this.keyboardDevice.buttonDict.get(e)??NaN)>r}isKeyReleased(e){return!this.keyboardDevice.buttonDict.has(e)}isPadTriggered(e,r){const i=this.gamepadDevice.buttonDict.get(e);return((i==null?void 0:i.get(r))??NaN)===1}isPadPressed(e,r,i=1){const s=this.gamepadDevice.buttonDict.get(e);return((s==null?void 0:s.get(r))??NaN)>i}isPadReleased(e,r){const i=this.gamepadDevice.buttonDict.get(e);return!(i!=null&&i.has(r))}isMouseTriggered(e){return(this.mouseDevice.buttonDict.get(e)??NaN)===1}isMousePressed(e,r=1){return(this.mouseDevice.buttonDict.get(e)??NaN)>r}isMouseReleased(e){return!this.mouseDevice.buttonDict.has(e)}getPadStick(e,r,i=.2){var o;const s=(o=this.gamepadDevice.stickDict.get(e))==null?void 0:o[r];if(!s)return U(0,0);const{dx:n,dy:a}=s;return U(n>=i||n<=i?n:0,a>=i||a<=i?a:0)}getPadStickAngle(e,r,i,s=45,n=.2){var c;const a=(c=this.gamepadDevice.stickDict.get(e))==null?void 0:c[r];if(!a)return 0;const o=su(a,i,s);return o>=n?o:0}getPadStickRight(e,r,i=45,s=.2){return this.getPadStickAngle(e,r,45*0,i,s)}getPadStickDown(e,r,i=45,s=.2){return this.getPadStickAngle(e,r,45*2,i,s)}getPadStickLeft(e,r,i=45,s=.2){return this.getPadStickAngle(e,r,45*4,i,s)}getPadStickUp(e,r,i=45,s=.2){return this.getPadStickAngle(e,r,45*6,i,s)}getMousePosition(){return this.mouseDevice.position}getMouseMoveDelta(e=.2,r=1/0){const{x:i,y:s}=this.mouseDevice.deltaPosition;return U(i>=e?Math.min(r,i):i<=-e?Math.max(-r,i):0,s>=e?Math.min(r,s):s<=-e?Math.max(-r,s):0)}getAxis(e,{padPlayer:r=0,padStick:i=0,padRange:s=45,threshold:n=.2}={}){const a=U(0,0);switch(e){case"WASD":{this.isKeyPressed("w")&&(a.y=-1),this.isKeyPressed("a")&&(a.x=-1),this.isKeyPressed("s")&&(a.y=1),this.isKeyPressed("d")&&(a.x=1);break}case"ARROW":{this.isKeyPressed("ArrowLeft")&&(a.x=-1),this.isKeyPressed("ArrowRight")&&(a.x=1),this.isKeyPressed("ArrowUp")&&(a.y=-1),this.isKeyPressed("ArrowDown")&&(a.y=1);break}case"NUM":{this.isKeyPressed("2")&&(a.y=1),this.isKeyPressed("4")&&(a.x=-1),this.isKeyPressed("6")&&(a.x=1),this.isKeyPressed("8")&&(a.y=-1);break}case"HJKL":{this.isKeyPressed("h")&&(a.x=-1),this.isKeyPressed("j")&&(a.y=1),this.isKeyPressed("k")&&(a.y=-1),this.isKeyPressed("l")&&(a.x=1);break}case"IJKL":{this.isKeyPressed("i")&&(a.y=-1),this.isKeyPressed("j")&&(a.x=-1),this.isKeyPressed("k")&&(a.y=1),this.isKeyPressed("l")&&(a.x=1);break}case"4PAD":{this.isPadPressed(r,"LEFT")&&(a.x=-1),this.isPadPressed(r,"RIGHT")&&(a.x=1),this.isPadPressed(r,"UP")&&(a.y=-1),this.isPadPressed(r,"DOWN")&&(a.y=1);break}case"4STICK":{const[o,c,h,f]=[this.getPadStickRight(r,i,s,n),this.getPadStickLeft(r,i,s,n),this.getPadStickUp(r,i,s,n),this.getPadStickDown(r,i,s,n)];c&&(a.x=-c),o&&(a.x=o),h&&(a.y=-h),f&&(a.y=f);break}case"STICK":{const o=this.getPadStick(r,i,n);a.x=o.x,a.y=o.y;break}case"WHEEL":{this.isMousePressed("WHEEL_LEFT")&&(a.x=-1),this.isMousePressed("WHEEL_RIGHT")&&(a.x=1),this.isMousePressed("WHEEL_UP")&&(a.y=-1),this.isMousePressed("WHEEL_DOWN")&&(a.y=1);break}}return a}}class cu extends Zs{constructor(){super({width:128,height:96}),globalThis.__PIXI_APP__=this,this.stage.name="GameManager: stage",Z.defaultOptions.scaleMode=ve.NEAREST,document.body.appendChild(this.view)}}var gt={},Se={},xo={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(Be,function(){function r(p,d,x,E,_){(function I(A,v,g,m,P){for(;m>g;){if(m-g>600){var R=m-g+1,M=v-g+1,B=Math.log(R),C=.5*Math.exp(2*B/3),G=.5*Math.sqrt(B*C*(R-C)/R)*(M-R/2<0?-1:1),$=Math.max(g,Math.floor(v-M*C/R+G)),J=Math.min(m,Math.floor(v+(R-M)*C/R+G));I(A,v,$,J,P)}var N=A[v],D=g,L=m;for(i(A,g,v),P(A[m],N)>0&&i(A,g,m);D<L;){for(i(A,D,L),D++,L--;P(A[D],N)<0;)D++;for(;P(A[L],N)>0;)L--}P(A[g],N)===0?i(A,g,L):i(A,++L,m),L<=v&&(g=L+1),v<=L&&(m=L-1)}})(p,d,x||0,E||p.length-1,_||s)}function i(p,d,x){var E=p[d];p[d]=p[x],p[x]=E}function s(p,d){return p<d?-1:p>d?1:0}var n=function(p){p===void 0&&(p=9),this._maxEntries=Math.max(4,p),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(p,d,x){if(!x)return d.indexOf(p);for(var E=0;E<d.length;E++)if(x(p,d[E]))return E;return-1}function o(p,d){c(p,0,p.children.length,d,p)}function c(p,d,x,E,_){_||(_=T(null)),_.minX=1/0,_.minY=1/0,_.maxX=-1/0,_.maxY=-1/0;for(var I=d;I<x;I++){var A=p.children[I];h(_,p.leaf?E(A):A)}return _}function h(p,d){return p.minX=Math.min(p.minX,d.minX),p.minY=Math.min(p.minY,d.minY),p.maxX=Math.max(p.maxX,d.maxX),p.maxY=Math.max(p.maxY,d.maxY),p}function f(p,d){return p.minX-d.minX}function l(p,d){return p.minY-d.minY}function u(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function b(p){return p.maxX-p.minX+(p.maxY-p.minY)}function y(p,d){return p.minX<=d.minX&&p.minY<=d.minY&&d.maxX<=p.maxX&&d.maxY<=p.maxY}function w(p,d){return d.minX<=p.maxX&&d.minY<=p.maxY&&d.maxX>=p.minX&&d.maxY>=p.minY}function T(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(p,d,x,E,_){for(var I=[d,x];I.length;)if(!((x=I.pop())-(d=I.pop())<=E)){var A=d+Math.ceil((x-d)/E/2)*E;r(p,A,d,x,_),I.push(d,A,A,x)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(p){var d=this.data,x=[];if(!w(p,d))return x;for(var E=this.toBBox,_=[];d;){for(var I=0;I<d.children.length;I++){var A=d.children[I],v=d.leaf?E(A):A;w(p,v)&&(d.leaf?x.push(A):y(p,v)?this._all(A,x):_.push(A))}d=_.pop()}return x},n.prototype.collides=function(p){var d=this.data;if(!w(p,d))return!1;for(var x=[];d;){for(var E=0;E<d.children.length;E++){var _=d.children[E],I=d.leaf?this.toBBox(_):_;if(w(p,I)){if(d.leaf||y(p,I))return!0;x.push(_)}}d=x.pop()}return!1},n.prototype.load=function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var d=0;d<p.length;d++)this.insert(p[d]);return this}var x=this._build(p.slice(),0,p.length-1,0);if(this.data.children.length)if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<x.height){var E=this.data;this.data=x,x=E}this._insert(x,this.data.height-x.height-1,!0)}else this.data=x;return this},n.prototype.insert=function(p){return p&&this._insert(p,this.data.height-1),this},n.prototype.clear=function(){return this.data=T([]),this},n.prototype.remove=function(p,d){if(!p)return this;for(var x,E,_,I=this.data,A=this.toBBox(p),v=[],g=[];I||v.length;){if(I||(I=v.pop(),E=v[v.length-1],x=g.pop(),_=!0),I.leaf){var m=a(p,I.children,d);if(m!==-1)return I.children.splice(m,1),v.push(I),this._condense(v),this}_||I.leaf||!y(I,A)?E?(x++,I=E.children[x],_=!1):I=null:(v.push(I),g.push(x),x=0,E=I,I=I.children[0])}return this},n.prototype.toBBox=function(p){return p},n.prototype.compareMinX=function(p,d){return p.minX-d.minX},n.prototype.compareMinY=function(p,d){return p.minY-d.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(p){return this.data=p,this},n.prototype._all=function(p,d){for(var x=[];p;)p.leaf?d.push.apply(d,p.children):x.push.apply(x,p.children),p=x.pop();return d},n.prototype._build=function(p,d,x,E){var _,I=x-d+1,A=this._maxEntries;if(I<=A)return o(_=T(p.slice(d,x+1)),this.toBBox),_;E||(E=Math.ceil(Math.log(I)/Math.log(A)),A=Math.ceil(I/Math.pow(A,E-1))),(_=T([])).leaf=!1,_.height=E;var v=Math.ceil(I/A),g=v*Math.ceil(Math.sqrt(A));S(p,d,x,g,this.compareMinX);for(var m=d;m<=x;m+=g){var P=Math.min(m+g-1,x);S(p,m,P,v,this.compareMinY);for(var R=m;R<=P;R+=v){var M=Math.min(R+v-1,P);_.children.push(this._build(p,R,M,E-1))}}return o(_,this.toBBox),_},n.prototype._chooseSubtree=function(p,d,x,E){for(;E.push(d),!d.leaf&&E.length-1!==x;){for(var _=1/0,I=1/0,A=void 0,v=0;v<d.children.length;v++){var g=d.children[v],m=u(g),P=(R=p,M=g,(Math.max(M.maxX,R.maxX)-Math.min(M.minX,R.minX))*(Math.max(M.maxY,R.maxY)-Math.min(M.minY,R.minY))-m);P<I?(I=P,_=m<_?m:_,A=g):P===I&&m<_&&(_=m,A=g)}d=A||d.children[0]}var R,M;return d},n.prototype._insert=function(p,d,x){var E=x?p:this.toBBox(p),_=[],I=this._chooseSubtree(E,this.data,d,_);for(I.children.push(p),h(I,E);d>=0&&_[d].children.length>this._maxEntries;)this._split(_,d),d--;this._adjustParentBBoxes(E,_,d)},n.prototype._split=function(p,d){var x=p[d],E=x.children.length,_=this._minEntries;this._chooseSplitAxis(x,_,E);var I=this._chooseSplitIndex(x,_,E),A=T(x.children.splice(I,x.children.length-I));A.height=x.height,A.leaf=x.leaf,o(x,this.toBBox),o(A,this.toBBox),d?p[d-1].children.push(A):this._splitRoot(x,A)},n.prototype._splitRoot=function(p,d){this.data=T([p,d]),this.data.height=p.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(p,d,x){for(var E,_,I,A,v,g,m,P=1/0,R=1/0,M=d;M<=x-d;M++){var B=c(p,0,M,this.toBBox),C=c(p,M,x,this.toBBox),G=(_=B,I=C,A=void 0,v=void 0,g=void 0,m=void 0,A=Math.max(_.minX,I.minX),v=Math.max(_.minY,I.minY),g=Math.min(_.maxX,I.maxX),m=Math.min(_.maxY,I.maxY),Math.max(0,g-A)*Math.max(0,m-v)),$=u(B)+u(C);G<P?(P=G,E=M,R=$<R?$:R):G===P&&$<R&&(R=$,E=M)}return E||x-d},n.prototype._chooseSplitAxis=function(p,d,x){var E=p.leaf?this.compareMinX:f,_=p.leaf?this.compareMinY:l;this._allDistMargin(p,d,x,E)<this._allDistMargin(p,d,x,_)&&p.children.sort(E)},n.prototype._allDistMargin=function(p,d,x,E){p.children.sort(E);for(var _=this.toBBox,I=c(p,0,d,_),A=c(p,x-d,x,_),v=b(I)+b(A),g=d;g<x-d;g++){var m=p.children[g];h(I,p.leaf?_(m):m),v+=b(I)}for(var P=x-d-1;P>=d;P--){var R=p.children[P];h(A,p.leaf?_(R):R),v+=b(A)}return v},n.prototype._adjustParentBBoxes=function(p,d,x){for(var E=x;E>=0;E--)h(d[E],p)},n.prototype._condense=function(p){for(var d=p.length-1,x=void 0;d>=0;d--)p[d].children.length===0?d>0?(x=p[d-1].children).splice(x.indexOf(p[d]),1):this.clear():o(p[d],this.toBBox)},n})})(xo);var hu=xo.exports,Eo={exports:{}};(function(t,e){/** @preserve SAT.js - Version 0.9.0 - Copyright 2012 - 2021 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */(function(r,i){t.exports=i()})(Be,function(){var r={};function i(v,g){this.x=v||0,this.y=g||0}r.Vector=i,r.V=i,i.prototype.copy=i.prototype.copy=function(v){return this.x=v.x,this.y=v.y,this},i.prototype.clone=i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.perp=i.prototype.perp=function(){var v=this.x;return this.x=this.y,this.y=-v,this},i.prototype.rotate=i.prototype.rotate=function(v){var g=this.x,m=this.y;return this.x=g*Math.cos(v)-m*Math.sin(v),this.y=g*Math.sin(v)+m*Math.cos(v),this},i.prototype.reverse=i.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},i.prototype.normalize=i.prototype.normalize=function(){var v=this.len();return v>0&&(this.x=this.x/v,this.y=this.y/v),this},i.prototype.add=i.prototype.add=function(v){return this.x+=v.x,this.y+=v.y,this},i.prototype.sub=i.prototype.sub=function(v){return this.x-=v.x,this.y-=v.y,this},i.prototype.scale=i.prototype.scale=function(v,g){return this.x*=v,this.y*=typeof g<"u"?g:v,this},i.prototype.project=i.prototype.project=function(v){var g=this.dot(v)/v.len2();return this.x=g*v.x,this.y=g*v.y,this},i.prototype.projectN=i.prototype.projectN=function(v){var g=this.dot(v);return this.x=g*v.x,this.y=g*v.y,this},i.prototype.reflect=i.prototype.reflect=function(v){var g=this.x,m=this.y;return this.project(v).scale(2),this.x-=g,this.y-=m,this},i.prototype.reflectN=i.prototype.reflectN=function(v){var g=this.x,m=this.y;return this.projectN(v).scale(2),this.x-=g,this.y-=m,this},i.prototype.dot=i.prototype.dot=function(v){return this.x*v.x+this.y*v.y},i.prototype.len2=i.prototype.len2=function(){return this.dot(this)},i.prototype.len=i.prototype.len=function(){return Math.sqrt(this.len2())};function s(v,g){this.pos=v||new i,this.r=g||0,this.offset=new i}r.Circle=s,s.prototype.getAABBAsBox=s.prototype.getAABBAsBox=function(){var v=this.r,g=this.pos.clone().add(this.offset).sub(new i(v,v));return new a(g,v*2,v*2)},s.prototype.getAABB=s.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},s.prototype.setOffset=s.prototype.setOffset=function(v){return this.offset=v,this};function n(v,g){this.pos=v||new i,this.angle=0,this.offset=new i,this.setPoints(g||[])}r.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(v){var g=!this.points||this.points.length!==v.length;if(g){var m,P=this.calcPoints=[],R=this.edges=[],M=this.normals=[];for(m=0;m<v.length;m++){var B=v[m],C=m<v.length-1?v[m+1]:v[0];if(B!==C&&B.x===C.x&&B.y===C.y){v.splice(m,1),m-=1;continue}P.push(new i),R.push(new i),M.push(new i)}}return this.points=v,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(v){return this.angle=v,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(v){return this.offset=v,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(v){for(var g=this.points,m=g.length,P=0;P<m;P++)g[P].rotate(v);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(v,g){for(var m=this.points,P=m.length,R=0;R<P;R++)m[R].x+=v,m[R].y+=g;return this._recalc(),this},n.prototype._recalc=function(){var v=this.calcPoints,g=this.edges,m=this.normals,P=this.points,R=this.offset,M=this.angle,B=P.length,C;for(C=0;C<B;C++){var G=v[C].copy(P[C]);G.x+=R.x,G.y+=R.y,M!==0&&G.rotate(M)}for(C=0;C<B;C++){var $=v[C],J=C<B-1?v[C+1]:v[0],N=g[C].copy(J).sub($);m[C].copy(N).perp().normalize()}return this},n.prototype.getAABBAsBox=n.prototype.getAABBAsBox=function(){for(var v=this.calcPoints,g=v.length,m=v[0].x,P=v[0].y,R=v[0].x,M=v[0].y,B=1;B<g;B++){var C=v[B];C.x<m?m=C.x:C.x>R&&(R=C.x),C.y<P?P=C.y:C.y>M&&(M=C.y)}return new a(this.pos.clone().add(new i(m,P)),R-m,M-P)},n.prototype.getAABB=n.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},n.prototype.getCentroid=n.prototype.getCentroid=function(){for(var v=this.calcPoints,g=v.length,m=0,P=0,R=0,M=0;M<g;M++){var B=v[M],C=M===g-1?v[0]:v[M+1],G=B.x*C.y-C.x*B.y;m+=(B.x+C.x)*G,P+=(B.y+C.y)*G,R+=G}return R=R*3,m=m/R,P=P/R,new i(m,P)};function a(v,g,m){this.pos=v||new i,this.w=g||0,this.h=m||0}r.Box=a,a.prototype.toPolygon=a.prototype.toPolygon=function(){var v=this.pos,g=this.w,m=this.h;return new n(new i(v.x,v.y),[new i,new i(g,0),new i(g,m),new i(0,m)])};function o(){this.a=null,this.b=null,this.overlapN=new i,this.overlapV=new i,this.clear()}r.Response=o,o.prototype.clear=o.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var c=[],h=0;h<10;h++)c.push(new i);for(var f=[],h=0;h<5;h++)f.push([]);var l=new o,u=new a(new i,1e-6,1e-6).toPolygon();function b(v,g,m){for(var P=Number.MAX_VALUE,R=-Number.MAX_VALUE,M=v.length,B=0;B<M;B++){var C=v[B].dot(g);C<P&&(P=C),C>R&&(R=C)}m[0]=P,m[1]=R}function y(v,g,m,P,R,M){var B=f.pop(),C=f.pop(),G=c.pop().copy(g).sub(v),$=G.dot(R);if(b(m,R,B),b(P,R,C),C[0]+=$,C[1]+=$,B[0]>C[1]||C[0]>B[1])return c.push(G),f.push(B),f.push(C),!0;if(M){var J=0;if(B[0]<C[0])if(M.aInB=!1,B[1]<C[1])J=B[1]-C[0],M.bInA=!1;else{var N=B[1]-C[0],D=C[1]-B[0];J=N<D?N:-D}else if(M.bInA=!1,B[1]>C[1])J=B[0]-C[1],M.aInB=!1;else{var N=B[1]-C[0],D=C[1]-B[0];J=N<D?N:-D}var L=Math.abs(J);L<M.overlap&&(M.overlap=L,M.overlapN.copy(R),J<0&&M.overlapN.reverse())}return c.push(G),f.push(B),f.push(C),!1}r.isSeparatingAxis=y;function w(v,g){var m=v.len2(),P=g.dot(v);return P<0?T:P>m?p:S}var T=-1,S=0,p=1;function d(v,g){var m=c.pop().copy(v).sub(g.pos).sub(g.offset),P=g.r*g.r,R=m.len2();return c.push(m),R<=P}r.pointInCircle=d;function x(v,g){u.pos.copy(v),l.clear();var m=A(u,g,l);return m&&(m=l.aInB),m}r.pointInPolygon=x;function E(v,g,m){var P=c.pop().copy(g.pos).add(g.offset).sub(v.pos).sub(v.offset),R=v.r+g.r,M=R*R,B=P.len2();if(B>M)return c.push(P),!1;if(m){var C=Math.sqrt(B);m.a=v,m.b=g,m.overlap=R-C,m.overlapN.copy(P.normalize()),m.overlapV.copy(P).scale(m.overlap),m.aInB=v.r<=g.r&&C<=g.r-v.r,m.bInA=g.r<=v.r&&C<=v.r-g.r}return c.push(P),!0}r.testCircleCircle=E;function _(v,g,m){for(var P=c.pop().copy(g.pos).add(g.offset).sub(v.pos),R=g.r,M=R*R,B=v.calcPoints,C=B.length,G=c.pop(),$=c.pop(),J=0;J<C;J++){var N=J===C-1?0:J+1,D=J===0?C-1:J-1,L=0,Y=null;G.copy(v.edges[J]),$.copy(P).sub(B[J]),m&&$.len2()>M&&(m.aInB=!1);var j=w(G,$);if(j===T){G.copy(v.edges[D]);var ae=c.pop().copy(P).sub(B[D]);if(j=w(G,ae),j===p){var ee=$.len();if(ee>R)return c.push(P),c.push(G),c.push($),c.push(ae),!1;m&&(m.bInA=!1,Y=$.normalize(),L=R-ee)}c.push(ae)}else if(j===p){if(G.copy(v.edges[N]),$.copy(P).sub(B[N]),j=w(G,$),j===T){var ee=$.len();if(ee>R)return c.push(P),c.push(G),c.push($),!1;m&&(m.bInA=!1,Y=$.normalize(),L=R-ee)}}else{var de=G.perp().normalize(),ee=$.dot(de),_e=Math.abs(ee);if(ee>0&&_e>R)return c.push(P),c.push(de),c.push($),!1;m&&(Y=de,L=R-ee,(ee>=0||L<2*R)&&(m.bInA=!1))}Y&&m&&Math.abs(L)<Math.abs(m.overlap)&&(m.overlap=L,m.overlapN.copy(Y))}return m&&(m.a=v,m.b=g,m.overlapV.copy(m.overlapN).scale(m.overlap)),c.push(P),c.push(G),c.push($),!0}r.testPolygonCircle=_;function I(v,g,m){var P=_(g,v,m);if(P&&m){var R=m.a,M=m.aInB;m.overlapN.reverse(),m.overlapV.reverse(),m.a=m.b,m.b=R,m.aInB=m.bInA,m.bInA=M}return P}r.testCirclePolygon=I;function A(v,g,m){for(var P=v.calcPoints,R=P.length,M=g.calcPoints,B=M.length,C=0;C<R;C++)if(y(v.pos,g.pos,P,M,v.normals[C],m))return!1;for(var C=0;C<B;C++)if(y(v.pos,g.pos,P,M,g.normals[C],m))return!1;return m&&(m.a=v,m.b=g,m.overlapV.copy(m.overlapN).scale(m.overlap)),!0}return r.testPolygonPolygon=A,r})})(Eo);var Yt=Eo.exports;(function(t){var e=Be&&Be.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(t,"__esModule",{value:!0}),t.BodyType=t.SATCircle=t.SATPolygon=t.SATVector=t.Response=t.RBush=void 0;const r=e(hu);Object.defineProperty(t,"RBush",{enumerable:!0,get:function(){return r.default}});const i=Yt;Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return i.Response}}),Object.defineProperty(t,"SATVector",{enumerable:!0,get:function(){return i.Vector}}),Object.defineProperty(t,"SATPolygon",{enumerable:!0,get:function(){return i.Polygon}}),Object.defineProperty(t,"SATCircle",{enumerable:!0,get:function(){return i.Circle}});var s;(function(n){n.Ellipse="Ellipse",n.Line="Line",n.Circle="Circle",n.Box="Box",n.Point="Point",n.Polygon="Polygon"})(s||(t.BodyType=s={}))})(Se);var Tr={},Ke={},te={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.map=ye.filter=ye.every=ye.some=ye.forEach=void 0;const fu=(t,e)=>{for(let r=0,i=t.length;r<i;r++)e(t[r],r)};ye.forEach=fu;const lu=(t,e)=>{for(let r=0,i=t.length;r<i;r++)if(e(t[r],r))return!0;return!1};ye.some=lu;const uu=(t,e)=>{for(let r=0,i=t.length;r<i;r++)if(!e(t[r],r))return!1;return!0};ye.every=uu;const du=(t,e)=>{const r=[];for(let i=0,s=t.length;i<s;i++){const n=t[i];e(n,i)&&r.push(n)}return r};ye.filter=du;const pu=(t,e)=>{const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++)r[i]=e(t[i],i);return r};ye.map=pu;Object.defineProperty(te,"__esModule",{value:!0});te.intersectLinePolygon=te.intersectLineLine=te.intersectLineLineFast=te.intersectLineCircle=te.circleOutsidePolygon=te.circleInPolygon=te.circleInCircle=te.pointOnCircle=te.polygonInPolygon=te.pointInPolygon=te.polygonInCircle=te.ensureConvex=void 0;const wi=Yt,mu=Se,He=ye;function To(t){return t.isConvex||t.type!==mu.BodyType.Polygon?[t]:t.convexPolygons}te.ensureConvex=To;function yu(t,e){return(0,He.every)(t.calcPoints,r=>(0,wi.pointInCircle)({x:r.x+t.pos.x,y:r.y+t.pos.y},e))}te.polygonInCircle=yu;function Ai(t,e){return(0,He.some)(To(e),r=>(0,wi.pointInPolygon)(t,r))}te.pointInPolygon=Ai;function gu(t,e){return(0,He.every)(t.calcPoints,r=>Ai({x:r.x+t.pos.x,y:r.y+t.pos.y},e))}te.polygonInPolygon=gu;function wo(t,e){return(t.x-e.pos.x)*(t.x-e.pos.x)+(t.y-e.pos.y)*(t.y-e.pos.y)===e.r*e.r}te.pointOnCircle=wo;function bu(t,e){const r=t.pos.x,i=t.pos.y,s=e.pos.x,n=e.pos.y,a=t.r,o=e.r,c=Math.sqrt((r-s)*(r-s)+(i-n)*(i-n));return c+o===a||c+o<a}te.circleInCircle=bu;function vu(t,e){if(t.r===0||!Ai(t.pos,e))return!1;const r=(0,He.map)(e.calcPoints,({x:i,y:s})=>({x:i+e.pos.x,y:s+e.pos.y}));return!((0,He.some)(r,i=>(0,wi.pointInCircle)(i,t))||(0,He.some)(r,(i,s)=>{const n=s?r[s-1]:r[r.length-1];return Qs({start:n,end:i},t).length>0}))}te.circleInPolygon=vu;function _u(t,e){if(t.r===0||Ai(t.pos,e))return!1;const r=(0,He.map)(e.calcPoints,({x:i,y:s})=>({x:i+e.pos.x,y:s+e.pos.y}));return!((0,He.some)(r,i=>(0,wi.pointInCircle)(i,t)||wo(i,t))||(0,He.some)(r,(i,s)=>{const n=s?r[s-1]:r[r.length-1];return Qs({start:n,end:i},t).length>0}))}te.circleOutsidePolygon=_u;function Qs(t,{pos:e,r}){const i={x:t.end.x-t.start.x,y:t.end.y-t.start.y},s={x:t.start.x-e.x,y:t.start.y-e.y},n=(i.x*s.x+i.y*s.y)*-2,a=(i.x*i.x+i.y*i.y)*2,o=Math.sqrt(n*n-(s.x*s.x+s.y*s.y-r*r)*a*2);if(isNaN(o))return[];const c=(n-o)/a,h=(n+o)/a,f=[];return c<=1&&c>=0&&f.push({x:t.start.x+i.x*c,y:t.start.y+i.y*c}),h<=1&&h>=0&&f.push({x:t.start.x+i.x*h,y:t.start.y+i.y*h}),f}te.intersectLineCircle=Qs;function zr(t,e,r){const i=(r.x-t.x)*(e.y-t.y),s=(e.x-t.x)*(r.y-t.y);return i>s+Number.EPSILON?1:i+Number.EPSILON<s?-1:0}function xu(t,e){return zr(t.start,e.start,e.end)!==zr(t.end,e.start,e.end)&&zr(t.start,t.end,e.start)!==zr(t.start,t.end,e.end)}te.intersectLineLineFast=xu;function Ao(t,e){const r=t.end.x-t.start.x,i=t.end.y-t.start.y,s=r*(e.end.y-e.start.y)-(e.end.x-e.start.x)*i;if(s===0)return null;const n=((e.end.y-e.start.y)*(e.end.x-t.start.x)+(e.start.x-e.end.x)*(e.end.y-t.start.y))/s,a=((t.start.y-t.end.y)*(e.end.x-t.start.x)+r*(e.end.y-t.start.y))/s;return!(n>=0&&n<=1)||!(a>=0&&a<=1)?null:{x:t.start.x+n*r,y:t.start.y+n*i}}te.intersectLineLine=Ao;function Eu(t,e){const r=[];return(0,He.forEach)(e.calcPoints,(i,s)=>{const n=s?e.calcPoints[s-1]:e.calcPoints[e.calcPoints.length-1],a={start:{x:n.x+e.pos.x,y:n.y+e.pos.y},end:{x:i.x+e.pos.x,y:i.y+e.pos.y}},o=Ao(t,a);o&&r.push(o)}),r}te.intersectLinePolygon=Eu;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.drawBVH=t.drawPolygon=t.getSATTest=t.getBounceDirection=t.mapArrayToVector=t.mapVectorToArray=t.dashLineTo=t.clonePointsArray=t.checkAInB=t.intersectAABB=t.notIntersectAABB=t.bodyMoved=t.extendBody=t.clockwise=t.distance=t.ensurePolygonPoints=t.ensureVectorPoint=t.createBox=t.createEllipse=t.rad2deg=t.deg2rad=t.RAD2DEG=t.DEG2RAD=void 0;const e=Yt,r=te,i=Se,s=ye;t.DEG2RAD=Math.PI/180,t.RAD2DEG=180/Math.PI;function n(g){return g*t.DEG2RAD}t.deg2rad=n;function a(g){return g*t.RAD2DEG}t.rad2deg=a;function o(g,m=g,P=1){const R=Math.PI*Math.hypot(g,m)*2,M=Math.max(8,Math.ceil(R/Math.max(1,P)));return Array.from({length:M},(B,C)=>{const G=C/M*2*Math.PI,$=Math.cos(G)*g,J=Math.sin(G)*m;return new e.Vector($,J)})}t.createEllipse=o;function c(g,m){return[new e.Vector(0,0),new e.Vector(g,0),new e.Vector(g,m),new e.Vector(0,m)]}t.createBox=c;function h(g={}){return g instanceof e.Vector?g:new e.Vector(g.x||0,g.y||0)}t.ensureVectorPoint=h;function f(g){if(!g)throw new Error("No points array provided");const m=(0,s.map)(g,h);return u(m)?m.reverse():m}t.ensurePolygonPoints=f;function l(g,m){return Math.hypot(g.x-m.x,g.y-m.y)}t.distance=l;function u(g){let m=0;for(let P=0;P<g.length;P++){const R=g[P],M=g[(P+1)%g.length];m+=(M.x-R.x)*(M.y+R.y)}return m>0}t.clockwise=u;function b(g,m){g.isStatic=!!(m!=null&&m.isStatic),g.isTrigger=!!(m!=null&&m.isTrigger),g.padding=(m==null?void 0:m.padding)||0,g.type!==i.BodyType.Circle&&(g.isCentered=(m==null?void 0:m.isCentered)||!1),g.setAngle((m==null?void 0:m.angle)||0)}t.extendBody=b;function y(g){return g.bbox.minX<g.minX||g.bbox.minY<g.minY||g.bbox.maxX>g.maxX||g.bbox.maxY>g.maxY}t.bodyMoved=y;function w(g,m){return m.minX>g.maxX||m.minY>g.maxY||m.maxX<g.minX||m.maxY<g.minY}t.notIntersectAABB=w;function T(g,m){return!w(g,m)}t.intersectAABB=T;function S(g,m){return g.type===i.BodyType.Circle?m.type!==i.BodyType.Circle?(0,r.circleInPolygon)(g,m):(0,r.circleInCircle)(g,m):m.type===i.BodyType.Circle?(0,r.polygonInCircle)(g,m):(0,r.polygonInPolygon)(g,m)}t.checkAInB=S;function p(g){return(0,s.map)(g,({x:m,y:P})=>({x:m,y:P}))}t.clonePointsArray=p;function d(g,m,P,R,M,B=2,C=4){const G=R-m,$=M-P,J=Math.atan2($,G),N=Math.cos(J),D=Math.sin(J);let L=m,Y=P,j=Math.hypot(G,$);for(;j>0;){const ae=Math.min(j,B);g.moveTo(L,Y),g.lineTo(L+N*ae,Y+D*ae),L+=N*(B+C),Y+=D*(B+C),j-=B+C}}t.dashLineTo=d;function x({x:g,y:m}={x:0,y:0}){return[g,m]}t.mapVectorToArray=x;function E([g,m]=[0,0]){return{x:g,y:m}}t.mapArrayToVector=E;function _(g,m){const P=new e.Vector(m.x-g.x,m.y-g.y),R=new e.Vector(g.x-m.x,g.y-m.y),M=R.dot(P.normalize())*2;return new e.Vector(P.x*M-R.x,P.y*M-R.y).normalize()}t.getBounceDirection=_;function I(g,m){return g.type===i.BodyType.Circle?m.type===i.BodyType.Circle?e.testCircleCircle:e.testCirclePolygon:m.type===i.BodyType.Circle?e.testPolygonCircle:e.testPolygonPolygon}t.getSATTest=I;function A(g,{pos:m,calcPoints:P},R=!1){const M=P[P.length-1],B=m.x+M.x,C=m.y+M.y;P.length===1?g.arc(B,C,1,0,Math.PI*2):g.moveTo(B,C),(0,s.forEach)(P,(G,$)=>{const J=m.x+G.x,N=m.y+G.y;if(R){const D=P[$-1]||M;d(g,m.x+D.x,m.y+D.y,J,N)}else g.lineTo(J,N)})}t.drawPolygon=A;function v(g,m){A(g,{pos:{x:m.minX,y:m.minY},calcPoints:c(m.maxX-m.minX,m.maxY-m.minY)})}t.drawBVH=v})(Ke);Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Circle=void 0;const Tu=Yt,wu=Se,Wr=Ke;class Au extends Tu.Circle{constructor(e,r,i){super((0,Wr.ensureVectorPoint)(e),r),this.offsetCopy={x:0,y:0},this.dirty=!1,this.isConvex=!0,this.type=wu.BodyType.Circle,this.isCentered=!0,(0,Wr.extendBody)(this,i),this.unscaledRadius=r}get x(){return this.pos.x}set x(e){this.pos.x=e,this.dirty=!0}get y(){return this.pos.y}set y(e){this.pos.y=e,this.dirty=!0}get scale(){return this.r/this.unscaledRadius}set scale(e){this.setScale(e)}get scaleX(){return this.scale}get scaleY(){return this.scale}setPosition(e,r,i=!0){return this.pos.x=e,this.pos.y=r,this.dirty=!0,i&&this.updateBody(),this}setScale(e,r=e,i=!0){return this.r=this.unscaledRadius*Math.abs(e),this.dirty=!0,i&&this.updateBody(),this}setAngle(e,r=!0){this.angle=e;const{x:i,y:s}=this.getOffsetWithAngle();return this.offset.x=i,this.offset.y=s,this.dirty=!0,r&&this.updateBody(),this}setOffset(e,r=!0){this.offsetCopy.x=e.x,this.offsetCopy.y=e.y;const{x:i,y:s}=this.getOffsetWithAngle();return this.offset.x=i,this.offset.y=s,this.dirty=!0,r&&this.updateBody(),this}getAABBAsBBox(){const e=this.pos.x+this.offset.x,r=this.pos.y+this.offset.y;return{minX:e-this.r,maxX:e+this.r,minY:r-this.r,maxY:r+this.r}}draw(e){const r=this.pos.x+this.offset.x,i=this.pos.y+this.offset.y,s=Math.abs(this.r);if(this.isTrigger){const n=Math.max(8,this.r);for(let a=0;a<n;a++){const o=a/n*2*Math.PI,c=(a-1)/n*2*Math.PI,h=r+Math.cos(c)*this.r,f=i+Math.sin(c)*this.r,l=r+Math.cos(o)*this.r,u=i+Math.sin(o)*this.r;(0,Wr.dashLineTo)(e,h,f,l,u)}}else e.moveTo(r+s,i),e.arc(r,i,s,0,Math.PI*2)}drawBVH(e){(0,Wr.drawBVH)(e,this)}updateBody(e=this.dirty){var r;e&&((r=this.system)===null||r===void 0||r.insert(this),this.dirty=!1)}markAsDirty(e){e?this.updateBody(!0):this.dirty=!0}getOffsetWithAngle(){if(!this.offsetCopy.x&&!this.offsetCopy.y||!this.angle)return this.offsetCopy;const e=Math.sin(this.angle),r=Math.cos(this.angle),i=this.offsetCopy.x*r-this.offsetCopy.y*e,s=this.offsetCopy.x*e+this.offsetCopy.y*r;return{x:i,y:s}}}Tr.Circle=Au;var wr={},jt={},Iu={decomp:Uu,quickDecomp:sr,isSimple:ku,removeCollinearPoints:Gu,removeDuplicatePoints:Xu,makeCCW:Nu};function Su(t,e,r){r=r||0;var i=[0,0],s,n,a,o,c,h,f;return s=t[1][1]-t[0][1],n=t[0][0]-t[1][0],a=s*t[0][0]+n*t[0][1],o=e[1][1]-e[0][1],c=e[0][0]-e[1][0],h=o*e[0][0]+c*e[0][1],f=s*c-o*n,di(f,0,r)||(i[0]=(c*a-n*h)/f,i[1]=(s*h-o*a)/f),i}function Os(t,e,r,i){var s=e[0]-t[0],n=e[1]-t[1],a=i[0]-r[0],o=i[1]-r[1];if(a*n-o*s===0)return!1;var c=(s*(r[1]-t[1])+n*(t[0]-r[0]))/(a*n-o*s),h=(a*(t[1]-r[1])+o*(r[0]-t[0]))/(o*s-a*n);return c>=0&&c<=1&&h>=0&&h<=1}function Ar(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])}function ri(t,e,r){return Ar(t,e,r)>0}function Fs(t,e,r){return Ar(t,e,r)>=0}function Io(t,e,r){return Ar(t,e,r)<0}function hr(t,e,r){return Ar(t,e,r)<=0}var Pu=[],Ru=[];function Cu(t,e,r,i){if(i){var s=Pu,n=Ru;s[0]=e[0]-t[0],s[1]=e[1]-t[1],n[0]=r[0]-e[0],n[1]=r[1]-e[1];var a=s[0]*n[0]+s[1]*n[1],o=Math.sqrt(s[0]*s[0]+s[1]*s[1]),c=Math.sqrt(n[0]*n[0]+n[1]*n[1]),h=Math.acos(a/(o*c));return h<i}else return Ar(t,e,r)===0}function fr(t,e){var r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i}function F(t,e){var r=t.length;return t[e<0?e%r+r:e%r]}function Mu(t){t.length=0}function we(t,e,r,i){for(var s=r;s<i;s++)t.push(e[s])}function Nu(t){for(var e=0,r=t,i=1;i<t.length;++i)(r[i][1]<r[e][1]||r[i][1]===r[e][1]&&r[i][0]>r[e][0])&&(e=i);return ri(F(t,e-1),F(t,e),F(t,e+1))?!1:(Bu(t),!0)}function Bu(t){for(var e=[],r=t.length,i=0;i!==r;i++)e.push(t.pop());for(var i=0;i!==r;i++)t[i]=e[i]}function So(t,e){return Io(F(t,e-1),F(t,e),F(t,e+1))}var Ou=[],Fu=[];function Du(t,e,r){var i,s,n=Ou,a=Fu;if(Fs(F(t,e+1),F(t,e),F(t,r))&&hr(F(t,e-1),F(t,e),F(t,r)))return!1;s=fr(F(t,e),F(t,r));for(var o=0;o!==t.length;++o)if(!((o+1)%t.length===e||o===e)&&Fs(F(t,e),F(t,r),F(t,o+1))&&hr(F(t,e),F(t,r),F(t,o))&&(n[0]=F(t,e),n[1]=F(t,r),a[0]=F(t,o),a[1]=F(t,o+1),i=Su(n,a),fr(F(t,e),i)<s))return!1;return!0}function Lu(t,e,r){for(var i=0;i!==t.length;++i)if(!(i===e||i===r||(i+1)%t.length===e||(i+1)%t.length===r)&&Os(F(t,e),F(t,r),F(t,i),F(t,i+1)))return!1;return!0}function ui(t,e,r,i){var s=i||[];if(Mu(s),e<r)for(var n=e;n<=r;n++)s.push(t[n]);else{for(var n=0;n<=r;n++)s.push(t[n]);for(var n=e;n<t.length;n++)s.push(t[n])}return s}function Ds(t){for(var e=[],r=[],i=[],s=[],n=Number.MAX_VALUE,a=0;a<t.length;++a)if(So(t,a)){for(var o=0;o<t.length;++o)if(Du(t,a,o)){r=Ds(ui(t,a,o,s)),i=Ds(ui(t,o,a,s));for(var c=0;c<i.length;c++)r.push(i[c]);r.length<n&&(e=r,n=r.length,e.push([F(t,a),F(t,o)]))}}return e}function Uu(t){var e=Ds(t);return e.length>0?Po(t,e):[t]}function Po(t,e){if(e.length===0)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&e[0].length===2&&e[0][0]instanceof Array){for(var r=[t],i=0;i<e.length;i++)for(var s=e[i],n=0;n<r.length;n++){var a=r[n],o=Po(a,s);if(o){r.splice(n,1),r.push(o[0],o[1]);break}}return r}else{var s=e,i=t.indexOf(s[0]),n=t.indexOf(s[1]);return i!==-1&&n!==-1?[ui(t,i,n),ui(t,n,i)]:!1}}function ku(t){var e=t,r;for(r=0;r<e.length-1;r++)for(var i=0;i<r-1;i++)if(Os(e[r],e[r+1],e[i],e[i+1]))return!1;for(r=1;r<e.length-2;r++)if(Os(e[0],e[e.length-1],e[r],e[r+1]))return!1;return!0}function oa(t,e,r,i,s){s=s||0;var n=e[1]-t[1],a=t[0]-e[0],o=n*t[0]+a*t[1],c=i[1]-r[1],h=r[0]-i[0],f=c*r[0]+h*r[1],l=n*h-c*a;return di(l,0,s)?[0,0]:[(h*o-a*f)/l,(n*f-c*o)/l]}function sr(t,e,r,i,s,n,a){n=n||100,a=a||0,s=s||25,e=typeof e<"u"?e:[],r=r||[],i=i||[];var o=[0,0],c=[0,0],h=[0,0],f=0,l=0,u=0,b=0,y=0,w=0,T=0,S=[],p=[],d=t,x=t;if(x.length<3)return e;if(a++,a>n)return console.warn("quickDecomp: max level ("+n+") reached."),e;for(var E=0;E<t.length;++E)if(So(d,E)){r.push(d[E]),f=l=Number.MAX_VALUE;for(var _=0;_<t.length;++_)ri(F(d,E-1),F(d,E),F(d,_))&&hr(F(d,E-1),F(d,E),F(d,_-1))&&(h=oa(F(d,E-1),F(d,E),F(d,_),F(d,_-1)),Io(F(d,E+1),F(d,E),h)&&(u=fr(d[E],h),u<l&&(l=u,c=h,w=_))),ri(F(d,E+1),F(d,E),F(d,_+1))&&hr(F(d,E+1),F(d,E),F(d,_))&&(h=oa(F(d,E+1),F(d,E),F(d,_),F(d,_+1)),ri(F(d,E-1),F(d,E),h)&&(u=fr(d[E],h),u<f&&(f=u,o=h,y=_)));if(w===(y+1)%t.length)h[0]=(c[0]+o[0])/2,h[1]=(c[1]+o[1])/2,i.push(h),E<y?(we(S,d,E,y+1),S.push(h),p.push(h),w!==0&&we(p,d,w,d.length),we(p,d,0,E+1)):(E!==0&&we(S,d,E,d.length),we(S,d,0,y+1),S.push(h),p.push(h),we(p,d,w,E+1));else{if(w>y&&(y+=t.length),b=Number.MAX_VALUE,y<w)return e;for(var _=w;_<=y;++_)Fs(F(d,E-1),F(d,E),F(d,_))&&hr(F(d,E+1),F(d,E),F(d,_))&&(u=fr(F(d,E),F(d,_)),u<b&&Lu(d,E,_)&&(b=u,T=_%t.length));E<T?(we(S,d,E,T+1),T!==0&&we(p,d,T,x.length),we(p,d,0,E+1)):(E!==0&&we(S,d,E,x.length),we(S,d,0,T+1),we(p,d,T,E+1))}return S.length<p.length?(sr(S,e,r,i,s,n,a),sr(p,e,r,i,s,n,a)):(sr(p,e,r,i,s,n,a),sr(S,e,r,i,s,n,a)),e}return e.push(t),e}function Gu(t,e){for(var r=0,i=t.length-1;t.length>3&&i>=0;--i)Cu(F(t,i-1),F(t,i),F(t,i+1),e)&&(t.splice(i%t.length,1),r++);return r}function Xu(t,e){for(var r=t.length-1;r>=1;--r)for(var i=t[r],s=r-1;s>=0;--s)if(Vu(i,t[s],e)){t.splice(r,1);continue}}function di(t,e,r){return r=r||0,Math.abs(t-e)<=r}function Vu(t,e,r){return di(t[0],e[0],r)&&di(t[1],e[1],r)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon=t.isSimple=void 0;const e=Iu;Object.defineProperty(t,"isSimple",{enumerable:!0,get:function(){return e.isSimple}});const r=Yt,i=Se,s=ye,n=Ke;class a extends r.Polygon{constructor(c,h,f){if(super((0,n.ensureVectorPoint)(c),(0,n.ensurePolygonPoints)(h)),this.dirty=!1,this.type=i.BodyType.Polygon,this.centered=!1,this.scaleVector={x:1,y:1},!(h!=null&&h.length))throw new Error("No points in polygon");(0,n.extendBody)(this,f)}set isCentered(c){if(this.centered===c)return;const h=this.getCentroidWithoutRotation(),f=h.x*(c?1:-1),l=h.y*(c?1:-1);this.translate(-f,-l),this.centered=c}get isCentered(){return this.centered}get x(){return this.pos.x}set x(c){this.pos.x=c,this.dirty=!0}get y(){return this.pos.y}set y(c){this.pos.y=c,this.dirty=!0}get scaleX(){return this.scaleVector.x}get scaleY(){return this.scaleVector.y}get scale(){return this.scaleVector.x}set scale(c){this.setScale(c)}setPosition(c,h,f=!0){return this.pos.x=c,this.pos.y=h,this.markAsDirty(f),this}setScale(c,h=c,f=!0){return this.scaleVector.x=Math.abs(c),this.scaleVector.y=Math.abs(h),super.setPoints((0,s.map)(this.points,(l,u)=>(l.x=this.pointsBackup[u].x*this.scaleVector.x,l.y=this.pointsBackup[u].y*this.scaleVector.y,l))),this.markAsDirty(f),this}setAngle(c,h=!0){return super.setAngle(c),this.markAsDirty(h),this}setOffset(c,h=!0){return super.setOffset(c),this.markAsDirty(h),this}getAABBAsBBox(){const{pos:c,w:h,h:f}=this.getAABBAsBox();return{minX:c.x,minY:c.y,maxX:c.x+h,maxY:c.y+f}}draw(c){(0,n.drawPolygon)(c,this,this.isTrigger)}drawBVH(c){(0,n.drawBVH)(c,this)}getCentroidWithoutRotation(){const c=this.angle;this.setAngle(0);const h=this.getCentroid();return this.setAngle(c),h}setPoints(c){return super.setPoints(c),this.updateIsConvex(),this.pointsBackup=(0,n.clonePointsArray)(c),this}translate(c,h){return super.translate(c,h),this.pointsBackup=(0,n.clonePointsArray)(this.points),this}rotate(c){return super.rotate(c),this.pointsBackup=(0,n.clonePointsArray)(this.points),this}isSimple(){return(0,e.isSimple)(this.calcPoints.map(n.mapVectorToArray))}updateBody(c=this.dirty){var h;c&&(this.updateConvexPolygonPositions(),(h=this.system)===null||h===void 0||h.insert(this),this.dirty=!1)}markAsDirty(c){c?this.updateBody(!0):this.dirty=!0}updateConvexPolygonPositions(){this.isConvex||!this.convexPolygons||(0,s.forEach)(this.convexPolygons,c=>{c.pos.x=this.pos.x,c.pos.y=this.pos.y})}getConvex(){if(this.type&&this.type!==i.BodyType.Polygon||this.points.length<4)return[];const c=(0,s.map)(this.calcPoints,n.mapVectorToArray);return(0,e.quickDecomp)(c)}updateConvexPolygons(c=this.getConvex()){this.isConvex||(this.convexPolygons||(this.convexPolygons=[]),(0,s.forEach)(c,(h,f)=>{this.convexPolygons[f]||(this.convexPolygons[f]=new r.Polygon),this.convexPolygons[f].pos.x=this.pos.x,this.convexPolygons[f].pos.y=this.pos.y,this.convexPolygons[f].setPoints((0,n.ensurePolygonPoints)((0,s.map)(h,n.mapArrayToVector)))}),this.convexPolygons.length=c.length)}updateIsConvex(){const c=this.getConvex();this.isConvex=c.length<=1,this.updateConvexPolygons(c)}}t.Polygon=a})(jt);Object.defineProperty(wr,"__esModule",{value:!0});wr.Ellipse=void 0;const Hu=Se,Yr=Ke,$u=jt;class zu extends $u.Polygon{constructor(e,r,i=r,s=(r+i)/Math.PI,n){super(e,(0,Yr.createEllipse)(r,i,s),n),this.type=Hu.BodyType.Ellipse,this.isConvex=!0,this._radiusX=r,this._radiusY=i,this._step=s}set isCentered(e){}get isCentered(){return!0}get step(){return this._step}set step(e){this._step=e,this.setPoints((0,Yr.createEllipse)(this._radiusX,this._radiusY,this._step))}get radiusX(){return this._radiusX}set radiusX(e){this._radiusX=e,this.setPoints((0,Yr.createEllipse)(this._radiusX,this._radiusY,this._step))}get radiusY(){return this._radiusY}set radiusY(e){this._radiusY=e,this.setPoints((0,Yr.createEllipse)(this._radiusX,this._radiusY,this._step))}center(){}updateIsConvex(){}}wr.Ellipse=zu;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.Box=void 0;const Wu=Se,is=Ke,Yu=jt;class ju extends Yu.Polygon{constructor(e,r,i,s){super(e,(0,is.createBox)(r,i),s),this.type=Wu.BodyType.Box,this.isConvex=!0,this._width=r,this._height=i}get width(){return this._width}set width(e){this._width=e,this.setPoints((0,is.createBox)(this._width,this._height))}get height(){return this._height}set height(e){this._height=e,this.setPoints((0,is.createBox)(this._width,this._height))}updateIsConvex(){}}qt.Box=ju;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.Point=void 0;const qu=Se,Ku=Ke,Zu=qt;class Qu extends Zu.Box{constructor(e,r){super((0,Ku.ensureVectorPoint)(e),.001,.001,r),this.type=qu.BodyType.Point}}Ir.Point=Qu;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.Line=void 0;const Ju=Yt,ed=Se,td=jt;class rd extends td.Polygon{constructor(e,r,i){if(super(e,[{x:0,y:0},{x:r.x-e.x,y:r.y-e.y}],i),this.type=ed.BodyType.Line,this.isConvex=!0,this.calcPoints.length===1||!r)throw console.error({start:e,end:r}),new Error("No end point for line provided")}get start(){return{x:this.x+this.calcPoints[0].x,y:this.y+this.calcPoints[0].y}}set start({x:e,y:r}){this.x=e,this.y=r}get end(){return{x:this.x+this.calcPoints[1].x,y:this.y+this.calcPoints[1].y}}set end({x:e,y:r}){this.points[1].x=e-this.start.x,this.points[1].y=r-this.start.y,this.setPoints(this.points)}getCentroid(){return new Ju.Vector((this.end.x-this.start.x)/2,(this.end.y-this.start.y)/2)}updateIsConvex(){}}Kt.Line=rd;var Ii={},Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.BaseSystem=void 0;const id=qt,sd=Tr,nd=wr,ad=Kt,od=Ir,cd=jt,hd=Se,ss=ye,fd=Ke;class ld extends hd.RBush{draw(e){(0,ss.forEach)(this.all(),r=>{r.draw(e)})}drawBVH(e){const r=i=>{(0,fd.drawBVH)(e,i),i.children&&(0,ss.forEach)(i.children,r)};(0,ss.forEach)(this.data.children,r)}createPoint(e,r){const i=new od.Point(e,r);return this.insert(i),i}createLine(e,r,i){const s=new ad.Line(e,r,i);return this.insert(s),s}createCircle(e,r,i){const s=new sd.Circle(e,r,i);return this.insert(s),s}createBox(e,r,i,s){const n=new id.Box(e,r,i,s);return this.insert(n),n}createEllipse(e,r,i=r,s,n){const a=new nd.Ellipse(e,r,i,s,n);return this.insert(a),a}createPolygon(e,r,i){const s=new cd.Polygon(e,r,i);return this.insert(s),s}}Si.BaseSystem=ld;Object.defineProperty(Ii,"__esModule",{value:!0});Ii.System=void 0;const ud=Si,dd=Kt,ns=Se,St=Ke,jr=te,ft=ye;class pd extends ud.BaseSystem{constructor(){super(...arguments),this.response=new ns.Response}remove(e,r){return e.system=void 0,super.remove(e,r)}insert(e){if(e.bbox=e.getAABBAsBBox(),e.system){if(!(0,St.bodyMoved)(e))return this;e.system.remove(e)}return e.minX=e.bbox.minX-e.padding,e.minY=e.bbox.minY-e.padding,e.maxX=e.bbox.maxX+e.padding,e.maxY=e.bbox.maxY+e.padding,e.system=this,super.insert(e)}updateBody(e){e.updateBody()}update(){(0,ft.forEach)(this.all(),e=>{this.updateBody(e)})}separate(){this.checkAll(({a:e,overlapV:r})=>{if(e.isTrigger)return!1;e.setPosition(e.x-r.x,e.y-r.y)})}checkOne(e,r=()=>!0,i=this.response){if(e.isStatic)return!1;const s=this.search(e),n=a=>{if(a!==e&&this.checkCollision(e,a,i))return r(i)};return(0,ft.some)(s,n)}checkAll(e,r=this.response){const i=this.all(),s=n=>this.checkOne(n,e,r);return(0,ft.some)(i,s)}getPotentials(e){return(0,ft.filter)(this.search(e),r=>r!==e)}checkCollision(e,r,i=this.response){if((e.padding||r.padding)&&(0,St.notIntersectAABB)(e.bbox||e,r.bbox||r))return!1;const s=(0,St.getSATTest)(e,r);if(e.isConvex&&r.isConvex)return i.clear(),s(e,r,i);const n=(0,jr.ensureConvex)(e),a=(0,jr.ensureConvex)(r),o=new ns.SATVector;let c=!1;return(0,ft.forEach)(n,h=>{(0,ft.forEach)(a,f=>{i.clear(),s(h,f,i)&&(c=!0,o.add(i.overlapV))})}),c&&(i.a=e,i.b=r,i.overlapV=o,i.overlapN=o.clone().normalize(),i.overlap=o.len(),i.aInB=(0,St.checkAInB)(e,r),i.bInA=(0,St.checkAInB)(r,e)),c}raycast(e,r,i=()=>!0){let s=1/0,n=null;return this.ray?(this.ray.start=e,this.ray.end=r):this.ray=new dd.Line(e,r,{isTrigger:!0}),this.insert(this.ray),this.checkOne(this.ray,({b:a})=>{if(!i(a))return!1;const o=a.type===ns.BodyType.Circle?(0,jr.intersectLineCircle)(this.ray,a):(0,jr.intersectLinePolygon)(this.ray,a);(0,ft.forEach)(o,c=>{const h=(0,St.distance)(e,c);h<s&&(s=h,n={point:c,body:a})})}),this.remove(this.ray),n}traverse(e,{children:r}=this.data){return r==null?void 0:r.find((i,s)=>{if(!i)return!1;if(i.type&&e(i,r,s))return!0;i.children&&this.traverse(e,i)})}}Ii.System=pd;(function(t){var e=Be&&Be.__createBinding||(Object.create?function(i,s,n,a){a===void 0&&(a=n);var o=Object.getOwnPropertyDescriptor(s,n);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[n]}}),Object.defineProperty(i,a,o)}:function(i,s,n,a){a===void 0&&(a=n),i[a]=s[n]}),r=Be&&Be.__exportStar||function(i,s){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(s,n)&&e(s,i,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(Se,t),r(Tr,t),r(wr,t),r(jt,t),r(qt,t),r(Ir,t),r(Kt,t),r(Ii,t),r(Ke,t),r(te,t)})(gt);const tr=10;class md extends gt.System{constructor(r,i){super();V(this,"physicsDebugCanvas");V(this,"physicsDebugContext");i!=null&&i.physicsDebug&&(this.physicsDebugCanvas=document.createElement("canvas"),this.physicsDebugCanvas.width=r.screen.width*tr,this.physicsDebugCanvas.height=r.screen.height*tr,this.physicsDebugContext=this.physicsDebugCanvas.getContext("2d"),document.body.appendChild(this.physicsDebugCanvas))}updateDebug(){if(this.physicsDebugCanvas){const[{width:r,height:i},s]=[this.physicsDebugCanvas,this.physicsDebugContext];s.save(),s.scale(tr,tr),s.clearRect(0,0,r,i),s.lineWidth=1/tr,s.strokeStyle="rgba(255, 255, 255, 0.5)",s.beginPath(),this.draw(s),s.stroke(),s.strokeStyle="rgba(0, 255, 0, 0.5)",s.beginPath(),this.drawBVH(s),s.stroke(),s.restore()}}}class yd{constructor(e){V(this,"drawingEngine");V(this,"physicsEngine");V(this,"frameCount",0);V(this,"deltaTime",0);V(this,"currentScene");V(this,"sceneDict");V(this,"_input");if(this.drawingEngine=new cu,this.physicsEngine=new md(this.drawingEngine,{physicsDebug:!0}),this._input=new ou(U(this.width,this.height),this.drawingEngine.stage),e.length===0)throw new Error("");this.sceneDict=new Map,e.forEach(r=>{this.sceneDict.set(r.name,r)}),this.currentScene=e[0],this.connectScene(),this.drawingEngine.ticker.add(r=>this.update(r))}update(e){this.deltaTime=e,this.frameCount++,this._input._update(),this.physicsEngine.updateDebug(),this.currentScene.update(this)}changeScene(e){const r=this.sceneDict.get(e);if(!r)throw new Error(": "+e);this.clearScene(),this.currentScene=r,this.connectScene()}clearScene(){this.currentScene.destoroy(),this.currentScene.stage.removeChild(this.currentScene.stage),this.physicsEngine.clear()}connectScene(){this.drawingEngine.stage.addChild(this.currentScene.stage),this.currentScene.setup(this).forEach(e=>{this.spawn(e)})}hitTest(e){this.physicsEngine.checkAll(({a:r,b:i,overlapV:s})=>{e({self:r,target:i,overlap:U(s.x,s.y)})})}spawn(e){e.collider&&this.physicsEngine.insert(e.collider),this.currentScene.stage.addChild(e.render)}get input(){return this._input}get width(){return this.drawingEngine.screen.width}get height(){return this.drawingEngine.screen.height}get now(){return this.frameCount}get delta(){return this.deltaTime}get fps(){return this.drawingEngine.ticker.FPS}}class Ro{constructor(e){V(this,"stage");V(this,"entityDict");V(this,"_name");this.stage=new qe,this._name=e,this.stage.name=`Scene: ${this._name}`,this.entityDict=new Map}get name(){return this._name}addEntity(e,r){const i=r||e.name;return this.entityDict.set(i,e),this.getEntity(i)}removeEntity(e){this.entityDict.delete(e)}getEntity(e){const r=this.entityDict.get(e);if(!r)throw new Error(" Entity : "+e);return r}getEntities(){return[...this.entityDict.entries()].reduce((r,[i,s])=>({...r,[i]:s}),{})}destoroy(){this.stage.removeChildren(),this.entityDict.forEach(e=>{e.destroy()}),this.entityDict.clear()}setup(e){return[]}update(e){}}class gd{constructor({position:e,size:r,angle:i=0,scale:s=U(1,1),origin:n=U(0,0)}){V(this,"posize");V(this,"angle");V(this,"scale");V(this,"origin");this.posize=$t(e.x,e.y,(r==null?void 0:r.x)??0,(r==null?void 0:r.y)??0),this.angle=i,this.scale=s,this.origin=n}}class Sr{constructor({name:e,placement:r,shape:i,render:s}){V(this,"placement");V(this,"destroyed",!1);V(this,"_name");V(this,"_collider");V(this,"_render");var n,a,o,c;if(this._name=e,this.placement=new gd(r),this._render=s,this._render.name=e,i==="BOX")this._collider=new gt.Box(r.position,((n=r.size)==null?void 0:n.x)??this._render.width,((a=r.size)==null?void 0:a.y)??this._render.height);else if(i==="CIRCLE")this._collider=new gt.Ellipse(r.position,((o=r.size)==null?void 0:o.x)??this._render.width,((c=r.size)==null?void 0:c.y)??this._render.height);else if(i==="NONE")this._collider=null;else throw new Error("");this.apply()}get name(){return this._name}get collider(){return this._collider}get render(){return this._render}get globalRect(){return this.placement.posize}destroy(){var e;this._render.destroy(),this._collider&&((e=this._collider.system)==null||e.remove(this._collider)),this.destroyed=!0}get position(){const{x:e,y:r}=this.placement.posize;return U(e,r)}setPosition(e){const{x:r,y:i}=e(this.position);this.placement.posize.x=r,this.placement.posize.y=i,this.apply()}get angle(){return this.placement.angle}setAngle(e){const r=e(this.placement.angle);this.placement.angle=r,this.apply()}get scale(){return this.placement.scale}setScale(e){const{x:r,y:i}=e(this.scale);this.placement.scale.x=r,this.placement.scale.y=i,this.apply()}get origin(){return this.placement.origin}setOrigin(e){const{x:r,y:i}=e(this.origin);this.placement.origin.x=r,this.placement.origin.y=i,this.apply()}apply(){if(this.destroyed)return;const{posize:e,angle:r,scale:i,origin:s}=this.placement;this._render.position.set(e.x|0,e.y|0),this._render.angle=r,this._render.scale.set(i.x,i.y),this._render.anchor.set(s.x,s.y),this._collider&&(this._collider.setPosition(e.x,e.y),this._collider.setAngle(gt.deg2rad(r)),this._collider.setScale(i.x,i.y),this._collider.type==="Ellipse"?this._collider.setOffset(new gt.SATVector(e.width*i.x*(1-2*s.x),e.height*i.y*(1-2*s.y))):this._collider.setOffset(new gt.SATVector(e.width*i.x*-s.x,e.height*i.y*-s.y)))}}class Js extends xr{constructor(e,r,i=!1){const s=document.createElement("canvas");s.width=e.x,s.height=e.y,r(s.getContext("2d"));const n=z.from(s);n.baseTexture.scaleMode=i?ve.LINEAR:ve.NEAREST,super(n)}}const en=(t,e,r,i=!1)=>{const{fillStyle:s}=t;t.fillStyle=`#${e.toString(16)}`,r(),i&&t.fill(),t.fillStyle=s},bd=(t,e,r)=>{const{x:i,y:s,width:n,height:a}=e;t.beginPath(),t.moveTo(i+r,s),t.lineTo(i+n-r,s),t.quadraticCurveTo(i+n,s,i+n,s+r),t.lineTo(i+n,s+a-r),t.quadraticCurveTo(i+n,s+a,i+n-r,s+a),t.lineTo(i+r,s+a),t.quadraticCurveTo(i,s+a,i,s+a-r),t.lineTo(i,s+r),t.quadraticCurveTo(i,s,i+r,s),t.closePath()},vd=(t,e,r,i)=>en(t,e,()=>{bd(t,r,i)},!0);class qr extends Sr{constructor(e,r,i,s,n){super({name:"wall",placement:{position:U(r,i),size:U(s,n)},shape:"BOX",render:new Js(U(s,n),a=>{en(a,e,()=>a.fillRect(0,0,s,n))})})}}class Kr extends Sr{constructor(e,r,i,s){super({name:"sphere",placement:{position:U(r,i),size:U(s,s),origin:U(.5,.5)},shape:"CIRCLE",render:new Js(U(s*2,s*2),n=>{en(n,e,()=>{n.beginPath(),n.ellipse(s,s,s,s,0,0,2*Math.PI)},!0)})})}}const ca="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ !#$%&'()*+-./:;<=>?@[]^_`{|}~",_d={format:"bmp",data:"N4IgDghgNgpgLnGIBcIA0BWAUgewBZoQBkAlgAZpQDyeAzIQIQDuA5pQOICiAxJQNIAnABJpaAbgCChAFQB2AEZpZAEgCKaAIwAvNACZphIgGsAbpSowcSgORmo7IUPTgSADxhQAzihAAGXxiBGP5oAUEAbMFoACwRtJExQRiRGIlJgTGx6aHRWYG+ob65uf4gAL5AA"},xd={format:"png",data:"iVBORw0KGgoAAAANSUhEUgAAAIAAAABgBAMAAAAnVGd6AAAABGdBTUEAALGPC/xhBQAAADBQTFRFAAAAIaX/R5PDfNb6j4h0pJ6SCyZN/9mSN7f/HEJbzLmaatP/VlxeWsn/jeb/xPDlvKgrqQAAAAF0Uk5TAEDm2GYAAAW8SURBVFjDlZUxi9tIFMenCgTc3FdQLkUg3EJcGpzjkIsEwR1mxIEwXCqBIVVgMahJm2ZhCYdB4GqxEAyBFFsagwhyQGE+wELYu2L7TRGWQIrzvTcjySPpyVIeiy1r9f/N+7/3RsM2GNe1uHrTN35iCvD5elsjnPVlaMBms71uZnH1I4DN9ecG4roXYLQpEc04686CDQ+ELYHoATAIFOKqgwGA4eXmKOJ4MRBQIdCIs7OjAAgTQTUEvFwdBZiVwCQoxhnlpQQML00E2VTFaAfUjWw+b1usVArCbtsJwGjpilEPdgtxc4RBu3lTIhTg9ubmGGFLMYrtqgGdSYCVLeHj7ACAMAijDcmgrBiA23EXgaqGCTCzGJGITSfAqMVIDdeoNmCNLOqAai3yGa0Stl0AZFT6WiXUfNAAsDIeD2/oxm4rc9EGqJhp1vLQ1aMAbYTuByTSDShzaGkqBttD9HCBpVTlvLwkABBf2hFjmNFbo6Kj0SUB6MLU9xswRgRgv/+vV02K7oyGDUBbEsNDHuMKpAGgCF++nljWP7SZJoDQf9s/sSxrXL07Ht/QgEYd9vunryyrSVADTwI05XA5/WZZLYTbm1bAIS5O7nKARVS3G/DK+j4tAA+aHjsBwcVJZJXxS6VU0LAvXYDFQ+v7xQFg/Vt/oAOwuJievP5qAKynPwRYnD70xPsn1hHCUUAsLHea7ocVwKMHfQF3XhS50/CDdWfqw7fh6n0vwN1OCD4NV5k1tR6Fb9+CNlSEcDn/3QAsVLxu6Ncp95wPIcTjxxl+hY/CcK4ulr7/t1sDmPF6AfdnK2clw0osl/489It4+b4VABFkYTPmfiXmE0B8FyRgHVLh12O++iumAMGzPmodKW8AxKzf8kXUAFxS6iUWvg9gnZGro3zZA3DaIkd9Dwttq/vYf7/LwqkjpcxaVod+Ha9BENl2rvcJ/VznMF/6JIZFrm2XgMbiuoPLeXsjGUe9jRaUakU78dst2HZJaI8iJewHJrZsZEAFwcyQBbvUyJIJl4gqtc6omGRCRQQqz40MRnsq1SLlAOGpT1JOeVmVb5sCUKRRl9sdhTUBpP9WQJZXktWX5326YSTBRNU80VWZ0nKYOZ8xFpmld+mJINS4xZgKt0MPDxMeXrAyuvVNC5mhZ4Z73i97qbdWDcCPbwgDlBXb6J4BqGgqvxv+s8NOvFcCDPXEjfFsycfbg/HgZSfhOws/lvoXTJUCJ2iCkIkQcXk4UQPuOhJOCOPdoi3gYbRYxJXjJcZbiyAW5pxz9SpIHRxAZcB/UQCqJ2OcpxC5+RbFJYAQYaLKGM/U6+leAwCPBvoCV9QfeEPEJQf+IsFVT7Ikt6D8LtQD6hH8HevNoauCdfDgIggivIO5OR+kzPWsyFI/qeoOJdBVE/oe3IRbIifCBTTXOQACkbv2PPViEyLIt6enALh4tMBmYAK4/tRKV3JQTGKuzjvlKQsx2oZMAvxPBKK1aqYqDDT8t5+lPOyFWHnTatfLK6L8REJlEM3ST7Z+YgpTyh1HDubJAaA7plcXRR91ISETYHuRnQ4ArjeM4zxLVswMlEeo1ZUMUA+Jenlv1KRHDp+8U4WBBn48/1gBqFqbwxAbcxxxe+dKOXnnOhPsjzt7uQJCBVAMcaBTKNW5M1tOfpW2a+/s59yVPNnxwwSUe0E1EmauVHlCb8kIC48nC/8j5enEGaTSdSVjNYBaEKcVhC5uTU/PteqtJxL5nKeJ2tCJ5E7GaIBQLYblRRwUU6l6/84ZSDvB4WfsHF6wrAHAtEV8qqesGH5Ue5EHvUhxbhMMIBB6vRvjYG1767We1UV+0oAh7nIunVSuErX5dklTzwI1bxEHxVr8GUQxmsfTBlZfz+Adp7buajBIBowMXYGZO+HP1zBQXP9awzvenagzJRlA8c5b1HqQYE75Lp3sOIy8je8e252p8yS7L89leJ8lR/T/A0/8Gt59jpmwAAAAAElFTkSuQmCC"},Ed={format:"bmp",data:"N4IgDghgNgpgLnGIBcIA0BWAUgewBZoQBkAlgAZpQDyeAzIQIQDuA5pQOICiAxJQNIAnABJpaAbgCChAFQB2AEZpZAEgCKaAIwAvNACZphIgGsAbpSowcSgORmo7IUPTgSADxhQAzihAAGWQCcQcFKwUG+AaFhQaG+cfGhsklJvrH+6WnxqYHh8SAAvkA"},Td={format:"bmp",data:"N4IgDghgNgpgLnGIBcIA0BWAUgewBZoQBkAlgAZpQDyeAzIQIQDuA5pQOICiAxJQNIAnABJpaAbgCChAFQB2AEZpZAEgCKaAIwAvNACZphIgGsAbpSowcSgORmo7IUPTgSADxhQAzihAaNABl1df1p6P0Dg0LR/GNiYtAAWBP8MDH8ANnSlWX8ADlz/AE5Cwgh/eXl/AGMq6LjYtAATRv8YGH8AMw6QAF8gA"},wd={ball:_d,fujisan:xd,greenman:Ed,palette:Td};var tn={exports:{}};tn.exports;(function(t){var e=function(){var r=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function a(c,h){if(!n[c]){n[c]={};for(var f=0;f<c.length;f++)n[c][c.charAt(f)]=f}return n[c][h]}var o={compressToBase64:function(c){if(c==null)return"";var h=o._compress(c,6,function(f){return i.charAt(f)});switch(h.length%4){default:case 0:return h;case 1:return h+"===";case 2:return h+"==";case 3:return h+"="}},decompressFromBase64:function(c){return c==null?"":c==""?null:o._decompress(c.length,32,function(h){return a(i,c.charAt(h))})},compressToUTF16:function(c){return c==null?"":o._compress(c,15,function(h){return r(h+32)})+" "},decompressFromUTF16:function(c){return c==null?"":c==""?null:o._decompress(c.length,16384,function(h){return c.charCodeAt(h)-32})},compressToUint8Array:function(c){for(var h=o.compress(c),f=new Uint8Array(h.length*2),l=0,u=h.length;l<u;l++){var b=h.charCodeAt(l);f[l*2]=b>>>8,f[l*2+1]=b%256}return f},decompressFromUint8Array:function(c){if(c==null)return o.decompress(c);for(var h=new Array(c.length/2),f=0,l=h.length;f<l;f++)h[f]=c[f*2]*256+c[f*2+1];var u=[];return h.forEach(function(b){u.push(r(b))}),o.decompress(u.join(""))},compressToEncodedURIComponent:function(c){return c==null?"":o._compress(c,6,function(h){return s.charAt(h)})},decompressFromEncodedURIComponent:function(c){return c==null?"":c==""?null:(c=c.replace(/ /g,"+"),o._decompress(c.length,32,function(h){return a(s,c.charAt(h))}))},compress:function(c){return o._compress(c,16,function(h){return r(h)})},_compress:function(c,h,f){if(c==null)return"";var l,u,b={},y={},w="",T="",S="",p=2,d=3,x=2,E=[],_=0,I=0,A;for(A=0;A<c.length;A+=1)if(w=c.charAt(A),Object.prototype.hasOwnProperty.call(b,w)||(b[w]=d++,y[w]=!0),T=S+w,Object.prototype.hasOwnProperty.call(b,T))S=T;else{if(Object.prototype.hasOwnProperty.call(y,S)){if(S.charCodeAt(0)<256){for(l=0;l<x;l++)_=_<<1,I==h-1?(I=0,E.push(f(_)),_=0):I++;for(u=S.charCodeAt(0),l=0;l<8;l++)_=_<<1|u&1,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=u>>1}else{for(u=1,l=0;l<x;l++)_=_<<1|u,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=0;for(u=S.charCodeAt(0),l=0;l<16;l++)_=_<<1|u&1,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=u>>1}p--,p==0&&(p=Math.pow(2,x),x++),delete y[S]}else for(u=b[S],l=0;l<x;l++)_=_<<1|u&1,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=u>>1;p--,p==0&&(p=Math.pow(2,x),x++),b[T]=d++,S=String(w)}if(S!==""){if(Object.prototype.hasOwnProperty.call(y,S)){if(S.charCodeAt(0)<256){for(l=0;l<x;l++)_=_<<1,I==h-1?(I=0,E.push(f(_)),_=0):I++;for(u=S.charCodeAt(0),l=0;l<8;l++)_=_<<1|u&1,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=u>>1}else{for(u=1,l=0;l<x;l++)_=_<<1|u,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=0;for(u=S.charCodeAt(0),l=0;l<16;l++)_=_<<1|u&1,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=u>>1}p--,p==0&&(p=Math.pow(2,x),x++),delete y[S]}else for(u=b[S],l=0;l<x;l++)_=_<<1|u&1,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=u>>1;p--,p==0&&(p=Math.pow(2,x),x++)}for(u=2,l=0;l<x;l++)_=_<<1|u&1,I==h-1?(I=0,E.push(f(_)),_=0):I++,u=u>>1;for(;;)if(_=_<<1,I==h-1){E.push(f(_));break}else I++;return E.join("")},decompress:function(c){return c==null?"":c==""?null:o._decompress(c.length,32768,function(h){return c.charCodeAt(h)})},_decompress:function(c,h,f){var l=[],u=4,b=4,y=3,w="",T=[],S,p,d,x,E,_,I,A={val:f(0),position:h,index:1};for(S=0;S<3;S+=1)l[S]=S;for(d=0,E=Math.pow(2,2),_=1;_!=E;)x=A.val&A.position,A.position>>=1,A.position==0&&(A.position=h,A.val=f(A.index++)),d|=(x>0?1:0)*_,_<<=1;switch(d){case 0:for(d=0,E=Math.pow(2,8),_=1;_!=E;)x=A.val&A.position,A.position>>=1,A.position==0&&(A.position=h,A.val=f(A.index++)),d|=(x>0?1:0)*_,_<<=1;I=r(d);break;case 1:for(d=0,E=Math.pow(2,16),_=1;_!=E;)x=A.val&A.position,A.position>>=1,A.position==0&&(A.position=h,A.val=f(A.index++)),d|=(x>0?1:0)*_,_<<=1;I=r(d);break;case 2:return""}for(l[3]=I,p=I,T.push(I);;){if(A.index>c)return"";for(d=0,E=Math.pow(2,y),_=1;_!=E;)x=A.val&A.position,A.position>>=1,A.position==0&&(A.position=h,A.val=f(A.index++)),d|=(x>0?1:0)*_,_<<=1;switch(I=d){case 0:for(d=0,E=Math.pow(2,8),_=1;_!=E;)x=A.val&A.position,A.position>>=1,A.position==0&&(A.position=h,A.val=f(A.index++)),d|=(x>0?1:0)*_,_<<=1;l[b++]=r(d),I=b-1,u--;break;case 1:for(d=0,E=Math.pow(2,16),_=1;_!=E;)x=A.val&A.position,A.position>>=1,A.position==0&&(A.position=h,A.val=f(A.index++)),d|=(x>0?1:0)*_,_<<=1;l[b++]=r(d),I=b-1,u--;break;case 2:return T.join("")}if(u==0&&(u=Math.pow(2,y),y++),l[I])w=l[I];else if(I===b)w=p+p.charAt(0);else return null;T.push(w),l[b++]=p+w.charAt(0),u--,p=w,u==0&&(u=Math.pow(2,y),y++)}}};return o}();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(tn);var Ad=tn.exports;const Id=wd,Sd=t=>{const e=ca.length;return[...t].reverse().reduce((r,i,s)=>{const n=ca.indexOf(i);if(n===-1)throw new Error(`: ${i}`);return r+n*Math.pow(e,s)},0)};class Co extends xr{constructor(e,{antialias:r=!1}={}){const i=Id[e];let s;if(i.format==="bmp"){const n=document.createElement("canvas"),a=JSON.parse(Ad.decompressFromBase64(i.data)),[o,c]=[a.palette.split(",").map(Sd),a.pixels.split(",").map(f=>[...f].map(l=>parseInt(l,16)))];n.width=c[0].length,n.height=c.length;const h=n.getContext("2d");for(let f=0;f<n.height;f++)for(let l=0;l<n.width;l++){const u=c[f][l];u!==0&&(h.fillStyle=`#${o[u].toString(16).padStart(6,"0")}`,h.fillRect(l,f,1,1))}s=z.from(n)}else{if(i.format!=="png")throw new Error(`: ${e} (${i.format})`);s=z.from(`data:image/png;base64,${i.data}`)}s.baseTexture.scaleMode=r?ve.LINEAR:ve.NEAREST,super(s)}}class Pd extends Sr{constructor(e,r){super({name:"player",placement:{position:U(e,r),size:U(8,8),origin:U(.5,.5),scale:U(2,2)},shape:"BOX",render:new Co("ball",{antialias:!0})})}}class Rd extends Sr{constructor(){super({name:"background",placement:{position:U(0,0)},shape:"NONE",render:new Co("fujisan",{antialias:!0})})}}class Cd extends Ro{constructor(){super("col-test")}setup(e){return[this.addEntity(new Rd),this.addEntity(new Pd(40,67)),this.addEntity(new qr(16755200,0,0,e.width,0),"topWall"),new qr(16755200,0,e.height,e.width,0),new qr(16755200,0,0,16,96),new qr(16755200,112,0,16,96),new Kr(16755200,40,24,8),new Kr(16755200,88,72,8),new Kr(16755200,80,32,8),new Kr(16755200,77,40,24)]}update(e){const{player:r,topWall:i}=this.getEntities();r.setPosition(s=>U.add(s,e.input.getAxis("WASD"))),r.setAngle(()=>e.now),e.hitTest(({self:s,target:n,overlap:a})=>{s===r.collider&&(n===i.collider&&console.log("HIT!"),r.setPosition(o=>U.sub(o,a)))})}}const Md=1,Nd="truetype",Bd={0:"-4aaeaa4",1:"-4c4444e",2:"-4a2448e",3:"-4a242a4",4:"-26aae22",5:"-e8ca2a4",6:"-4a8caa4",7:"-ea24444",8:"-4aa4aa4",9:"-4aa62a4","!":"-4444404",'"':"-aa00000","#":"-aeaaaea",$:"-4e8e2e4","%":"-824820","&":"-4aa4a86","'":"-4400000","(":"-2444442",")":"-8444448","*":"-a4e4a0","+":"-44e440",",":"-48","-":"-e000",".":"-4","/":"-24800",":":"-40040",";":"-40048","<":"-248420","=":"-e0e00",">":"-842480","?":"-4a24404","@":"-4aeac86","[":"-6444446","\\":"-84200","]":"-c44444c","^":"-4a00000",_:"-e","`":"-4200000","{":"-2448442","|":"-4444444","}":"-8442448","~":"-c6000","":"-84","":"-4a4","":"+2424244800",:"+203c44a81008",:"+2046890a8c480","":"+384482824438","":"+4081020100804","":"+40201008102040","":"+a14285028140a","":"+a05028142850a0","":"+1e101010101000","":"-11111f","":"+3e222e28283800","":"+382828e888f8","":"+1c18101010181c","":"-7311137","":"+fe00fe10101010","":"+c30202020300c","":"+60180808081860","":"+60920c0000","":"+14140a00000000","":"-a55","":"-a500000","":"-4a40000",:"+6018040c3000",:"+a6018040c3000","":"-3300",:"+807e000000",:"+601008040400",:"+a601008040400",A:"-4aaaeaa",B:"-caacaac",C:"-4a888a4",D:"-caaaaac",E:"-e88c88e",F:"-e88c888",G:"-4a8aaa6",H:"-aaaeaaa",I:"-e44444e",J:"-22222a4",K:"-aaccaaa",L:"-888888e",M:"-aeeeaaa",N:"-caaaaaa",O:"-4aaaaa4",P:"-caac888",Q:"-4aaaea6",R:"-caacaaa",S:"-4a842a4",T:"-e444444",U:"-aaaaaae",V:"-aaaaa44",W:"-aaaeeea",X:"-aa444aa",Y:"-aaa4444",Z:"-e24448e",a:"-c26a6",b:"-88caaac",c:"-68886",d:"-226aaa6",e:"-4ae86",f:"-64e4444",g:"-6a62c",h:"-88caaaa",i:"-4044444",j:"-20222a4",k:"-88aacaa",l:"-c444444",m:"-ceeea",n:"-caaaa",o:"-4aaa4",p:"-caac8",q:"-6aa62",r:"-ac888",s:"-6842c",t:"-4e4446",u:"-aaaae",v:"-aaa44",w:"-aaeea",x:"-aa4aa",y:"-aa62c",z:"-e248e",:"+20782078ac74",:"+207c207caab264",:"+888484a040",:"+84828282a040",:"+780078840830",:"+7c007c82020c30",:"+7800f820709c",:"+7c00fc1038488e",:"+20f42078a468",:"+20f6203c62a26c",:"+20f42a4a4888b0",:"+2af02a4a4888b0",:"+107c08fe24403c",:"+147c08fe24403c",:"+4186080601804",:"+4186a80601804",:"+88be8888888810",:"+8abe8888888810",:"+7c000040807e",:"+a7c000040807e",:"+8fe08748c4038",:"+afe08748c4038",:"+40404040424438",:"+54404040424438",:"+8fe2848380830",:"+afe2848380830",:"+4444fe444c403c",:"+4a44fe444c403c",:"+7c1020fe10201c",:"+7a1020fe10201c",:"+20f02e4048908e",:"+2af02e4048908e",:"+20fe205c620438",:"+2afe205c620438",:"+38c4040830",:"+3cc202020438",:"+a3cc202020438",:"+fe102020201c",:"+fe102a20201c",:"+20202c3040807e",:"+2a202c3040807e",:"+20f624449ca61c",:"+809c808090a09e",:"+485c6aaab6aa46",:"+20ec322266aa26",:"+7c9292a2c21c",:"+88be8888b8ccba",:"+8abe8888b8ccba",:"+8cba8c88b8ccba",:"+e8244644444438",:"+ea244644444438",:"+e42a4644444438",:"+300810104c4ab2",:"+300a10104c4ab2",:"+340a14104c4ab2",:"+205048840200",:"+a205048840200",:"+42a5448840200",:"+be88be88b8ccba",:"+ba88be88b8ccba",:"+b48abc88b8ccba",:"+10fe10fe509876",:"+7010247ea4a448",:"+20f62060a2e23c",:"+485c6aaab2a24c",:"+10fc20fc22221c",:"+5058e4282010",:"+485cea22241010",:"+20b8d494b820",:"+10bcca8aaa9c20",:"+101810709864",:"+101c1010789462",:"+700840bcc20438",:"+58644444040830",:"+7c103c42b24a3c",:"+20ec342464a426",:"+7c10207c82023c",:"+40d86444c458",:"+20ec322262a22c",:"+10fc207698283e",:"+101020304a4a84",:"+fc24382040",:"+fe021418101060",:"+40830d01010",:"+2040838c80808",:"+10fc84040830",:"+10fe8282040830",:"+7c1010107c",:"+fe10101010fe",:"+8fc0838c818",:"+8fe081828c818",:"+20fe222222428c",:"+2afe222222428c",:"+10fc1010fe0808",:"+14fc1010fe0808",:"+203e4282041860",:"+2a3e4282041860",:"+407e4888081020",:"+4a7e4888081020",:"+fe02020202fe",:"+afe02020202fe",:"+44fe4444040830",:"+4afe4444040830",:"+6010c022041860",:"+6a10c022041860",:"+7c04040834c2",:"+a7c04040834c2",:"+202ef22224203e",:"+2a2ef22224203e",:"+82424404081020",:"+8a404404081020",:"+203e42ba041860",:"+2a3e42ba041860",:"+c7010fe101060",:"+a7010fe101060",:"+a454540830",:"+a25252040830",:"+aa05252040830",:"+7c00fe10101060",:"+7a00fe10101060",:"+20202038262020",:"+2a202038262020",:"+1010fe10101060",:"+7c00000000fe",:"+7c0424180c32c0",:"+10fc040834d210",:"+40408081020c0",:"+28242444424282",:"+2a202444424282",:"+242a2444424282",:"+40404e7040403e",:"+4a404e7040403e",:"+444a4e7040403e",:"+fe0202041860",:"+afe0202041860",:"+4fa0604041860",:"+205088040200",:"+a205088040200",:"+42a5488040200",:"+10fe1054529230",:"+14fe1054529230",:"+14fa1450549230",:"+fe0204281008",:"+700c601c00f00e",:"+101020204884fa",:"+46414081422c0",:"+7c2020fe20201e",:"+405ce4282010",:"+405ee224201010",:"+780808fc",:"+7808080808fe",:"+7c043c047c",:"+fe027e0202fe",:"+7c00fe02020c30",:"+44444444040830",:"+82828282a4a8c",:"+40404042445860",:"+fe82828282fe",:"+fc84040830",:"+fe8282040830",:"+fe027e02041860",:"+c0200002041860",:"+2a20fe82820c30",:"+70103c5296aa46",:"+7c103844186c92",:"+8fe484848fe08",:"+fe12141010fe",:"+20fc24244498",:"+407c90101020",:"+fe28feaafe28fe",:"+10fe447c2ae432",:"+48f25e68de44da",:"+fe54feaa6418e6",:"+3ed4bef2acd42a",:"+fe7c7cfe54caba",:"+5ed25c58de64de",:"+7e48485c4848be",:"+7cd45652da64da",:"+10fe827eda28ce",:"+92fe547c7c5cb6",:"+10fe927c2818e6",:"+10feaa74fe38d6",:"+8feb4fea0ec0c",:"+44544c44648c32",:"+10fe102aec2472",:"+287ed45454587e",:"+feaafeaafeaafe",:"+fe909cbe88b6fe",:"+287ec85a74545a",:"+38fe38d67c28f6",:"+47e7c546e54aa",:"+28781c247e8256",:"+7c547c54fe48e6",:"+fe92fe7c447c44",:"+727e42764672a6",:"+7c547c28fe00c6",:"+ec54e856eac458",:"+28fe3854fe28f6",:"+285eca7e547e44",:"+48fe48d4fe4454",:"+1c28feba7c38d6",:"+107c28fe38caba",:"+9e0a3ed47e44be",:"+549e54be54f45e",:"+727e4a72a648ba",:"+883e2afe5c62be",:"+489e4abe54fe44",:"+447ec47476cc32",:"+10fe24fa447c44",:"+4fe000000",:"+10fe10feba203c",:"+8c341eda4c56be",:"+28fe109e2a08b6",:"+28fe287c10fe30",:"+f212f282f21232",:"+2eca8aea8ae808",:"+fe92fe92aac6fe",:"+3eeabeaaf6223e",:"+beaafeeaf662be",:"+38287c7c447cc6",:"+c8feaec0fe94a6",:"+8638aa00be88be",:"+c8d4bac8fe94ba",:"+48ae56e4e484ea",:"+c6f8aadcdcb2ae",:"+2cfc5ef21e6072",:"+20fe207ca4243c",:"+10feba10fe1030",:"+fe125a1236da36",:"+fe10fe92b692b6",:"+1ef2beb2fe0012",:"+54ee7cfaf44274",:"+48ee12e4e4eaf2",:"+8a3e883eaabeaa",:"+be2a1cdc7e48be",:"+38feb600fe24fa",:"+300032d4589432",:"+9800986aacca98",:"+28fe2854fe10ee",:"+8fcb4fea8e836",:"+54fe927c1038d6",:"+54feaa38107c7c",:"+58c018ba1cead8",:"+7254fa547022ac",:"+54bee27ed454e6",:"+56b85eea527a56",:"+7c447c207eaa56",:"+87edc54ee4cb6",:"+44fe44827c54fe",:"+883e9016ba949a",:"+eecaeaccec2ab2",:"+54fee27e545466",:"+44fe54f654dabe",:"+5cd41cde32dac6",:"+eeeeaabaaa9aee",:"+fe9292fe828286",:"+c25c8654de40be",:"+941494229c949c",:"+105428c65428c6",:"+7eda28ce10caba",:"+10feaa38fe28f6",:"+4658eabeca54aa",:"+46f86a5eca54ea",:"+febafeaabad6fe",:"+5e4cfede5e649e",:"+a85cbe72be34da",:"+881c3ed45c6abe",:"+4aaaea50ee6ace",:"+505ef45c40dc3e",:"+883ea21caa9ca2",:"+5c847e905aec5a",:"+56faf49eee78ee",:"+be10be109e8286",:"+fe10107c1010fe",:"+eeaaaaba8282fe",:"+107c54fe1028c6",:"+87e504850769c",:"+50887ec85c487e",:"+7eea7e6afe48c8",:"+1ee4a4eea4e41e",:"+e88ed6a4d484ea",:"+ee8ad0aeda84ea",:"+6ac448fed44c72",:"+28c620fe5a36da",:"+107c5c74fe10ee",:"+54fe54fedc5c62",:"+feaafe92d6fe82",:"+7e427e547a48be",:"+287ed47e5c726e",:"+48fed47e5c726e",:"+e8bef4beecbab6",:"+80e784e6c7e94",:"+7808102040827e",:"+287ed46a5c5c46",:"+4e7aaafa2ab8c8",:"+107c28fe7c447c",:"+7c546c7c54caba",:"+bc24bc00bcacfe",:"+c678ea5cdcf26e",:"+fe101814101010",:"+3050d25c50525e",:"+101054581028c6",:"+40fe5a5a5a5abe",:"+fe04745474040c",:"+3e50de5a5a645a",:"+3e42de565e4246",:"+28fe284acc4a4e",:"+285cc87e5c487e",:"+3e48de5a5a5a5e",:"+7c547c54fe38d6",:"+be02ba2aba8286",:"+28fe28fe745474",:"+e454e454c6fc44",:"+40fe5abefe38d6",:"+fe3838386810ee",:"+10feba30da2cda",:"+28fe285ec25a5a",:"+28fe54fe54fe10",:"+28fe7c54fe38d6",:"+284ec84e3c3cc6",:"+9c14943ea2baba",:"+8e4a0ade525abe",:"+88bee2dcda6c9a",:"+36f2a6feaaf42a",:"+4eea2a5ef25a5a",:"+acf4f654f4f456",:"+10feaa38fe5caa",:"+e82eb6e424a47a",:"+486eb4fe92aafe",:"+c87ee25cdaec5a",:"+beea3ec83edcea",:"+48fed4d44854e2",:"+7c4848fe28c818",:"+fe203828584aee",:"+1a68fe28fa246a",:"+fe10bababa82fe",:"+28fe7c48fe28d8",:"+40fe5abe243cc6",:"+eaaebcee6cac6e",:"+4eb43ed4d6bcd2",:"+1028c628282848",:"+fe82baaaba82fe",:"+7e486a6c4854a2",:"+1028de00fe24fa",:"+48dccc7e484876",:"+4fe0454fe549a",:"+e82efa8aaae41a",:"+7cd4c8765c487e",:"+5ef25e60de4ad6",:"+50decc7e545e44",:"+a03e9c7eb4be8c",:"+7c547c547caa48",:"+486e48ee107c7c",:"+44fe54fcd6544a",:"+48946e807ed47a",:"+eeee82feaafeaa",:"+e4b6e4b6a8dc9c",:"+487eea7e6adc2e",:"+64f664f6c85c5c",:"+6ea67a7e745eb4",:"+883eaa7e9c9ca2",:"+487eda5e7ef41a",:"+48feda5e7e745a",:"+a4f624b608dcdc",:"+7c447c447c00c6",:"+487858bc1a28c8",:"+28fe4aaa5a2ad6",:"+10fe927c10fe38",:"+92fe5c485c48be",:"+be24ae24aea4de",:"+56b856fa527a46",:"+4ef6f67e64744a",:"+28fe34fa7c54fe",:"+44de08d40ac4da",:"+4ef676fee4744a",:"+745ef8947a745a",:"+7e5cd45c54dc3e",:"+48fe48feea6a48",:"+18681028c63838",:"+38c87e527e4286",:"+44de5054d46ace",:"+28fe287c54fe10",:"+4cd448d4e25c5c",:"+48fe50ead44c72",:"+4eea40fe9a64ba",:"+2efa5c7a3aec28",:"+54feaa38283ace",:"+c87ed4e254c876",:"+feacccbeb2de96",:"+eeee9aaa92eeba",:"+e45e568c7e6c0e",:"+947edc5ed448b6",:"+14fed4fef6365a",:"+d47edc5ed4c876",:"+54feba08fe1030",:"+c707c48fe547c",:"+926cba10fe38d6",:"+2ef4be5a2ed07a",:"+ded46efa4e206a",:"+54fc547ed47cc4",:"+9424bc10bec2aa",:"+44d87e48dc54dc",:"+8418be089c949c",:"+1cd4dcdef21a06",:"+9c149c1eb29a86",:"+22faaa7a22fa76",:"+28fe447c7ea236",:"+9c14be229c9c94",:"+5cf43c5ef27a46",:"+c87eeadc48fe5c",:"+7c447c447c44fe",:"+58dc68fec85c6a",:"+28c638d63854fe",:"+54bedc4efc5cea",:"+121ada2a225286",:"+7c1010fe101010",:"+722a2afa222226",:"+44fe447c44447c",:"+9c08883e888888",:"+203c50fe10547c",:"+10feba00fe28ce",:"+eea4e4bee4a4a4",:"+10feba283c243c",:"+fe82640ef46cbe",:"+5438fe4cba203c",:"+c703cfe7ca43c",:"+eeb2c4b6b6d696",:"+f05eeca448f24e",:"+54fe5656f6aafa",:"+1038387c7ccaba",:"+7cd67c7c447cc6",:"+10feaa7c7cb208",:"+1ce4dcdcfe0836",:"+547ed4547ee83e",:"+5ce45c5cfe48f6",:"+7426fa5a5af41a",:"+48fe62dcde525e",:"+48ee56e404e45a",:"+eeaafeaabaaaba",:"+eeee92febad692",:"+487eaa7aea6a76",:"+10feaa7c383ace",:"+e44ae0ae44ee44",:"+47e74b200caba",:"+947eaa3efe88b6",:"+5cf6dc5c5c5c62",:"+486eb4feb23c3c",:"+eeeeaa92fe92aa",:"+4476aa74e4647a",:"+e8ced0e67c54fe",:"+46b86a9e4ad46a",:"+44fef47240726e",:"+be3e14dc6a48be",:"+44be52ecee8aee",:"+fe6a7ed45cea08",:"+486eb4eeeebaba",:"+4e7aae7aee6c76",:"+e85eeabe54fe44",:"+54f6b0b6e0acbe",:"+54b6f056e06cde",:"+20f82868384a8e",:"+1028fe087c447c",:"+92fe405c487e88",:"+547c00fe40bc3c",:"+dc407ed454d426",:"+feb2feb2feb4fa",:"+6e04fe6a6eb00a",:"+2ef45efaae90aa",:"+fea4fefaaef0aa",:"+1028d6105c50fe",:"+287ec87c544876",:"+38c87e5c54529e",:"+5cd454d4d45466",:"+407eb87c5424d2",:"+445e44eeeae41a",:"+641824fe48be2a",:"+7c047c407ccaba",:"+a03ed83c848482",:"+107c1028fe5474",:"+42ec284eea4a52",:"+38fe3cda08fe10",:"+5e8242be50f25e",:"+d07cd4d454d466",:"+feaaeabee48cf6",:"+5ee202de10d2de",:"+2ef22ef86e609e",:"+5cb454d4d494e6",:"+107c547c7a2cce",:"+5cc4feea5c5c88",:"+287c28fe449238",:"+10fe9228fe5474",:"+5ef25ef25e6c96",:"+38c87c7c94fc0e",:"+10fe7c28fe447c",:"+549854fc4a649a",:"+7eea7e5cdc7ec8",:"+5efa5e7afe0a96",:"+54fe54dcfe4062",:"+107c54fe447cc6",:"+10fe2874fe38d6",:"+4eba90fe6a34ca",:"+48ee5c6cbe2072",:"+6c6c10fe10ee6c",:"+549854fc0ae4ea",:"+3eb63eec6c7e84",:"+52e452fcd6546a",:"+e4dee4cafe22aa",:"+48fe487cd448f6",:"+10feba283828fe",:"+547cccd47e426a",:"+54fe5274fc049a",:"+44fe10fe2afc2a",:"+9ee49e6aec58b6",:"+547ec8fe567c52",:"+2634eeb4a6b4ea",:"+66fa665cfe54ea",:"+d4fec87ed67c52",:"+94fe08be16fcd2",:"+28fe407ed63a56",:"+10fe107c007c7c",:"+16fed6fadc0836",:"+48fe08dc00dcdc",:"+2e7a2afa2a58e8",:"+10fe9a6810ee38",:"+eebeeebeeeb4bc",:"+943e08ea7e50be",:"+80e784e5e509e",:"+20f82828484a8e",:"+203c44880834c2",:"+f8282c245448b6",:"+7c047c40fe020e",:"+c70407c4848fe",:"+bea2a2bea2a2be",:"+287ec85c5c6a48",:"+3cd4d6d2ea245a",:"+5ee848eec24246",:"+20ce82ee8282fe",:"+14fe105438d432",:"+10feaa4cf82ace",:"+883e94149498be",:"+38c87c047ccaba",:"+7c9456925ae45a",:"+4494549456fc44",:"+10feaa38107c7c",:"+24f62aba6ab46a",:"+ca7e48ea5cea18",:"+48946e805cd45c",:"+8dcd4dcfe0836",:"+10feb674d632d6",:"+507c9010fe1010",:"+107c10fe1024fa",:"+fe80fc84fc80fe",:"+7e7e445e445e9e",:"+5ef05e72de50de",:"+50de6a6ada50ee",:"+54fe44ba7cfe30",:"+80e784e4054be",:"+50dc28c83ec8c8",:"+feb0de72def0de",:"+38c87c547c00aa",:"+66be56de767c44",:"+8c349e1a9e80aa",:"+828aaa92aac2fe",:"+287c2828fe00c6",:"+4d4d4d4d63c04",:"+ae44a46ea424de",:"+10fe447c1054b2",:"+10fe447c08fe10",:"+547ed4d47e4062",:"+485eea404a7e56",:"+be22a23e9494a6",:"+487e48eafec836",:"+48fe486afe48f6",:"+a87ec86afe48b6",:"+ec4c6cd600caba",:"+287c28fe4420aa",:"+e8aef6aaf6bea2",:"+107c24fe56bc24",:"+c852fe9cdc4afe",:"+24762afa5ab42a",:"+46be6cbee66cb4",:"+487ed47e5cdc26",:"+5cfe54eafe626a",:"+9cfe54ea7e62aa",:"+48bed47edc5ce6",:"+24fe5afe5a6cb6",:"+76b666bc28fe38",:"+56fa74ba3e02aa",:"+506eeaea7a6848",:"+8fcbef4bed426",:"+aafe287cfe38d6",:"+a63a261cbe94aa",:"+28feaafeaaaafe",:"+7c447c407e6aba",:"+5ee84cf6d6445e",:"+fe10107c1014fe",:"+10fe9292929610",:"+c70407e484888",:"+505ee24a66da06",:"+845810de5464be",:"+1028fe10fe54fe",:"+28fe28febad6fe",:"+54fe56f6f62afa",:"+ee44ee38c63808",:"+486eb4687e6ab6",:"+547ed4fe7e487e",:"+24fe6cb6fe54b2",:"+eecae42afe1092",:"+48bcd45cfe6ac8",:"+94fe14be3ec8fe",:"+52f6325cfe486a",:"+8f4aea0fe0418",:"+5eb2fe52fe74da",:"+fe84b48894a0fe",:"+203e42ba2a3a06",:"+28fe28fe107c7c",:"+eec8eaccea28ae",:"+7c447c44fe00c6",:"+5cd4dc547e4062",:"+38387c5c74caba",:"+10feaa4c3810fe",:"+3c5cc87e6a6e7a",:"+9c5c08fe6e7abe",:"+dcdc88feeaaeba",:"+107c7c10fefe10",:"+7e427e5c486abe",:"+7ee27e6ee456de",:"+10feb67c7c6abe",:"+54f650745600aa",:"+5c947eaa7edc6a",:"+7c14fe143ee23e",:"+52da1ada1ad2e2",:"+68fe6a6af600aa",:"+28fe38fe54feaa",:"+fe92fe7c54fe10",:"+f656fc5666f474",:"+fa5ef45e64fe74",:"+7c44447c282ace",:"+fa5656fe525296",:"+fa5452fc505294",:"+7c106014fa1092",:"+7c9448f65c487e",:"+28fe2810ee107c",:"+3e48d04a7e486a",:"+fa56fe52ba10fe",:"+5eea4af67c10ee",:"+44e41ec404e4e4",:"+10fe7c547ccaba",:"+f65a748a7c447c",:"+5cd45c5ef25ac6",:"+8638aa1cbe88b6",:"+7c9448b65cc87e",:"+54fe927c7c14fa",:"+54f65a7a9a543a",:"+7c44fe447c54b2",:"+fc54c8f65cc87e",:"+2e64fe6a6e704a",:"+54de745efc56e2",:"+5a945eb45af05e",:"+52dc12de00dede",:"+87e547e7a4cb6",:"+5cd4fe545c486a",:"+ca7ed86ed0de5e",:"+f44efa6e00caba",:"+56fa749a30fe38",:"+e40eae48ee42aa",:"+28fe287cfe24fa",:"+902e2aea7a48be",:"+64be6a6e6416ac",:"+e4b6ccaca4d68c",:"+223aeadab2dab6",:"+2efa74ea3cfe30",:"+9436ba7a9aacda",:"+56e056f2d25256",:"+407e52901028c6",:"+10fe8228284482",:"+207c54545454fe",:"+881c8c3e8888b6",:"+48be489c40dc5c",:"+5a6ed6ea7e5c6a",:"+963e963abe88aa",:"+3e223e223e4286",:"+1410fe101028c6",:"+2c4ed4445e4444",:"+7c447c447c2ace",:"+5438fe44be146c",:"+fe447c5c545c94",:"+dc4e9c48de48be",:"+fe4a4a9e6a6a12",:"+3ca4bca4fe1092",:"+2854fe6a7e4876",:"+44fe782ef86caa",:"+2256feaefa22da",:"+5438fe44ba7c30",:"+ee44e4fe44e444",:"+345eee547e546e",:"+c8d4beeafe88b6",:"+feaafebad69afe",:"+eecae41a7c10fe",:"+48d47eeafe4876",:"+94bedccefc5caa",:"+26f42ef4d4f4ba",:"+4c8c40be52fe52",:"+883e2afe5c5ebe",:"+48ee54eedc4c4e",:"+10fe927c38caba",:"+eecae40a7c7cc6",:"+94fe1cce3cdcea",:"+5aaeea56ea68d6",:"+28fe28feb6deb6",:"+fe946efa6e70ca",:"+e8d4feeafe28b6",:"+6ee488ee54caba",:"+7c00fe28284a8e",:"+2e22d2622252f4",:"+10fe20681024fa",:"+38fe0038007c7c",:"+c87ed0b4c854fa",:"+feb2deb2bed49a",:"+7e485c5c486a98",:"+fe525ef25eec16",:"+44fea8bae4aabe",:"+843ea43ca6bcda",:"+be24ae2ea4b6cc",:"+547e60765a749a",:"+fc0404fc80827e",:"+fe007c447c4080",:"+1010fe107c447c",:"+6f8eac8fe0818",:"+fe92ba92aabafe",:"+eeaae0aeeaa4ba",:"+80e784e4054a6",:"+e23c5474d456ea",:"+c25cd494d456ea",:"+48ee5aeaaae41a",:"+48c87ec8dc545c",:"+3e6afe6a767e7e",:"+87e487e5c7e88",:"+ae7aae7adefa8a",:"+fe447c545e749e",:"+48fe14aa1cc2c6",:"+44ee44aeca64da",:"+7eaafe6af67efe",:"+fe547666f6607a",:"+7c10107c2424fe",:"+fe203c247808fe",:"+407c9010fe1010",:"+3ca4fc08fe00c6",:"+48904afe544876",:"+4656fca4de6092",:"+5cc8fc547e545c",:"+287c28fe44ba58",:"+5cc83cd43ed4dc",:"+46d61cc41ec0d2",:"+94fe1cde14c8f6",:"+7e4242427e42",:"+7c10101010fe",:"+282844921024fa",:"+203e52922a7602",:"+e8284868c84ace",:"+8fe4a4a6aca16",:"+1ee8484e62c206",:"+87e40484854ba",:"+fe92fe92fe1010",:"+10fe28c62810ee",:"+105410fe282ace",:"+10fe82baaaba86",:"+c70407e405c9c",:"+2e22f45e6434cc",:"+803e88088888be",:"+127c18fe30de02",:"+5c807ec444444c",:"+487ec05c54d426",:"+127c18fe24de08",:"+48fe405cd454e6",:"+8ee5a4a6ac41a",:"+fe547c547c30ce",:"+28fe5a8a5a2ad6",:"+107cfe28fe7c10",:"+50de625ada42c6",:"+105c50fe447c44",:"+2c44de485e445a",:"+7e5c5c447e4898",:"+7edcd45c545c7e",:"+943e9414be80a2",:"+107c447cfe10fe",:"+409e44a444e45e",:"+28fe407c005496",:"+2efa5c8a5a2cd8",:"+c70fe38d67c7c",:"+2c64fe687e645a",:"+48fe54e2d44876",:"+54fe54d47ed464",:"+48fea0bcf4b4a6",:"+7c10fe7c447cc6",:"+ccd488f6dcbe84",:"+10fe2838feaaba",:"+87e4e7c6a5caa",:"+48fe7640dc48fe",:"+7edc5cc8d84876",:"+28fe28fe547cc6",:"+2ce4bea8fe243a",:"+54fed05c405a6a",:"+943e947eaad09c",:"+fe4e4e846c641a",:"+48be54a254c876",:"+1ee85e527ec012",:"+943e943e9cbe94",:"+44bef054f46ace",:"+54fe54fedc7e54",:"+7ea276aa76fe62",:"+ea5cc8fed4eec4",:"+c87ed45cfee26a",:"+46baeebafe00c6",:"+5ea856fa7a526a",:"+7ea2f66af67ee2",:"+94fe14be1cfed4",:"+d4fed4fedc3e94",:"+407eb80830423e",:"+3828fe203c041c",:"+1028de007c447c",:"+4adc487ed86ec2",:"+fa8edeaedafa8a",:"+547ed6fe565c6a",:"+10fe44feda2cda",:"+10fe7c447c2ace",:"+507c90fe007c7c",:"+28441028c63838",:"+22fa4aaa5222d6",:"+feba92ba96bafe",:"+7c547c10fe00aa",:"+2efa20feaa74aa",:"+ec4ef4fea0eeee",:"+b65ca67ca43cda",:"+7c4cfec67c444c",:"+e8cef2ceee22a6",:"+984808d46240be",:"+9ea8de92bee012",:"+1028de007c0830",:"+fe92febad692fe",:"+7c447c486e48ee",:"+5ef2de525e545a",:"+5ef25ef2de545a",:"+5e54feb4da6c8c",:"+be22be24b6a4b6",:"+87edc54dc549a",:"+54be549c54d45c",:"+e81efa5ebeec16",:"+2cdc6aac6a10fe",:"+2cdc6aac6ac0ba",:"+20fe203c48887e",:"+285ec84e54445e",:"+881c9a288a8498",:"+10fe38d67c44fe",:"+e85c5a886a6418",:"+12fed4e6dc2816",:"+44fe10fe5c48be",:"+50de28ce08cec8",:"+56a4fe52fe60d2",:"+87e546a5c48be",:"+54d46a48dc48fe",:"+8fe080c18e818",:"+fe547c54fe444c",:"+4a944a105428c6",:"+10fe147cfe28f6",:"+ef05408fe38d6",:"+e85c4c96687e08",:"+10fe927c28fe10",:"+287a28fe2674aa",:"+1ae45224f872ac",:"+46f86a44fe5cea",:"+883e9408b69ca4",:"+7652ac44ba54b2",:"+10fe38ee547c94",:"+5e9656be56f65e",:"+28fe5408fe38d6",:"+7c44fe525af41a",:"+287a28fe66d46a",:"+285cc87e5c5c62",:"+2a7ed45e74545e",:"+10feaa7cfe54ba",:"+105c50fe4674aa",:"+287a28fe66f42a",:"+deea94e2dc88aa",:"+487ec8547ec414",:"+20fe285cc8487e",:"+44fe44c6cc744c",:"+22fa5a2ada7296",:"+e4bee4a6ec14ac",:"+fefe28ee28ee48",:"+487e48d4fec414",:"+284ed84e484e48",:"+b22afa9af292b6",:"+8eeb8eea8ee08",:"+5eda5afeda5a52",:"+107c10feaa3092",:"+486eb4fe9238d6",:"+e84ef8eea8eee8",:"+48fe7650dc6ec8",:"+54bed47edc54dc",:"+14e0bea8fe0836",:"+7e6a6afe6a6a42",:"+28f8287868aa2e",:"+7a4a7a527a5a96",:"+522ada2afa72aa",:"+4af44a6eda44d8",:"+5e2ad02efa74aa",:"+10feea44ba54b2",:"+5cd47e5eda7cca",:"+48fe6a54e25cea",:"+4aee6cbeec7cae",:"+7c54545454fe",:"+7c00380000fe",:"+101092929292fe",:"+2874fe54a20870",:"+4afe48fcca445a",:"+fe10ee547c14fa",:"+48d4fa546a4458",:"+10fe247e5c48be",:"+1028d63854fe10",:"+54f65afa5a745a",:"+486eb47c44fe48",:"+ea5eeaf2acf4ea",:"+44ee44aa7c7cc6",:"+ea5e68bc6a449a",:"+e458f0fe54e444",:"+2ef86ef4247c7c",:"+1010fe1010107c",:"+7c0810fe101030",:"+10fe10782810ee",:"+10105c505050fe",:"+c70507e4844e2",:"+2848fe4848485c",:"+107c547c3010ee",:"+fe027a027a7a06",:"+feaaaaaec282fe",:"+10fe107c545410",:"+407c90fe1028c6",:"+8cf0827e7c447c",:"+fe486aac684a8e",:"+10641824fa1092",:"+fe2874107c10fe",:"+3e42da425a5a46",:"+10fe107c00caba",:"+7424f42478aa2e",:"+287eda5e784876",:"+22fa22faaa72aa",:"+2424fa5e603ece",:"+445ee4bed67684",:"+48fe48fcd44876",:"+44e43654f4545e",:"+e4bee4aeeaa4ba",:"+901eaa14fe28f6",:"+7c547c547ccaba",:"+52dc525ec05ede",:"+48ee586eba286e",:"+5ee8feaaeaea08",:"+901e2a9400caba",:"+429c54be54f45a",:"+eaaceaaee0aeae",:"+5ef23e52fe4c56",:"+24b6a4f67a1092",:"+5ee21ac21adac6",:"+105efc765a767e",:"+6e620ef2fede92",:"+4ac83ec43cd4fa",:"+48dc08be04fed4",:"+901e2a947c7cc6",:"+5ea25ac2da9ae6",:"+48fe08dc00d2ee",:"+545ef4ded4f4de",:"+287cec763cfe30",:"+feb2fea8ee16aa",:"+a8ce16c42adede",:"+7c00fe10549230",:"+10feba08fe1030",:"+107c10fe08fe28",:"+901e2a088894a2",:"+fe243c3c24fe04",:"+107e427a5e427e",:"+3256d25a72445a",:"+5c545c545c2ace",:"+10fe54fc16fc30",:"+285cc87e447e54",:"+8808943a809c9c",:"+48dc487ec47ed4",:"+8fca8fea4fe14",:"+943e922492a4b6",:"+44fe244824caba",:"+24deea5ee4bee4",:"+ea5e4a946a741e",:"+5eaa4eeeea9ee2",:"+fe54feb6da7cfe",:"+87e547c7664b6",:"+afe08782434c2",:"+56fc1ebc06dcda",:"+e45ef6fe56f65e",:"+20202ef020221e",:"+10f0b2bcf0121e",:"+507c90fe1028c6",:"+10feb2287410fe",:"+87ed05cfe48b6",:"+287cf454fc7426",:"+be22be14b694be",:"+849ef0d8fe54aa",:"+883e9c2a9cacda",:"+24486ebc243cc6",:"+10feba10fe10ee",:"+28fe107c0850be",:"+fea23c20fe0818",:"+44e42e44e4445e",:"+10fe547c54fe10",:"+1028d638fe447c",:"+127c18fe20dc1c",:"+227e527ad632d6",:"+48d46a5cfe54dc",:"+24762afa5ad45a",:"+225af22af22eb2",:"+147c18fe5c00aa",:"+883e2cfe406abe",:"+52fe2abe2edaea",:"+feaaacfa6aac68",:"+44feb2e84e68ce",:"+203e42a2120206",:"+7c447c50484482",:"+547ed4fe5c545c",:"+e84ef2eaa6e2e6",:"+fe2aba2cfc6ab2",:"+fe547e7e6652f6",:"+28fe20fe40bc3c",:"+ee22ee8866aa66",:"+10feb22efa24aa",:"+c70fe10fe1030",:"+2010fe107c10fe",:"+10fe8208fe2818",:"+507c90fe1038d6",:"+f05e727a54fa10",:"+a85ed244fe548c",:"+44fe107c7c447c",:"+f85c68be685caa",:"+d85c68fe48dc2a",:"+be14be36a2bebe",:"+e2acfeaeeea4be",:"+c458fe5cdcc87e",:"+58ee5aec5ac8be",:"+107cfe24fe4494",:"+fe54feba2810ee",:"+3ee2a2bef41466",:"+7ed47e62dc48f6",:"+38feb67c10feaa",:"+5c7eeadc487e6a",:"+52fe52faee527a",:"+2ea2aaaab4e42a",:"+fe929292aac6fe",:"+5252f6f6525292",:"+107c5444fe5494",:"+38fe38d6782cc4",:"+7e527a527e6aba",:"+10feba00fe54b2",:"+48d46e40dc54dc",:"+c848ea6cc8d462",:"+107c447cfe10ee",:"+286ef46a64624c",:"+44fe365ef6765e",:"+4c9448b648e04c",:"+44fe10fe7c54be",:"+fe5a36da207c7c",:"+be2a3eea765ebe",:"+26f45e7424b46a",:"+107cfe509a5492",:"+287ca83cfe38d6",:"+74fe74aa00caba",:"+ea4afefeaaeaea",:"+e85efafebeecf6",:"+d6bcee7cd4fcd2",:"+26fc56fafe68b6",:"+1010fe10101010",:"+8808be08888888",:"+10fe2874282ace",:"+2844de444e445e",:"+38fe52b0fe38d6",:"+38fe547c5438fe",:"+52be44d654546e",:"+8416943ea294a2",:"+48bed47ad454e6",:"+d6747e04f4547a",:"+5aae54b654dc56",:"+2e322afa24b46a",:"+5ef2325eec4c56",:"+10fe825ec85e5e",:"+ae32aa7aa4f4aa",:"+107c16fc567a96",:"+48be629e74d656",:"+28fc5c7cae10fe",:"+28fc5c7cae00aa",:"+1054547c9292fe",:"+8a3e08ea6a48be",:"+56b856fa7a5256",:"+327ed4665c6856",:"+107c38fe44ba38",:"+feb4fea2f4bee4",:"+203e6aba2a3a06",:"+aa2a54ea6a40be",:"+6787e485c5c9c",:"+941e341e94949e",:"+e84e76be765e82",:"+48be48aa7ec84e",:"+429c5ed45e6e4e",:"+5e747e7a7e509a",:"+941eb41e90fe10",:"+f676de4adecade",:"+947e36e27e4cbe",:"+407c54d426508e",:"+5eea2a4aea6a56",:"+f20c785e7a4a92",:"+107c16fc10fe7c",:"+87e547e5c40aa",:"+7c447c38fe34dc",:"+feaafe38fe34dc",:"+4a9c48be50ee4e",:"+4adc08be10eece",:"+1010fe246818e6",:"+202efa5a6a3ace",:"+745e7656765aea",:"+87e5c447e4a98",:"+2e52fa2af424aa",:"+48947ec87e486a",:"+c8d4bec8fe88aa",:"+10105452921030",:"+14e424fe242444",:"+105452903418e0",:"+fe1222c67c447c",:"+fe8cb0bea8c8fe",:"+87e487e485caa",:"+48dc5a68ca44d8",:"+52347e427e4246",:"+5410fe82baaaba",:"+5eea5266de52de",:"+3808d27c54ba10",:"+7c447c28fe2848",:"+54d462c8c8547a",:"+be0a92269e929e",:"+1eeab2e6bef21e",:"+10feb67c447c44",:"+4678ea44fe544c",:"+aa08be22bea2a6",:"+87ede44d654be",:"+4afe244ee45e44",:"+d05ee85cdaea58",:"+486eb410fe10ee",:"+1cf4bea2fe223e",:"+10fe24feaade9a",:"+882ca87eaa8cb8",:"+107c28fe44fe10",:"+5e8a52a65ef25e",:"+54d422c808d4fa",:"+f6a4feacfeaab6",:"+54feaa387cfe30",:"+7c44feaaeeaaee",:"+485cfed47e54a6",:"+283e7ca83e00aa",:"+f6445e927e7216",:"+a45ef45ef4d46e",:"+5eea12c61ed2de",:"+5ee404d614d4fe",:"+38c83c3cda2cda",:"+305ef45c5e6a56",:"+5eca5ec47e10ee",:"+feaaf2aeee00aa",:"+94fe08dc08fec8",:"+22fc52fc70fa24",:"+c8fe94fedcbe88",:"+48fed47e5c487e",:"+4eb056fa7a527a",:"+54feaa7c447cc6",:"+2a5cf65c5c5c62",:"+ea4e5c8c6e6016",:"+48bed47edc48fe",:"+10101c101010fe",:"+10fe10301028c6",:"+fe823828284a8e",:"+186810ee7c38d6",:"+4a48fe48c85462",:"+c70fe54fe38d6",:"+447ee47c6ef42a",:"+8c349e7e8abe98",:"+1266fe56fa72aa",:"+54feaa38fe9210",:"+48dcc87e545c54",:"+5c54fe505eea16",:"+7c547cfeba28fe",:"+28fe32d452feaa",:"+5c945eba56dc46",:"+487ed4767ed41a",:"+88bed4f6fe549a",:"+44beee44d654ee",:"+48fe14b63ed4da",:"+c87ed4f6fed4da",:"+38c87c547c423e",:"+4ac87e44fc54fa",:"+1028d630342876",:"+44de44d6d6505e",:"+e45e64b676509e",:"+48ae54c4de96e4",:"+68be6a7e686abe",:"+3efea4acfe365a",:"+56bc5ebc46dc5a",:"+f67c6e7c66f43a",:"+7e5c7ea8fe2818",:"+7e427e507c54a6",:"+2010206462a43c",:"+10fe92fe92fe10",:"+287eea7e6a7e48",:"+fe90fc84fc90fe",:"+28fe2820646aba",:"+103c243efc146c",:"+107c28fe107c10",:"+3c44dc7e764876",:"+2c5ec04c405e5e",:"+883c8e3c88be88",:"+48fe2a7eea7e48",:"+7e5c7e68b63c3c",:"+5e50f6b0de749a",:"+5ed05650de74da",:"+9c049c3eb688b6",:"+10fe3838fe00c6",:"+44a4fe44e464c4",:"+be229426be9caa",:"+48be6abe6afe48",:"+941e34de545ebe",:"+107c3854fe6cb6",:"+48d42ac40ac4d8",:"+10fe86de5ac45a",:"+48fedc5c7e4062",:"+22fc582efa72aa",:"+10feba54fe7cba",:"+38feb67c7e68b6",:"+28fe5c28fe7aa2",:"+2efa5e2afe74aa",:"+10101028284482",:"+fe1272122a4286",:"+205ec04040405e",:"+7c44785444b208",:"+bc143cd45240be",:"+28fe2838fe547e",:"+c8fe9cdcdcbe88",:"+7c04ee4afe2818",:"+eecae40a7c7c44",:"+5e885e921e4092",:"+fed286aa9aa6fe",:"+1012f438549230",:"+10deeac8c81422",:"+c70fe54fe10fe",:"+505eeac84854a2",:"+48feeaaaeaea08",:"+a87cd466c8fe48",:"+10fe38ee38e836",:"+54de745ed454de",:"+e85cecf6a8fee8",:"+943e08da6c5abe",:"+eea4feacfea4ee",:"+c87edc5cc0f26e",:"+5ca8fe54fe48fe",:"+f4aec4b8b6d6ae",:"+746ee4b876765e",:"+5ef05af4da505e",:"+547cfeba7c54b2",:"+ac76aa4afa54ea",:"+5ede545ed46ace",:"+22f4227460a22c",:"+5efe345ef46a4e",:"+8fe0848280818",:"+ae74fe7aaef0aa",:"+7c44fe105c50be",:"+24fe2424fe2444",:"+5454fe545c407e",:"+fe10105c5050fe",:"+507e90107c10fe",:"+47e44745654aa",:"+fe28feaace82fe",:"+10fe107c547c80",:"+627aaa7a22faaa",:"+2c2ef4546e24de",:"+5e8444d654547e",:"+58dee8485c487e",:"+107c10fe447c44",:"+10fe2810ee3848",:"+f4262abaaab4ca",:"+7c447e50bc10fe",:"+d8dee848dc487e",:"+1054923ce43c3c",:"+883e0c1cbe94ba",:"+923c16d67a52be",:"+881c883e949c94",:"+47e64aa7c54fe",:"+5e4aecb6ca6e8a",:"+4eea4feaaee0a",:"+287cec76bc146c",:"+fe6afe107c10fe",:"+44fe24bc2ef4ea",:"+a85cc87ed4dc54",:"+627aaa72fe68b6",:"+44d85ed464fe38",:"+267a24fe567e54",:"+48dc08be14dcd4",:"+26fa74aafe5cfe",:"+ee4aeef4aee4fe",:"+d47ee27ed4d466",:"+101e22da040870",:"+c70407e584c88",:"+fe20207ca4243c",:"+107c10fe28aa58",:"+287c28fe7c447c",:"+44d850ded45464",:"+87e547e487eaa",:"+d610d638c67c44",:"+283e68be2810ee",:"+54fed47e5c545c",:"+47e545c567c92",:"+107c10fe447cc6",:"+e8bed476f6d4ec",:"+c85cc87edcdc62",:"+489c48be5cdc62",:"+486eb43ef47eac",:"+5e4aea4a4a6a16",:"+44d8505ed464c4",:"+48ea7e48ea6afe",:"+10feaa4cee466a",:"+48fe547ed44cf2",:"+5cd426dc14c8f6",:"+38feb6007c047c",:"+7ed4547ee254e2",:"+486eb4eeea9ae8",:"+94fe22be14d4e6",:"+c70fe107c447c",:"+4c945eba5ef05e",:"+c7010fe101010",:"+42525252524282",:"+2848ea6a6a6a7e",:"+10101e107e427e",:"+507c90fe282ace",:"+10feba003828fe",:"+10fe3838fe2818",:"+107c447cda54b2",:"+8a3e883c8a84ba",:"+981ea83e9494a6",:"+903c9426fe38d6",:"+fe7c407e6a5eaa",:"+48d47ec8dc487e",:"+48ee506ea62c76",:"+4aeaaab0eeaaae",:"+aa08fef426f42a",:"+44fe54745400aa",:"+44fe10fe9c08b6",:"+e8bcf4bcfabcaa",:"+48d43ec81cc8fe",:"+eabee85ceae4da",:"+486eb41afc1a66",:"+4abee85cea64da",:"+58bce87ed454e6",:"+943e942a9c949c",:"+489c549c7adc6a",:"+be5c1cea505cbe",:"+b61224f65c62be",:"+28fe547c5e42aa",:"+56bc56bc56dc72",:"+6abe646e641ea4",:"+1028fe107c10fe",:"+44fe00eaaae2a6",:"+44fe10fe54fe7c",:"+745eb424ca00aa",:"+5ae43e5ee45e44",:"+b21cb83e9aba92",:"+eabee4beeabeae",:"+54be48be54fe5c",:"+bc54dc54dc54be",:"+dcd49cd4dc94be",:"+5cf43c54fc547e",:"+dc54dc54dcd47e",:"+107cfe24fa1092",:"+54fe547edc54dc",:"+bc54dc54dcd47e",:"+5c945cb45cd47e",:"+e83e5a7ec8dcea",:"+44d810de1cd6e4",:"+aefade7aca10fe",:"+ae7a3eda6a40be",:"+ea5e4a946e6c16",:"+fe125a2a24548a",:"+4848fe48c8485c",:"+7c447c447cfe10",:"+38c83cfe147c30",:"+107c10fe1c50be",:"+107c38fe549228",:"+2efa2e7a6eaa2e",:"+28fe40c87ec85c",:"+28fe7c447cfe10",:"+943e08dc4854be",:"+1028fe38205c9c",:"+48fe6a7ed448f6",:"+44d8487eea7ec8",:"+3808e622dc38d6",:"+547c7c10fe38d6",:"+5cc47e6adc5cc8",:"+28fefeaafe447c",:"+44fe92fe7c447c",:"+10fe54385428c6",:"+10feaa4c30caba",:"+225aea6a4272b6",:"+10fe7610fe68b6",:"+87edc7ed448b6",:"+28fe6ca84efe48",:"+48fe48dcfe68b6",:"+547eeafe5c545c",:"+2efa6eba2ec0ba",:"+7e7e546a7e549c",:"+54a254ba40f26e",:"+943e14fe7e54be",:"+54fe54fefe545c",:"+c8beee40fec8ea",:"+5cd47e6afe5cea",:"+5c54feea7e5caa",:"+38feb62efa7aae",:"+fecae4deee24be",:"+28fe942abe1caa",:"+981c28fe545cbe",:"+2c74dc5c5a6c5a",:"+547eea7e5cd41c",:"+54feea7e5c545c",:"+28fe287c7674ba",:"+d4feeafedc14bc",:"+f4bee4bef4b4ba",:"+eeaaeaaaea98e8",:"+10fe547c1038d6",:"+7c447c105c50be",:"+3e52de4456546e",:"+e2aaeaaae202a6",:"+107c447c7ccaba",:"+5ed25e44d654ee",:"+887e2afe5c6abe",:"+3a6efe6e7a426a",:"+ba2ebe2eba82aa",:"+5462c8d4625c5c",:"+48ee586cbe246a",:"+7e7e4c5c7e6eba",:"+c4fed4fcd604aa",:"+48be48be62d466",:"+10fe4444aafe10",:"+10fe542054fe10",:"+20fe2c44fe4858",:"+24fe24746ca42c",:"+ee244864de44d6",:"+44fe5c6cfe2818",:"+4cec5e72de40d2",:"+be1428e45e74be",:"+2454de7654525e",:"+186810ee320c70",:"+883e881494a2aa",:"+5ee44464c444cc",:"+ef054fe2818e6",:"+1cc8fed4fe083e",:"+c8de88d68610fe",:"+50fed46e5c5c54",:"+e8dee8d4f422aa",:"+10fe1028284492",:"+22fe125a265286",:"+287ec85c6a5c48",:"+fa46faaeaeaaaa",:"+489c48fe447e54",:"+1024fa447ccaba",:"+e4a4eabee0aeae",:"+9e521ed25c56be",:"+54fe54fe927c54",:"+107c38ee5438d6",:"+545ef45e74d41e",:"+2a5ec452fe68b6",:"+883c1cea5c6abe",:"+44ee44aa7c447c",:"+2a5ec4423c3cc6",:"+d4fe90eadcaa98",:"+943e943eaa9c94",:"+54f6507456c8ba",:"+2a78fe68fa04aa",:"+1010fe101028c6",:"+2a48de48444442",:"+101024fa007c7c",:"+486eb47c503ed2",:"+6e64fe2e706a9e",:"+883e943e9c9c86",:"+10feba10fe101e",:"+5ed25e54d452e2",:"+be22be28a8a4c2",:"+101e7c447cfe10",:"+5ee8486eda4ace",:"+44d808be08cace",:"+b612b6149eb49e",:"+94fe10be10eece",:"+be2a9e229a9eba",:"+3e52de525e405e",:"+881c3ed47e48be",:"+eabef2beecacb6",:"+10fe74bafe2818",:"+7eea7eeafe6a56",:"+54de34de14d4de",:"+7c445444fe448c",:"+7c447c447c00fe",:"+5ef25e72de40de",:"+547c547c54fe10",:"+92fe486a6c48b6",:"+eeaaeeaaeea0ae",:"+7ee25466fe5cea",:"+aa14a208aa94a2",:"+9ee05ef25e6c9e",:"+14feaabefe0836",:"+6afea0be50fe2a",:"+44be6e8456d46e",:"+b2dc26943ed0ee",:"+4eb6f856fa74da",:"+fe8afeaa8a9afe",:"+7c547c54fe22c6",:"+2e4a604e6ac45a",:"+d2acf8aeda8af2",:"+ea44febec87ec8",:"+6f8aafeaaf42a",:"+aad422c82ad4e2",:"+487ef67e5cd43e",:"+4454de7654d21e",:"+84149e3694929e",:"+407eaa7a2a5a8e",:"+245ec45656505e",:"+e864687a78ea2e",:"+f4265afa6a34ca",:"+9e5e10da5e64be",:"+87ed05ef656a8",:"+f45ef45ef4d45e",:"+feaafe24bca4fe",:"+7c9666be56fc4a",:"+486eb42424242c",:"+10fe6012fe547c",:"+be501aec5a68be",:"+28fe6012fe547c",:"+486eb44cee38d6",:"+d85ce87ec8d462",:"+10feaa5c7a10fe",:"+28fe1028fe1092",:"+44fe10fe5c5c9c",:"+88bed4feea76be",:"+10fe9292fe1010",:"+287eea6a7e4848",:"+107c54547c14fa",:"+883eaa2abe8888",:"+10fe927c7c547c",:"+107c547c10caba",:"+48fe6a7eea6afe",:"+9008be089c88be",:"+7c447844ba28fe",:"+50c87ec8dc487e",:"+10fe547c2ae432",:"+e45ee4f4ace4ec",:"+48bcfe54fe64d4",:"+e8c4eec4ee24ae",:"+28fe3c18fe34dc",:"+e4bef2aee404ac",:"+fe101010101030",:"+7c147c50fe1216",:"+87e407e484898",:"+28aa2c6caa28ce",:"+f0bef4b4b4f40c",:"+3c203820fe2876",:"+54f65476d454e6",:"+5ed0dcd07e545a",:"+de50dc90fe54da",:"+faacfaacd8fa8c",:"+f4b6f4b6f4b4e6",:"+48aef24ae662c6",:"+fe485e525ec012",:"+107c7c407e02aa",:"+ee4aeeaa4eea56",:"+eea8eca8feacaa",:"+e8a8eea8fe12be",:"+2ef62af06e6a9e",:"+eeaafea8eeb6aa",:"+f4b6f456f4d4e6",:"+54be46fe567c4a",:"+3edabebade3a12",:"+be1abe3a9eba92",:"+ba14a21c5488be",:"+beea3eaa36fee2",:"+e47e6e6e60fa36",:"+54be46fc52c8ba",:"+10fe10bca4bcfe",:"+24fe6e7e267aaa",:"+44d6547eea44d8",:"+883eaa0c8c94a6",:"+e8546ac46ac418",:"+eaa0eea4eea4ba",:"+c8fe9cdcc89caa",:"+2458fe483c3cc6",:"+44beec4cfe60d2",:"+885e1ed05e52be",:"+54de74ded4545e",:"+d4fe9aec9a10fe",:"+be043eea7e6abe",:"+87ec47eea7eaa",:"+7e62dc7a5cec1a",:"+881c883e9c9ca2",:"+7e48ea487ec808",:"+c705454545492",:"+24feae78ee6276",:"+225cd45e54525e",:"+7c44fe107c10fe",:"+c458887ec85cbe",:"+28fc147c503ed2",:"+10feba105c50be",:"+87e5e545e54ba",:"+42dc545ed452de",:"+16e6a4f6a694ec",:"+10fe44feba1030",:"+101e7c447c7cc6",:"+10fe24fe927c54",:"+5ee404c404e4ec",:"+87e72546e54ae",:"+825c14de5664be",:"+287ed47e5e4858",:"+284edc545c5c62",:"+4c4cfe4456d42e",:"+4cec5e44d654ee",:"+dc54fe48dcc87e",:"+72dce4def4deee",:"+48be54be6adc54",:"+48fe14be2adcd4",:"+be22be28aea8ce",:"+48eeb2eaa6e206",:"+486eb4107c547c",:"+48fe547eea76fe",:"+883e943eaab6be",:"+883e14fe6a76be",:"+24f65afaaadcfa",:"+b612b624b6dab6",:"+8c4e14de445abe",:"+44d85ed47c447c",:"+4caef45ee464da",:"+54be56e65e5c5a",:"+54fe5666de5cda",:"+fe107c101028c6",:"+287c6c7cfe00c6",:"+87e484e485e9e",:"+101c107c7c00aa",:"+7e427e547e68b6",:"+8418be14a288aa",:"+ee40fee444ea5e",:"+7f405c5c5c5c",:"+fe9292fe9292fe",:"+3c40fe4848547a",:"+7e4a706e7a44aa",:"+38feb67c547c0e",:"+482848280ef808",:"+4e4bea4e4041e",:"+5e48e8aeda6a8e",:"+489c48fe4c586e",:"+88143ec86a58be",:"+2e7a2cfa4abc38",:"+883eac3eaaa4da",:"+8814be08ba10fe",:"+e4aee4bee816a6",:"+10107c101010fe",:"+2e22fa5a6434ca",:"+2efa546abc146c",:"+87e547e5448b6",:"+2efa54ea00caba",:"+fe121222224286",:"+18681028d6300c",:"+5e44e4c444648c",:"+52347e023e027e",:"+5cd4665cd448f6",:"+fe007c447c28fe",:"+10fe547c5438d6",:"+f22a5afa6232c6",:"+943614f65466be",:"+3a56e67e527a46",:"+883e1c1c889caa",:"+87e5c4e7c549c",:"+107c7c407eaafa",:"+54f654f6d45466",:"+44de04d40cc4cc",:"+9c3e1cea4c54be",:"+54feba28382ace",:"+48cedc545c7e48",:"+901e2a947c54fe",:"+d0deaadecaaebe",:"+547ec8547ed41c",:"+54fe4854fe54dc",:"+48fe5cdcc85c6a",:"+9c14be109eaa96",:"+87ec05ed24c9e",:"+74aa44ba2810fe",:"+486eb438c63838",:"+486eb418fe2818",:"+486eb4fe82baba",:"+48be54ba54d466",:"+e658ea40f6d656",:"+e8badc6adcf4dc",:"+a47eec66fcea4e",:"+ee04eeaa4ee012",:"+f6a4feacf2acac",:"+28fe2af4aafcaa",:"+eeee82f6dea6f6",:"+f6a4feaceea2b6",:"+fe82ba82baaaba",:"+be22ba22babaa6",:"+feb2feb2febeb2",:"+e85eeaeaea4af6",:"+54feaa387c10fe",:"+107c28fe7c10fe",:"+943e08d45c54be",:"+345ef676567a4a",:"+5eb2fe52fe7ed2",:"+543edc5cfe2818",:"+e4beeabeeea4fe",:"+484e48feecea08",:"+fea8feb0dc94fe",:"+c8dcc87ec47e54",:"+5c947ec47e544c",:"+2e3af4aa7c447c",:"+48be5cdc40726e",:"+486ebc507e02aa",:"+107c10fe54fe7c",:"+a85eba7ea82ade",:"+48fe08be22d4e6",:"+5ed05ed4d66a4a",:"+382828ee8282fe",:"+10feaa4cfe10ee",:"+7e427e487e6abe",:"+16f810527e101e",:"+fea8ecb6ecb6ac",:"+2ef42eaafe203a",:"+1028fe087c7cc6",:"+48bec86afe48ce",:"+7c44feb67824fa",:"+24fe3424fe2444",:"+f656f456f654b4",:"+10fe28c67c54b2",:"+10fe92aac68286",:"+6afa6ab2fe38d6",:"+aac41eac36e4fe",:"+4eaaea5ef27ada",:"+10fe10feaafe92",:"+e84ef6e444e45a",:"+5afe5cfefc2cde",:"+7c00000004fe",:"+7e427e505e509e",:"+6a08fe680434c2",:"+203e62ba223a06",:"+10fe92aa92aa86",:"+40eea4e44464de",:"+7e42427e42427e",:"+70101028284482",:"+3cd4047414fc26",:"+7e427e487a5caa",:"+2458c87e48485c",:"+222cf45e6434ce",:"+7c2c146c10caba",:"+5ed60ad600d2ee",:"+10feaa5cfe1030",:"+286cf46cb600aa",:"+407e907c50fe10",:"+1028de3808c2ba",:"+48d46e5cc472ee",:"+a848ee48fed25e",:"+545eecd46a40aa",:"+6ac2d46a76627e",:"+48be6aaa76e266",:"+2456f476567456",:"+eaa2f4aaf6b2be",:"+287c7c007e68b6",:"+943ebe00beb4da",:"+7eea6a7ee062de",:"+883eaa3cb4c8b6",:"+8438a638b6b4d2",:"+e45e569e7a740a",:"+fe547cae4aee52",:"+7e507c507e02aa",:"+841e942afe28f6",:"+feaafe507e02aa",:"+7edc485cc87ec8",:"+7ec848dcea4848",:"+28ee28fe447c44",:"+e4bee4bef6b6a4",:"+5476d4f6547654",:"+ee42e2eea8eaee",:"+54f65476d476d4",:"+e8aefaaaea04aa",:"+87e7a547e54a6",:"+28ee28fe54fe10",:"+10fe10fe8228ce",:"+287ed47e405c5c",:"+50de4cfed45e44",:"+487ed47e40dc1c",:"+c8fe94fec09c9c",:"+94bed4dcfe5caa",:"+feaafe7c447cc6",:"+e4beeabee00eae",:"+107e427e42427e",:"+285ed25e52525e",:"+48fe527ed252de",:"+883ea23ea2a2be",:"+885e12de525ebe",:"+7f405c5c5c5c",:"+48feb2bef2b2be",:"+4a7edc5c7e544c",:"+28fe9c1cbe148c",:"+107c10fe2850ae",:"+943e9c14be88b6",:"+4abe5c9c7ed44c",:"+7e7ed4fe6a5caa",:"+486eb42afe7aae",:"+486eb418fe34dc",:"+5e56f6de56769e",:"+fcb4f4b4f4b4a6",:"+28282828444482",:"+48bec85cea5cc8",:"+74aa44ba7c28ce",:"+7244f27e1c28d6",:"+2a48de484a445a",:"+50fe505cd468d6",:"+feaafe6a0ae2e6",:"+eeee82aefaaab6",:"+7e407c545448b6",:"+1054107c10fe10",:"+bc24a42ca0a29e",:"+be52b276b032de",:"+5cd4d4dc545466",:"+bc24b42ca4a4c6",:"+2456c45e445e44",:"+22aa22fa22fa26",:"+5e50fe5a5ae41a",:"+ded09edadaa49a",:"+5ed05edada645a",:"+aea8ee8aeab4aa",:"+e64c6cee4cd42e",:"+4f6e4fee4fe04",:"+4eeaa0aeeaa4ba",:"+eea8eeaaea14aa",:"+d67c4cee54d42e",:"+5eb05edada94ea",:"+56fa686efa6cea",:"+5e48fed25e6092",:"+5e548e7a5e50ba",:"+486eb4fe6af82e",:"+86fa74ea7c1092",:"+28fe9c3e942e8c",:"+cf4beeabed426",:"+fe54fe38d67c7c",:"+10fe28ba3814fa",:"+6e6af4aa7c54fe",:"+48487a4c487ace",:"+87e4a7c5448b6",:"+2e22f25e683ace",:"+fe1034d27c447c",:"+54d45e54d45cf6",:"+48be6afc746856",:"+48fe6a7cf468d6",:"+feaaeabee0a2be",:"+28ee28ee28ee48",:"+107c547c28fe08",:"+fc54d27cd65492",:"+87ec45eda54aa",:"+d04ad274fad06e",:"+44fe365efa745a",:"+28ee28ee28c2ba",:"+fe447c765476a4",:"+28fe2afec47cc6",:"+e85e5a9e6c7e04",:"+feaafe54f67456",:"+b43e2af47e44be",:"+7e7e4c784e788e",:"+7e4a7e525e529e",:"+44fe7c10fe10ee",:"+547ed4fe605e56",:"+54be46fe56546a",:"+1038287c54fe48",:"+e4beecb6ecb6ac",:"+e4bee4b4eca4ac",:"+fea8a8aace80fe",:"+201424aab220de",:"+900a9234ba90ae",:"+486eb47e14fe10",:"+5e54feb2de749e",:"+fe107c447c447c",:"+5012f438549230",:"+107c10fc2ae432",:"+287ec87c5a745a",:"+fe547c00fe54b2",:"+bec82ac83ec8c8",:"+be1c9c00be88aa",:"+7edc5cc0fe486a",:"+28fe287c7c547c",:"+c85cda68cac458",:"+87edc7eea76a2",:"+54fe547efe6afe",:"+947ed47efe6abe",:"+7c447c00eeaaee",:"+84189e14be80a2",:"+2844fa287c7cc6",:"+10feba547838c6",:"+2eb4aefabe20ca",:"+84f66a7aaaf42a",:"+be50fc74fc74ba",:"+fe101034d21010",:"+107c10fe1028c6",:"+28c628281028c6",:"+245ec4544c444c",:"+20fe287eaa2a08",:"+48dc487ec854e2",:"+87e525e725a96",:"+50fed0645e5644",:"+1078487c44fe10",:"+eab6d2bab2d296",:"+48e808cc0ae8e8",:"+38c87c447c7cc6",:"+24f426f474609e",:"+8e34801c84be88",:"+5c44feaadc7c88",:"+486eb45ec4544c",:"+10feaa387c547c",:"+44fe6c28fe447c",:"+87e546c7e6ab6",:"+24f66a6afa64aa",:"+80e785e5e5e92",:"+f6c4fed4dc34ba",:"+94fe14b614fedc",:"+305ecc7e545e44",:"+6a08fe145c52fa",:"+2efa5cfa0a6c68",:"+80fe54fe54be44",:"+227e22fa6632c6",:"+7c547c7c545cb6",:"+2a48fe48485462",:"+7e52705e7a54ba",:"+fa567606faaafa",:"+7ed4dcc07e6a7e",:"+509e6ccc544876",:"+5eec2c40fe565e",:"+f0beecacf4a8b6",:"+50fe2c4cf46856",:"+fe547c8c54c876",:"+48e84868d054fa",:"+943e9e34be96a4",:"+2848c84850547a",:"+d0deee4ed66a56",:"+b454e25cd4d46c",:"+5494629c54d46c",:"+38feb644be146c",:"+8fed4fed41c22",:"+487ed47e54dc22",:"+48fed47e545c62",:"+10fe74ba7c547c",:"+282844be1424cc",:"+10fe28281028c6",:"+eeee82febafa8a",:"+fe10fe92aac286",:"+fe543810fe1010",:"+c707c48fe00c6",:"+3440fe547e5464",:"+44fe28aaac28fe",:"+7ec87eeaf66266",:"+e4f6a4f6dc88be",:"+eeaaee92fab2d6",:"+7e62fe746cfe14",:"+966af4aa7c5410",:"+966af4aafe2848",:"+28fe9466dab4da",:"+54a07ed4fe94e4",:"+5410fe1038d610",:"+647e4afe6410fe",:"+646eca64fe3cfe",:"+87ef47eea7eb4",:"+f29afa4a7252b6",:"+28fe547e4a648a",:"+48487e407c4484",:"+be4a0ad26640be",:"+9e501eda546abe",:"+10fe28ba6810ee",:"+3e54dc505e6e4a",:"+be5c10de6e4abe",:"+7e945c905eee4a",:"+1024fa28fe2848",:"+3e5cdc48584876",:"+64ae76762a6abe",:"+105c50fe549a70",:"+3c54dc487e5c6a",:"+afea8beea3e2a",:"+4afe487eea7eea",:"+4afe285efa7e5a",:"+4abe48fe2afeea",:"+3c3424fe547e0c",:"+28fe38fe7caa58",:"+28fe38fe449238",:"+28fe38fe4420aa",:"+28fe38fe44ba38",:"+486eb41cbe148c",:"+10fe203c24448c",:"+407eba0a7a407e",:"+28fe10fe203cc4",:"+2efa2cfa2afc48",:"+107c38fe54ba10",:"+10feba103814fe",:"+50de7a4ada50de",:"+24f64a7a5a54ba",:"+881c883e8894ba",:"+901eba0a9a909e",:"+e8aef6a2eea8ae",:"+285cfe546a5c48",:"+547ed6de6e4c5a",:"+4c5448f6c8fe08",:"+e84e56826e680e",:"+92fe7e5a7e5ab6",:"+48fe10de12d2e6",:"+2e7af85efa742a",:"+4cf4a8f6487ec8",:"+287c7cfe4438fe",:"+48ae56e2ee88ee",:"+10fe54dc2ae432",:"+568a44ba5ed46e",:"+10fe404040403e",:"+7c107c0850609e",:"+48fed05050504e",:"+445ee84e6aca16",:"+445ee8aeca6a96",:"+10fe407c54caba",:"+e4bec8aeaaca96",:"+fe447c487e54ac",:"+e4bee8aeeaaab6",:"+28fe2838fe38d6",:"+fe82fe447c447c",:"+22fa5afa027276",:"+449e48ae4aea56",:"+2efa4e72fe10fe",:"+287ed47e6a4c54",:"+7ee2fed45c545c",:"+48dc7ed4ea5c48",:"+2ec6ea7c447cc6",:"+28de72be72ac56",:"+7c7c28fe5438d6",:"+eabceabcf8aabc",:"+94fe14dc3edcea",:"+7f405c5e5e5c",:"+2828ea2c68aa2e",:"+10fe1038549210",:"+28f8287c6aa828",:"+d0def454d44876",:"+e8bcfeb4e6a8fe",:"+2a7ed47e5c4876",:"+7c54fe00aa10fe",:"+6afe547edc48f6",:"+9c14a61c9488b6",:"+246ef6962af266",:"+7e62fe6e64d61e",:"+10fe103854ba10",:"+10fe28d638fe48",:"+fe6afe6abe7e6a",:"+7c446454544486",:"+2844fa287c54fe",:"+87e547e547e94",:"+87e547e547e98",:"+87e547e545eac",:"+87e547e5c5ca6",:"+407eb4fe547e0c",:"+485ce8bec85caa",:"+50de74d4d44876",:"+8fca8fea8dc2a",:"+7e6afe6a7ec83e",:"+28fe38fe56bc34",:"+eabeecacfea4ba",:"+48fe6acccc5466",:"+7c0424281028c6",:"+10fe107c1038d6",:"+48fe485cc85cea",:"+fe203c2424448c",:"+943e947eaabea2",:"+5cd4fe7e544876",:"+9c14be3e9488b6",:"+107c10fe1038d6",:"+8fca8bee81c2a",:"+48fce8fe5c6abe",:"+7e6a7eeafee808",:"+10feaa60ba547c",:"+10feaa7cb814fa",:"+e4b8e6b8f6b4b2",:"+485cfaa8ca6498",:"+7c447c507e48e6",:"+feb2feb4feb4fa",:"+7c1408fe2ac818",:"+e82e54ea7eaa76",:"+80fe54fe54feaa",:"+28fe54feaa1870",:"+38feb66cfa66aa",:"+445ef2beda749a",:"+3c2458103ed21e",:"+1028de00eeea08",:"+eeaaeeaaee1226",:"+aa083edc6a48be",:"+feba2838fe00c6",:"+eeaaee127c54fe",:"+4eaaf448fe6ace",:"+8dcdcd0de022a",:"+847efc54fed4aa",:"+38c87c547c2ace",:"+fe10feaabaaafe",:"+489c549c7eea48",:"+5ee85e76be56be",:"+28fe287e4a449a",:"+54fe5cd4fe4876",:"+c701ef01ef01e",:"+10fe407cfe28f6",:"+10fe407c7c447c",:"+44f84ef84ef84e",:"+ac44fe48dc5cbe",:"+7ea276fe6aee62",:"+7e427e427e427e",:"+eafee848f600aa",:"+eeaaee82828286",:"+48be549448d462",:"+eeaaee82baaaba",:"+203e52b21e22c6",:"+8808143a809c9c",:"+10fe284eda445a",:"+feb2f4bef624fc",:"+d05ee89cda6ad8",:"+7e405c5454529e",:"+5c9466dc544876",:"+488e52aa46e246",:"+5ed21ed414d2e2",:"+28feba6cfe38d6",:"+eea6ee44eedcee",:"+eeee92feaafeba",:"+10fe92fe9292fe",:"+883eaa3eaaaabe",:"+38d4eec0fa3c2a",:"+48d4ee405a5a5a",:"+48d42ec01adada",:"+e854eee05afa5a",:"+87ec876f452ae",:"+14def4ded4141e",:"+20fe203c5448b6",:"+20fe207ca43c24",:"+7c087c54fe22c6",:"+34dab6dafe92fe",:"+265ad45a00caba",:"+7e2afc6afa2cf8",:"+9e049e1abe8ab6",:"+947ed47ef662be",:"+54e22854e26c4c",:"+943e16da6e54be",:"+2afe2c4e5cac7e",:"+5cfe1caa3cd6e2",:"+fe3838feee10ee",:"+f46e6afe94f6be",:"+3e5cdc7e764876",:"+203c2038fe0818",:"+7c2810fe121030",:"+1028fe10fe54b2",:"+54fe44ba007c7c",:"+ee244eea6e40d2",:"+282eda6a2a5af6",:"+7e527e527e5296",:"+44fe107c10fe10",:"+222cf45e6434ca",:"+943e881c88be88",:"+fe547c10fe28f6",:"+10feaa5428fe38",:"+87e5c7e6a7eaa",:"+5cd47e50de6ad6",:"+46da487ec86afe",:"+28fe5c40fe38d6",:"+dcd4bed0deaa96",:"+883eb60894ae8c",:"+feaceca8feacba",:"+54fe5cfeea5c6a",:"+87ed45cfe56aa",:"+eea4de76def6d6",:"+10feaa7c10feaa",:"+44fe10fe7ab43a",:"+48fe566cf654e6",:"+46da08de08eafe",:"+1eeabee4aefc0e",:"+50ee6a6afa68c8",:"+8418883e8888b6",:"+94228814a29c9c",:"+54862a5484747a",:"+fe5a36da7c28fe",:"+fe5a3658fe00c6",:"+48fe5454d458fe",:"+7eea3e48fe5c6a",:"+feaafe945ef45e",:"+10fe5410fe38d6",:"+38feb6007c547c",:"+2ef47e7a2e70aa",:"+4c94489462dc5c",:"+28fe8c3488369c",:"+e64ae4eab0eeee",:"+48feba7ee85caa",:"+1464fc24745476",:"+2ecaeeaaea2848",:"+e8cee638383ace",:"+b426a036809cbe",:"+28fe684e6038fe",:"+76f66afeea7e6a",:"+10fe547c3010ee",:"+722afa2a72a226",:"+7c547c547c10fe",:"+fe6a7eea7ec83e",:"+87ec876d67a96",:"+10fe547cfe68b6",:"+7e7e586e5a749a",:"+c87e54dc7eee3a",:"+2afe5c6efcbcee",:"+c8dcbed4e688be",:"+10fe44242828fe",:"+48bc4efc487e48",:"+7edcdc487e5c6a",:"+6eae4eaf0ee0e",:"+56e676f6f65464",:"+883e943a989aaa",:"+2ec696ea7c547c",:"+107c28fe547c0e",:"+a87ed454d4d87e",:"+ccd488f6dc88be",:"+e45e489e606a1a",:"+3e52de485e525e",:"+48ee5468ba2c6a",:"+80e785e7e4ab6",:"+80e785e5c72ae",:"+fe041810101030",:"+fe10fe92d6fe82",:"+107c447c5448e6",:"+a454e454c6fc44",:"+883e941c88aa98",:"+aa44be6abe2aca",:"+c8dc88fed4a896",:"+7c44fe547c10fe",:"+287ed47e54486a",:"+5ea4ee0aee6052",:"+10feaa7caa3892",:"+87ed47ed448aa",:"+e8bef4bef4a8ea",:"+bc54fe5cdcc87e",:"+10fe1222224286",:"+5c847e886adc6a",:"+24fe246c76a424",:"+7e6a7e6a7e48be",:"+2854ee407e7e6a",:"+e854eee05efe56",:"+eabccaa0b4dea4",:"+f4a6fe96f0aefe",:"+ce7666fa5cdc1c",:"+be129e149ea49a",:"+7c547c24fa1092",:"+7c547c8244927c",:"+ae74ae2afe20da",:"+1028de00fe1210",:"+48e82848e84a4e",:"+88142e00be8a88",:"+f48ef6a6b6daba",:"+fe447c487e48b6",:"+3a56de6e5a5266",:"+48b4ee40fe6ac8",:"+38feb628fe1210",:"+38feb600ba54fe",:"+48fc4efc1aec5a",:"+24baeeb0deb6f4",:"+eeaa7e547e64b6",:"+7e547e547e62be",:"+7e547e544654be",:"+f24a6aaa624286",:"+10549a30fe22c6",:"+f24a6aa24600aa",:"+f26aaa42fe68b6",:"+10fe28aa00caba",:"+883e1cdc7e48be",:"+87e5c4e7e5caa",:"+48be5c9c48dc6a",:"+48bedc5cc85cea",:"+3c243c107e427e",:"+5e40ded25e50a0",:"+e6aae4aaf00eae",:"+e6aae44af0ceee",:"+38feb6eaa45aee",:"+127c18fe3cd01e",:"+54fe927c1424cc",:"+7c107c28fe2848",:"+4eeaacea8aace8",:"+4eeaaeea8eaad6",:"+883ca43caaa4b2",:"+87e5674766eb4",:"+6adc6ad0fe547a",:"+be3ea03ea8de9a",:"+486ef456fa7456",:"+10fe0028284482",:"+5ca4fe48ea5cea",:"+44ee7e547e64b6",:"+48d42ec03efeea",:"+702efa2a7aaa2e",:"+44d83ec81cd4dc",:"+e8bee8aefa0eaa",:"+e8beeaa0eabeaa",:"+afe64ea00caba",:"+50fc54e6c87e48",:"+883e94369c9e82",:"+e4bef2aef6acb6"},Od={"#":["2","","Copyright(C) 2002-2021 Num Kadoma","","These fonts are free softwares.","","Unlimited permission is granted to use, copy, and distribute it,","with or without modification, either commercially and noncommercially.",'THESE FONTS ARE PROVIDED "AS IS" WITHOUT WARRANTY.'],scale:Md,format:Nd,table:Bd},Fd=t=>({...t," ":"-0","":"+0"});class Dd{constructor(e,r,i=Od){V(this,"binarySize");V(this,"fontSize");V(this,"_canvas");this._canvas=document.createElement("canvas");const s=Fd(i.table);this.fontSize=i.scale*8,this.binarySize=(+`0b${"1".repeat(this.fontSize)}`).toString(16).length;const n=[...e].map(h=>this.unzip(s[h])),a=n.reduce((h,f)=>h+(f!=null&&f.isHalf?.5:1)*this.fontSize,0);this._canvas.width=a,this._canvas.height=this.fontSize;const o=this._canvas.getContext("2d");let c=0;for(let h=0;h<n.length;h++){const{isHalf:f,content:l}=n[h],u=f?this.fontSize/2:this.fontSize;for(let b=0;b<this.fontSize;b++)for(let y=0;y<u;y++)l?(o.fillStyle=`#${r.toString(16).padStart(6,"0")}`,l[b][y]===1&&o.fillRect(c+y,b,1,1)):(o.fillStyle=`#${(Math.random()*16777215|0).toString(16).padStart(6,"0")}`,o.fillRect(c+y,b,1,1));c+=u}}get canvas(){return this._canvas}get size(){return U(this._canvas.width,this._canvas.height)}unzip(e){try{const r=e.slice(0,1)==="-",i=e.slice(1),n="0".repeat(this.fontSize*(r?this.binarySize/2:this.binarySize)-i.length)+i,o=n.match(new RegExp(`.{${n.length/this.fontSize}}`,"g")).map(c=>(+`0x${c}`).toString(2).padStart(r?this.fontSize/2:this.fontSize,"0")).map(c=>[...c].map(Number));return{isHalf:r,content:o}}catch{return{isHalf:!1,content:null}}}}class Ld extends Sr{constructor(e,r,{backgroundColor:i=16777215,textColor:s=0,borderRadius:n=8,padding:a=1}={}){const o=new Dd(r,s),c=ru(o.size,$t.wh(e)),h=new Js(U(e.width,e.height),f=>{vd(f,i,$t(a,a,e.width-a*2,e.height-a*2),n),f.drawImage(o.canvas,c.x,c.y)});super({name:"button",placement:{position:U(e.x,e.y),size:U(e.width,e.height)},shape:"BOX",render:h})}}class Ud extends Ro{constructor(){super("main")}setup(e){return[this.addEntity(new Ld($t(32,16,64,16),""))]}update(e){const{button:r}=this.getEntities();tu(e.input.getMousePosition(),r.globalRect)&&e.input.isMouseTriggered("LEFT")&&e.changeScene("col-test")}}new yd([new Ud,new Cd]);

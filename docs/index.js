var Pa=Object.defineProperty;var Na=(e,t,r)=>t in e?Pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var V=(e,t,r)=>(Na(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();var Ie=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Ie||{}),lo=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(lo||{}),os=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(os||{}),k=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(k||{}),ii=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(ii||{}),F=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(F||{}),Fe=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Fe||{}),J=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(J||{}),as=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(as||{}),vt=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(vt||{}),Us=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(Us||{}),xe=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(xe||{}),ne=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(ne||{}),ue=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(ue||{}),Qs=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(Qs||{}),bt=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(bt||{}),ht=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(ht||{}),at=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(at||{}),Gt=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(Gt||{});const Fa={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},j={ADAPTER:Fa,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Si=/iPhone/i,rn=/iPod/i,sn=/iPad/i,nn=/\biOS-universal(?:.+)Mac\b/i,Ri=/\bAndroid(?:.+)Mobile\b/i,on=/Android/i,Be=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Cr=/Silk/i,Wt=/Windows Phone/i,an=/\bWindows(?:.+)ARM\b/i,hn=/BlackBerry/i,ln=/BB10/i,cn=/Opera Mini/i,un=/\b(CriOS|Chrome)(?:.+)Mobile/i,fn=/Mobile(?:.+)Firefox\b/i,dn=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function Da(e){return function(t){return t.test(e)}}function An(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var s=Da(r),n={apple:{phone:s(Si)&&!s(Wt),ipod:s(rn),tablet:!s(Si)&&(s(sn)||dn(t))&&!s(Wt),universal:s(nn),device:(s(Si)||s(rn)||s(sn)||s(nn)||dn(t))&&!s(Wt)},amazon:{phone:s(Be),tablet:!s(Be)&&s(Cr),device:s(Be)||s(Cr)},android:{phone:!s(Wt)&&s(Be)||!s(Wt)&&s(Ri),tablet:!s(Wt)&&!s(Be)&&!s(Ri)&&(s(Cr)||s(on)),device:!s(Wt)&&(s(Be)||s(Cr)||s(Ri)||s(on))||s(/\bokhttp\b/i)},windows:{phone:s(Wt),tablet:s(an),device:s(Wt)||s(an)},other:{blackberry:s(hn),blackberry10:s(ln),opera:s(cn),firefox:s(fn),chrome:s(un),device:s(hn)||s(ln)||s(cn)||s(fn)||s(un)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const Oa=An.default??An,Me=Oa(globalThis.navigator);j.RETINA_PREFIX=/@([0-9\.]+)x/;j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ua(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qa(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),r}var co={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(h,l,c){this.fn=h,this.context=l,this.once=c||!1}function n(h,l,c,u,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var y=new s(c,u||h,f),m=r?r+l:l;return h._events[m]?h._events[m].fn?h._events[m]=[h._events[m],y]:h._events[m].push(y):(h._events[m]=y,h._eventsCount++),h}function o(h,l){--h._eventsCount===0?h._events=new i:delete h._events[l]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)t.call(c,u)&&l.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=r?r+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var f=0,y=u.length,m=new Array(y);f<y;f++)m[f]=u[f].fn;return m},a.prototype.listenerCount=function(l){var c=r?r+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,f,y,m){var B=r?r+l:l;if(!this._events[B])return!1;var I=this._events[B],w=arguments.length,A,d;if(I.fn){switch(I.once&&this.removeListener(l,I.fn,void 0,!0),w){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,c),!0;case 3:return I.fn.call(I.context,c,u),!0;case 4:return I.fn.call(I.context,c,u,f),!0;case 5:return I.fn.call(I.context,c,u,f,y),!0;case 6:return I.fn.call(I.context,c,u,f,y,m),!0}for(d=1,A=new Array(w-1);d<w;d++)A[d-1]=arguments[d];I.fn.apply(I.context,A)}else{var x=I.length,_;for(d=0;d<x;d++)switch(I[d].once&&this.removeListener(l,I[d].fn,void 0,!0),w){case 1:I[d].fn.call(I[d].context);break;case 2:I[d].fn.call(I[d].context,c);break;case 3:I[d].fn.call(I[d].context,c,u);break;case 4:I[d].fn.call(I[d].context,c,u,f);break;default:if(!A)for(_=1,A=new Array(w-1);_<w;_++)A[_-1]=arguments[_];I[d].fn.apply(I[d].context,A)}}return!0},a.prototype.on=function(l,c,u){return n(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return n(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,f){var y=r?r+l:l;if(!this._events[y])return this;if(!c)return o(this,y),this;var m=this._events[y];if(m.fn)m.fn===c&&(!f||m.once)&&(!u||m.context===u)&&o(this,y);else{for(var B=0,I=[],w=m.length;B<w;B++)(m[B].fn!==c||f&&!m[B].once||u&&m[B].context!==u)&&I.push(m[B]);I.length?this._events[y]=I.length===1?I[0]:I:o(this,y)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(co);var ka=co.exports;const yr=Ua(ka);var uo={exports:{}};uo.exports=Ai;uo.exports.default=Ai;function Ai(e,t,r){r=r||2;var i=t&&t.length,s=i?t[0]*r:e.length,n=fo(e,0,s,r,!0),o=[];if(!n||n.next===n.prev)return o;var a,h,l,c,u,f,y;if(i&&(n=Xa(e,t,n,r)),e.length>80*r){a=l=e[0],h=c=e[1];for(var m=r;m<s;m+=r)u=e[m],f=e[m+1],u<a&&(a=u),f<h&&(h=f),u>l&&(l=u),f>c&&(c=f);y=Math.max(l-a,c-h),y=y!==0?32767/y:0}return ur(n,o,r,a,h,y,0),o}function fo(e,t,r,i,s){var n,o;if(s===cs(e,t,r,i)>0)for(n=t;n<r;n+=i)o=pn(n,e[n],e[n+1],o);else for(n=r-i;n>=t;n-=i)o=pn(n,e[n],e[n+1],o);return o&&pi(o,o.next)&&(dr(o),o=o.next),o}function _e(e,t){if(!e)return e;t||(t=e);var r=e,i;do if(i=!1,!r.steiner&&(pi(r,r.next)||nt(r.prev,r,r.next)===0)){if(dr(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function ur(e,t,r,i,s,n,o){if(e){!o&&n&&Ja(e,i,s,n);for(var a=e,h,l;e.prev!==e.next;){if(h=e.prev,l=e.next,n?Ga(e,i,s,n):La(e)){t.push(h.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),dr(e),e=l.next,a=l.next;continue}if(e=l,e===a){o?o===1?(e=Va(_e(e),t,r),ur(e,t,r,i,s,n,2)):o===2&&Ha(e,t,r,i,s,n):ur(_e(e),t,r,i,s,n,1);break}}}}function La(e){var t=e.prev,r=e,i=e.next;if(nt(t,r,i)>=0)return!1;for(var s=t.x,n=r.x,o=i.x,a=t.y,h=r.y,l=i.y,c=s<n?s<o?s:o:n<o?n:o,u=a<h?a<l?a:l:h<l?h:l,f=s>n?s>o?s:o:n>o?n:o,y=a>h?a>l?a:l:h>l?h:l,m=i.next;m!==t;){if(m.x>=c&&m.x<=f&&m.y>=u&&m.y<=y&&Pe(s,a,n,h,o,l,m.x,m.y)&&nt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Ga(e,t,r,i){var s=e.prev,n=e,o=e.next;if(nt(s,n,o)>=0)return!1;for(var a=s.x,h=n.x,l=o.x,c=s.y,u=n.y,f=o.y,y=a<h?a<l?a:l:h<l?h:l,m=c<u?c<f?c:f:u<f?u:f,B=a>h?a>l?a:l:h>l?h:l,I=c>u?c>f?c:f:u>f?u:f,w=hs(y,m,t,r,i),A=hs(B,I,t,r,i),d=e.prevZ,x=e.nextZ;d&&d.z>=w&&x&&x.z<=A;){if(d.x>=y&&d.x<=B&&d.y>=m&&d.y<=I&&d!==s&&d!==o&&Pe(a,c,h,u,l,f,d.x,d.y)&&nt(d.prev,d,d.next)>=0||(d=d.prevZ,x.x>=y&&x.x<=B&&x.y>=m&&x.y<=I&&x!==s&&x!==o&&Pe(a,c,h,u,l,f,x.x,x.y)&&nt(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;d&&d.z>=w;){if(d.x>=y&&d.x<=B&&d.y>=m&&d.y<=I&&d!==s&&d!==o&&Pe(a,c,h,u,l,f,d.x,d.y)&&nt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;x&&x.z<=A;){if(x.x>=y&&x.x<=B&&x.y>=m&&x.y<=I&&x!==s&&x!==o&&Pe(a,c,h,u,l,f,x.x,x.y)&&nt(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Va(e,t,r){var i=e;do{var s=i.prev,n=i.next.next;!pi(s,n)&&Ao(s,i,i.next,n)&&fr(s,n)&&fr(n,s)&&(t.push(s.i/r|0),t.push(i.i/r|0),t.push(n.i/r|0),dr(i),dr(i.next),i=e=n),i=i.next}while(i!==e);return _e(i)}function Ha(e,t,r,i,s,n){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&qa(o,a)){var h=po(o,a);o=_e(o,o.next),h=_e(h,h.next),ur(o,t,r,i,s,n,0),ur(h,t,r,i,s,n,0);return}a=a.next}o=o.next}while(o!==e)}function Xa(e,t,r,i){var s=[],n,o,a,h,l;for(n=0,o=t.length;n<o;n++)a=t[n]*i,h=n<o-1?t[n+1]*i:e.length,l=fo(e,a,h,i,!1),l===l.next&&(l.steiner=!0),s.push(Za(l));for(s.sort(Wa),n=0;n<s.length;n++)r=ja(s[n],r);return r}function Wa(e,t){return e.x-t.x}function ja(e,t){var r=Ya(e,t);if(!r)return t;var i=po(r,e);return _e(i,i.next),_e(r,r.next)}function Ya(e,t){var r=t,i=e.x,s=e.y,n=-1/0,o;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>n&&(n=a,o=r.x<r.next.x?r:r.next,a===i))return o}r=r.next}while(r!==t);if(!o)return null;var h=o,l=o.x,c=o.y,u=1/0,f;r=o;do i>=r.x&&r.x>=l&&i!==r.x&&Pe(s<c?i:n,s,l,c,s<c?n:i,s,r.x,r.y)&&(f=Math.abs(s-r.y)/(i-r.x),fr(r,e)&&(f<u||f===u&&(r.x>o.x||r.x===o.x&&za(o,r)))&&(o=r,u=f)),r=r.next;while(r!==h);return o}function za(e,t){return nt(e.prev,e,t.prev)<0&&nt(t.next,e,e.next)<0}function Ja(e,t,r,i){var s=e;do s.z===0&&(s.z=hs(s.x,s.y,t,r,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,Ka(s)}function Ka(e){var t,r,i,s,n,o,a,h,l=1;do{for(r=e,e=null,n=null,o=0;r;){for(o++,i=r,a=0,t=0;t<l&&(a++,i=i.nextZ,!!i);t++);for(h=l;a>0||h>0&&i;)a!==0&&(h===0||!i||r.z<=i.z)?(s=r,r=r.nextZ,a--):(s=i,i=i.nextZ,h--),n?n.nextZ=s:e=s,s.prevZ=n,n=s;r=i}n.nextZ=null,l*=2}while(o>1);return e}function hs(e,t,r,i,s){return e=(e-r)*s|0,t=(t-i)*s|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Za(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Pe(e,t,r,i,s,n,o,a){return(s-o)*(t-a)>=(e-o)*(n-a)&&(e-o)*(i-a)>=(r-o)*(t-a)&&(r-o)*(n-a)>=(s-o)*(i-a)}function qa(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!$a(e,t)&&(fr(e,t)&&fr(t,e)&&th(e,t)&&(nt(e.prev,e,t.prev)||nt(e,t.prev,t))||pi(e,t)&&nt(e.prev,e,e.next)>0&&nt(t.prev,t,t.next)>0)}function nt(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function pi(e,t){return e.x===t.x&&e.y===t.y}function Ao(e,t,r,i){var s=Rr(nt(e,t,r)),n=Rr(nt(e,t,i)),o=Rr(nt(r,i,e)),a=Rr(nt(r,i,t));return!!(s!==n&&o!==a||s===0&&Sr(e,r,t)||n===0&&Sr(e,i,t)||o===0&&Sr(r,e,i)||a===0&&Sr(r,t,i))}function Sr(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Rr(e){return e>0?1:e<0?-1:0}function $a(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Ao(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function fr(e,t){return nt(e.prev,e,e.next)<0?nt(e,t,e.next)>=0&&nt(e,e.prev,t)>=0:nt(e,t,e.prev)<0||nt(e,e.next,t)<0}function th(e,t){var r=e,i=!1,s=(e.x+t.x)/2,n=(e.y+t.y)/2;do r.y>n!=r.next.y>n&&r.next.y!==r.y&&s<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function po(e,t){var r=new ls(e.i,e.x,e.y),i=new ls(t.i,t.x,t.y),s=e.next,n=t.prev;return e.next=t,t.prev=e,r.next=s,s.prev=r,i.next=r,r.prev=i,n.next=i,i.prev=n,i}function pn(e,t,r,i){var s=new ls(e,t,r);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function dr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ls(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ai.deviation=function(e,t,r,i){var s=t&&t.length,n=s?t[0]*r:e.length,o=Math.abs(cs(e,0,n,r));if(s)for(var a=0,h=t.length;a<h;a++){var l=t[a]*r,c=a<h-1?t[a+1]*r:e.length;o-=Math.abs(cs(e,l,c,r))}var u=0;for(a=0;a<i.length;a+=3){var f=i[a]*r,y=i[a+1]*r,m=i[a+2]*r;u+=Math.abs((e[f]-e[m])*(e[y+1]-e[f+1])-(e[f]-e[y])*(e[m+1]-e[f+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function cs(e,t,r,i){for(var s=0,n=t,o=r-i;n<r;n+=i)s+=(e[o]-e[n])*(e[n+1]+e[o+1]),o=n;return s}Ai.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,s=0;s<e.length;s++){for(var n=0;n<e[s].length;n++)for(var o=0;o<t;o++)r.vertices.push(e[s][n][o]);s>0&&(i+=e[s-1].length,r.holes.push(i))}return r};var si={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */si.exports;(function(e,t){(function(r){var i=t&&!t.nodeType&&t,s=e&&!e.nodeType&&e,n=typeof Nt=="object"&&Nt;(n.global===n||n.window===n||n.self===n)&&(r=n);var o,a=2147483647,h=36,l=1,c=26,u=38,f=700,y=72,m=128,B="-",I=/^xn--/,w=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=h-l,_=Math.floor,E=String.fromCharCode,T;function b(P){throw new RangeError(d[P])}function v(P,O){for(var U=P.length,Y=[];U--;)Y[U]=O(P[U]);return Y}function g(P,O){var U=P.split("@"),Y="";U.length>1&&(Y=U[0]+"@",P=U[1]),P=P.replace(A,".");var z=P.split("."),ot=v(z,O).join(".");return Y+ot}function p(P){for(var O=[],U=0,Y=P.length,z,ot;U<Y;)z=P.charCodeAt(U++),z>=55296&&z<=56319&&U<Y?(ot=P.charCodeAt(U++),(ot&64512)==56320?O.push(((z&1023)<<10)+(ot&1023)+65536):(O.push(z),U--)):O.push(z);return O}function C(P){return v(P,function(O){var U="";return O>65535&&(O-=65536,U+=E(O>>>10&1023|55296),O=56320|O&1023),U+=E(O),U}).join("")}function S(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:h}function M(P,O){return P+22+75*(P<26)-((O!=0)<<5)}function N(P,O,U){var Y=0;for(P=U?_(P/f):P>>1,P+=_(P/O);P>x*c>>1;Y+=h)P=_(P/x);return _(Y+(x+1)*P/(P+u))}function R(P){var O=[],U=P.length,Y,z=0,ot=m,tt=y,dt,Et,Ot,Xt,At,It,Ct,Zt,he;for(dt=P.lastIndexOf(B),dt<0&&(dt=0),Et=0;Et<dt;++Et)P.charCodeAt(Et)>=128&&b("not-basic"),O.push(P.charCodeAt(Et));for(Ot=dt>0?dt+1:0;Ot<U;){for(Xt=z,At=1,It=h;Ot>=U&&b("invalid-input"),Ct=S(P.charCodeAt(Ot++)),(Ct>=h||Ct>_((a-z)/At))&&b("overflow"),z+=Ct*At,Zt=It<=tt?l:It>=tt+c?c:It-tt,!(Ct<Zt);It+=h)he=h-Zt,At>_(a/he)&&b("overflow"),At*=he;Y=O.length+1,tt=N(z-Xt,Y,Xt==0),_(z/Y)>a-ot&&b("overflow"),ot+=_(z/Y),z%=Y,O.splice(z++,0,ot)}return C(O)}function L(P){var O,U,Y,z,ot,tt,dt,Et,Ot,Xt,At,It=[],Ct,Zt,he,Ci;for(P=p(P),Ct=P.length,O=m,U=0,ot=y,tt=0;tt<Ct;++tt)At=P[tt],At<128&&It.push(E(At));for(Y=z=It.length,z&&It.push(B);Y<Ct;){for(dt=a,tt=0;tt<Ct;++tt)At=P[tt],At>=O&&At<dt&&(dt=At);for(Zt=Y+1,dt-O>_((a-U)/Zt)&&b("overflow"),U+=(dt-O)*Zt,O=dt,tt=0;tt<Ct;++tt)if(At=P[tt],At<O&&++U>a&&b("overflow"),At==O){for(Et=U,Ot=h;Xt=Ot<=ot?l:Ot>=ot+c?c:Ot-ot,!(Et<Xt);Ot+=h)Ci=Et-Xt,he=h-Xt,It.push(E(M(Xt+Ci%he,0))),Et=_(Ci/he);It.push(E(M(Et,0))),ot=N(U,Zt,Y==z),U=0,++Y}++U,++O}return It.join("")}function X(P){return g(P,function(O){return I.test(O)?R(O.slice(4).toLowerCase()):O})}function $(P){return g(P,function(O){return w.test(O)?"xn--"+L(O):O})}if(o={version:"1.4.1",ucs2:{decode:p,encode:C},decode:R,encode:L,toASCII:$,toUnicode:X},i&&s)if(e.exports==i)s.exports=o;else for(T in o)o.hasOwnProperty(T)&&(i[T]=o[T]);else r.punycode=o})(Nt)})(si,si.exports);var eh=si.exports,rh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;t[r]=s;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0},mn=typeof Symbol<"u"&&Symbol,ih=rh,sh=function(){return typeof mn!="function"||typeof Symbol!="function"||typeof mn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ih()},gn={foo:{}},nh=Object,oh=function(){return{__proto__:gn}.foo===gn.foo&&!({__proto__:null}instanceof nh)},ah="Function.prototype.bind called on incompatible ",Mi=Array.prototype.slice,hh=Object.prototype.toString,lh="[object Function]",ch=function(t){var r=this;if(typeof r!="function"||hh.call(r)!==lh)throw new TypeError(ah+r);for(var i=Mi.call(arguments,1),s,n=function(){if(this instanceof s){var c=r.apply(this,i.concat(Mi.call(arguments)));return Object(c)===c?c:this}else return r.apply(t,i.concat(Mi.call(arguments)))},o=Math.max(0,r.length-i.length),a=[],h=0;h<o;h++)a.push("$"+h);if(s=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(n),r.prototype){var l=function(){};l.prototype=r.prototype,s.prototype=new l,l.prototype=null}return s},uh=ch,ks=Function.prototype.bind||uh,fh=ks,dh=fh.call(Function.call,Object.prototype.hasOwnProperty),H,ke=SyntaxError,mo=Function,De=TypeError,Pi=function(e){try{return mo('"use strict"; return ('+e+").constructor;")()}catch{}},ve=Object.getOwnPropertyDescriptor;if(ve)try{ve({},"")}catch{ve=null}var Ni=function(){throw new De},Ah=ve?function(){try{return arguments.callee,Ni}catch{try{return ve(arguments,"callee").get}catch{return Ni}}}():Ni,be=sh(),ph=oh(),ct=Object.getPrototypeOf||(ph?function(e){return e.__proto__}:null),Ce={},mh=typeof Uint8Array>"u"||!ct?H:ct(Uint8Array),Ee={"%AggregateError%":typeof AggregateError>"u"?H:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?H:ArrayBuffer,"%ArrayIteratorPrototype%":be&&ct?ct([][Symbol.iterator]()):H,"%AsyncFromSyncIteratorPrototype%":H,"%AsyncFunction%":Ce,"%AsyncGenerator%":Ce,"%AsyncGeneratorFunction%":Ce,"%AsyncIteratorPrototype%":Ce,"%Atomics%":typeof Atomics>"u"?H:Atomics,"%BigInt%":typeof BigInt>"u"?H:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?H:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?H:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?H:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?H:Float32Array,"%Float64Array%":typeof Float64Array>"u"?H:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?H:FinalizationRegistry,"%Function%":mo,"%GeneratorFunction%":Ce,"%Int8Array%":typeof Int8Array>"u"?H:Int8Array,"%Int16Array%":typeof Int16Array>"u"?H:Int16Array,"%Int32Array%":typeof Int32Array>"u"?H:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":be&&ct?ct(ct([][Symbol.iterator]())):H,"%JSON%":typeof JSON=="object"?JSON:H,"%Map%":typeof Map>"u"?H:Map,"%MapIteratorPrototype%":typeof Map>"u"||!be||!ct?H:ct(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?H:Promise,"%Proxy%":typeof Proxy>"u"?H:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?H:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?H:Set,"%SetIteratorPrototype%":typeof Set>"u"||!be||!ct?H:ct(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?H:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":be&&ct?ct(""[Symbol.iterator]()):H,"%Symbol%":be?Symbol:H,"%SyntaxError%":ke,"%ThrowTypeError%":Ah,"%TypedArray%":mh,"%TypeError%":De,"%Uint8Array%":typeof Uint8Array>"u"?H:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?H:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?H:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?H:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?H:WeakMap,"%WeakRef%":typeof WeakRef>"u"?H:WeakRef,"%WeakSet%":typeof WeakSet>"u"?H:WeakSet};if(ct)try{null.error}catch(e){var gh=ct(ct(e));Ee["%Error.prototype%"]=gh}var yh=function e(t){var r;if(t==="%AsyncFunction%")r=Pi("async function () {}");else if(t==="%GeneratorFunction%")r=Pi("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Pi("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=e("%AsyncGenerator%");s&&ct&&(r=ct(s.prototype))}return Ee[t]=r,r},yn={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vr=ks,ni=dh,vh=vr.call(Function.call,Array.prototype.concat),Eh=vr.call(Function.apply,Array.prototype.splice),vn=vr.call(Function.call,String.prototype.replace),oi=vr.call(Function.call,String.prototype.slice),xh=vr.call(Function.call,RegExp.prototype.exec),_h=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ih=/\\(\\)?/g,Bh=function(t){var r=oi(t,0,1),i=oi(t,-1);if(r==="%"&&i!=="%")throw new ke("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new ke("invalid intrinsic syntax, expected opening `%`");var s=[];return vn(t,_h,function(n,o,a,h){s[s.length]=a?vn(h,Ih,"$1"):o||n}),s},bh=function(t,r){var i=t,s;if(ni(yn,i)&&(s=yn[i],i="%"+s[0]+"%"),ni(Ee,i)){var n=Ee[i];if(n===Ce&&(n=yh(i)),typeof n>"u"&&!r)throw new De("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:n}}throw new ke("intrinsic "+t+" does not exist!")},Ls=function(t,r){if(typeof t!="string"||t.length===0)throw new De("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new De('"allowMissing" argument must be a boolean');if(xh(/^%?[^%]*%?$/,t)===null)throw new ke("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Bh(t),s=i.length>0?i[0]:"",n=bh("%"+s+"%",r),o=n.name,a=n.value,h=!1,l=n.alias;l&&(s=l[0],Eh(i,vh([0,1],l)));for(var c=1,u=!0;c<i.length;c+=1){var f=i[c],y=oi(f,0,1),m=oi(f,-1);if((y==='"'||y==="'"||y==="`"||m==='"'||m==="'"||m==="`")&&y!==m)throw new ke("property names with quotes must have matching quotes");if((f==="constructor"||!u)&&(h=!0),s+="."+f,o="%"+s+"%",ni(Ee,o))a=Ee[o];else if(a!=null){if(!(f in a)){if(!r)throw new De("base intrinsic for "+t+" exists, but the property is not available.");return}if(ve&&c+1>=i.length){var B=ve(a,f);u=!!B,u&&"get"in B&&!("originalValue"in B.get)?a=B.get:a=a[f]}else u=ni(a,f),a=a[f];u&&!h&&(Ee[o]=a)}}return a},go={exports:{}};(function(e){var t=ks,r=Ls,i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),n=r("%Reflect.apply%",!0)||t.call(s,i),o=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),h=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}e.exports=function(u){var f=n(t,s,arguments);if(o&&a){var y=o(f,"length");y.configurable&&a(f,"length",{value:1+h(0,u.length-(arguments.length-1))})}return f};var l=function(){return n(t,i,arguments)};a?a(e.exports,"apply",{value:l}):e.exports.apply=l})(go);var Th=go.exports,yo=Ls,vo=Th,wh=vo(yo("String.prototype.indexOf")),Ch=function(t,r){var i=yo(t,!!r);return typeof i=="function"&&wh(t,".prototype.")>-1?vo(i):i};const Sh={},Rh=Object.freeze(Object.defineProperty({__proto__:null,default:Sh},Symbol.toStringTag,{value:"Module"})),Mh=Qa(Rh);var Gs=typeof Map=="function"&&Map.prototype,Fi=Object.getOwnPropertyDescriptor&&Gs?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ai=Gs&&Fi&&typeof Fi.get=="function"?Fi.get:null,En=Gs&&Map.prototype.forEach,Vs=typeof Set=="function"&&Set.prototype,Di=Object.getOwnPropertyDescriptor&&Vs?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,hi=Vs&&Di&&typeof Di.get=="function"?Di.get:null,xn=Vs&&Set.prototype.forEach,Ph=typeof WeakMap=="function"&&WeakMap.prototype,nr=Ph?WeakMap.prototype.has:null,Nh=typeof WeakSet=="function"&&WeakSet.prototype,or=Nh?WeakSet.prototype.has:null,Fh=typeof WeakRef=="function"&&WeakRef.prototype,_n=Fh?WeakRef.prototype.deref:null,Dh=Boolean.prototype.valueOf,Oh=Object.prototype.toString,Uh=Function.prototype.toString,Qh=String.prototype.match,Hs=String.prototype.slice,ee=String.prototype.replace,kh=String.prototype.toUpperCase,In=String.prototype.toLowerCase,Eo=RegExp.prototype.test,Bn=Array.prototype.concat,Lt=Array.prototype.join,Lh=Array.prototype.slice,bn=Math.floor,us=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Oi=Object.getOwnPropertySymbols,fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Le=typeof Symbol=="function"&&typeof Symbol.iterator=="object",gt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Le||"symbol")?Symbol.toStringTag:null,xo=Object.prototype.propertyIsEnumerable,Tn=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function wn(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Eo.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var i=e<0?-bn(-e):bn(e);if(i!==e){var s=String(i),n=Hs.call(t,s.length+1);return ee.call(s,r,"$&_")+"."+ee.call(ee.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ee.call(t,r,"$&_")}var ds=Mh,Cn=ds.custom,Sn=Io(Cn)?Cn:null,Gh=function e(t,r,i,s){var n=r||{};if($t(n,"quoteStyle")&&n.quoteStyle!=="single"&&n.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if($t(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=$t(n,"customInspect")?n.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if($t(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if($t(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return bo(t,n);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var h=String(t);return a?wn(t,h):h}if(typeof t=="bigint"){var l=String(t)+"n";return a?wn(t,l):l}var c=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=c&&c>0&&typeof t=="object")return As(t)?"[Array]":"[Object]";var u=nl(n,i);if(typeof s>"u")s=[];else if(Bo(s,t)>=0)return"[Circular]";function f(S,M,N){if(M&&(s=Lh.call(s),s.push(M)),N){var R={depth:n.depth};return $t(n,"quoteStyle")&&(R.quoteStyle=n.quoteStyle),e(S,R,i+1,s)}return e(S,n,i+1,s)}if(typeof t=="function"&&!Rn(t)){var y=Kh(t),m=Mr(t,f);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(m.length>0?" { "+Lt.call(m,", ")+" }":"")}if(Io(t)){var B=Le?ee.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):fs.call(t);return typeof t=="object"&&!Le?Ze(B):B}if(rl(t)){for(var I="<"+In.call(String(t.nodeName)),w=t.attributes||[],A=0;A<w.length;A++)I+=" "+w[A].name+"="+_o(Vh(w[A].value),"double",n);return I+=">",t.childNodes&&t.childNodes.length&&(I+="..."),I+="</"+In.call(String(t.nodeName))+">",I}if(As(t)){if(t.length===0)return"[]";var d=Mr(t,f);return u&&!sl(d)?"["+ps(d,u)+"]":"[ "+Lt.call(d,", ")+" ]"}if(Xh(t)){var x=Mr(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!xo.call(t,"cause")?"{ ["+String(t)+"] "+Lt.call(Bn.call("[cause]: "+f(t.cause),x),", ")+" }":x.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Lt.call(x,", ")+" }"}if(typeof t=="object"&&o){if(Sn&&typeof t[Sn]=="function"&&ds)return ds(t,{depth:c-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Zh(t)){var _=[];return En&&En.call(t,function(S,M){_.push(f(M,t,!0)+" => "+f(S,t))}),Mn("Map",ai.call(t),_,u)}if(tl(t)){var E=[];return xn&&xn.call(t,function(S){E.push(f(S,t))}),Mn("Set",hi.call(t),E,u)}if(qh(t))return Ui("WeakMap");if(el(t))return Ui("WeakSet");if($h(t))return Ui("WeakRef");if(jh(t))return Ze(f(Number(t)));if(zh(t))return Ze(f(us.call(t)));if(Yh(t))return Ze(Dh.call(t));if(Wh(t))return Ze(f(String(t)));if(!Hh(t)&&!Rn(t)){var T=Mr(t,f),b=Tn?Tn(t)===Object.prototype:t instanceof Object||t.constructor===Object,v=t instanceof Object?"":"null prototype",g=!b&&gt&&Object(t)===t&&gt in t?Hs.call(oe(t),8,-1):v?"Object":"",p=b||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",C=p+(g||v?"["+Lt.call(Bn.call([],g||[],v||[]),": ")+"] ":"");return T.length===0?C+"{}":u?C+"{"+ps(T,u)+"}":C+"{ "+Lt.call(T,", ")+" }"}return String(t)};function _o(e,t,r){var i=(r.quoteStyle||t)==="double"?'"':"'";return i+e+i}function Vh(e){return ee.call(String(e),/"/g,"&quot;")}function As(e){return oe(e)==="[object Array]"&&(!gt||!(typeof e=="object"&&gt in e))}function Hh(e){return oe(e)==="[object Date]"&&(!gt||!(typeof e=="object"&&gt in e))}function Rn(e){return oe(e)==="[object RegExp]"&&(!gt||!(typeof e=="object"&&gt in e))}function Xh(e){return oe(e)==="[object Error]"&&(!gt||!(typeof e=="object"&&gt in e))}function Wh(e){return oe(e)==="[object String]"&&(!gt||!(typeof e=="object"&&gt in e))}function jh(e){return oe(e)==="[object Number]"&&(!gt||!(typeof e=="object"&&gt in e))}function Yh(e){return oe(e)==="[object Boolean]"&&(!gt||!(typeof e=="object"&&gt in e))}function Io(e){if(Le)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!fs)return!1;try{return fs.call(e),!0}catch{}return!1}function zh(e){if(!e||typeof e!="object"||!us)return!1;try{return us.call(e),!0}catch{}return!1}var Jh=Object.prototype.hasOwnProperty||function(e){return e in this};function $t(e,t){return Jh.call(e,t)}function oe(e){return Oh.call(e)}function Kh(e){if(e.name)return e.name;var t=Qh.call(Uh.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Bo(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function Zh(e){if(!ai||!e||typeof e!="object")return!1;try{ai.call(e);try{hi.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function qh(e){if(!nr||!e||typeof e!="object")return!1;try{nr.call(e,nr);try{or.call(e,or)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function $h(e){if(!_n||!e||typeof e!="object")return!1;try{return _n.call(e),!0}catch{}return!1}function tl(e){if(!hi||!e||typeof e!="object")return!1;try{hi.call(e);try{ai.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function el(e){if(!or||!e||typeof e!="object")return!1;try{or.call(e,or);try{nr.call(e,nr)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function rl(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function bo(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return bo(Hs.call(e,0,t.maxStringLength),t)+i}var s=ee.call(ee.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,il);return _o(s,"single",t)}function il(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+kh.call(t.toString(16))}function Ze(e){return"Object("+e+")"}function Ui(e){return e+" { ? }"}function Mn(e,t,r,i){var s=i?ps(r,i):Lt.call(r,", ");return e+" ("+t+") {"+s+"}"}function sl(e){for(var t=0;t<e.length;t++)if(Bo(e[t],`
`)>=0)return!1;return!0}function nl(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=Lt.call(Array(e.indent+1)," ");else return null;return{base:r,prev:Lt.call(Array(t+1),r)}}function ps(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+Lt.call(e,","+r)+`
`+t.prev}function Mr(e,t){var r=As(e),i=[];if(r){i.length=e.length;for(var s=0;s<e.length;s++)i[s]=$t(e,s)?t(e[s],e):""}var n=typeof Oi=="function"?Oi(e):[],o;if(Le){o={};for(var a=0;a<n.length;a++)o["$"+n[a]]=n[a]}for(var h in e)$t(e,h)&&(r&&String(Number(h))===h&&h<e.length||Le&&o["$"+h]instanceof Symbol||(Eo.call(/[^\w$]/,h)?i.push(t(h,e)+": "+t(e[h],e)):i.push(h+": "+t(e[h],e))));if(typeof Oi=="function")for(var l=0;l<n.length;l++)xo.call(e,n[l])&&i.push("["+t(n[l])+"]: "+t(e[n[l]],e));return i}var Xs=Ls,We=Ch,ol=Gh,al=Xs("%TypeError%"),Pr=Xs("%WeakMap%",!0),Nr=Xs("%Map%",!0),hl=We("WeakMap.prototype.get",!0),ll=We("WeakMap.prototype.set",!0),cl=We("WeakMap.prototype.has",!0),ul=We("Map.prototype.get",!0),fl=We("Map.prototype.set",!0),dl=We("Map.prototype.has",!0),Ws=function(e,t){for(var r=e,i;(i=r.next)!==null;r=i)if(i.key===t)return r.next=i.next,i.next=e.next,e.next=i,i},Al=function(e,t){var r=Ws(e,t);return r&&r.value},pl=function(e,t,r){var i=Ws(e,t);i?i.value=r:e.next={key:t,next:e.next,value:r}},ml=function(e,t){return!!Ws(e,t)},gl=function(){var t,r,i,s={assert:function(n){if(!s.has(n))throw new al("Side channel does not contain "+ol(n))},get:function(n){if(Pr&&n&&(typeof n=="object"||typeof n=="function")){if(t)return hl(t,n)}else if(Nr){if(r)return ul(r,n)}else if(i)return Al(i,n)},has:function(n){if(Pr&&n&&(typeof n=="object"||typeof n=="function")){if(t)return cl(t,n)}else if(Nr){if(r)return dl(r,n)}else if(i)return ml(i,n);return!1},set:function(n,o){Pr&&n&&(typeof n=="object"||typeof n=="function")?(t||(t=new Pr),ll(t,n,o)):Nr?(r||(r=new Nr),fl(r,n,o)):(i||(i={key:{},next:null}),pl(i,n,o))}};return s},yl=String.prototype.replace,vl=/%20/g,Qi={RFC1738:"RFC1738",RFC3986:"RFC3986"},js={default:Qi.RFC3986,formatters:{RFC1738:function(e){return yl.call(e,vl,"+")},RFC3986:function(e){return String(e)}},RFC1738:Qi.RFC1738,RFC3986:Qi.RFC3986},El=js,ki=Object.prototype.hasOwnProperty,me=Array.isArray,Ut=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),xl=function(t){for(;t.length>1;){var r=t.pop(),i=r.obj[r.prop];if(me(i)){for(var s=[],n=0;n<i.length;++n)typeof i[n]<"u"&&s.push(i[n]);r.obj[r.prop]=s}}},To=function(t,r){for(var i=r&&r.plainObjects?Object.create(null):{},s=0;s<t.length;++s)typeof t[s]<"u"&&(i[s]=t[s]);return i},_l=function e(t,r,i){if(!r)return t;if(typeof r!="object"){if(me(t))t.push(r);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!ki.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var s=t;return me(t)&&!me(r)&&(s=To(t,i)),me(t)&&me(r)?(r.forEach(function(n,o){if(ki.call(t,o)){var a=t[o];a&&typeof a=="object"&&n&&typeof n=="object"?t[o]=e(a,n,i):t.push(n)}else t[o]=n}),t):Object.keys(r).reduce(function(n,o){var a=r[o];return ki.call(n,o)?n[o]=e(n[o],a,i):n[o]=a,n},s)},Il=function(t,r){return Object.keys(r).reduce(function(i,s){return i[s]=r[s],i},t)},Bl=function(e,t,r){var i=e.replace(/\+/g," ");if(r==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},bl=function(t,r,i,s,n){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",h=0;h<o.length;++h){var l=o.charCodeAt(h);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||n===El.RFC1738&&(l===40||l===41)){a+=o.charAt(h);continue}if(l<128){a=a+Ut[l];continue}if(l<2048){a=a+(Ut[192|l>>6]+Ut[128|l&63]);continue}if(l<55296||l>=57344){a=a+(Ut[224|l>>12]+Ut[128|l>>6&63]+Ut[128|l&63]);continue}h+=1,l=65536+((l&1023)<<10|o.charCodeAt(h)&1023),a+=Ut[240|l>>18]+Ut[128|l>>12&63]+Ut[128|l>>6&63]+Ut[128|l&63]}return a},Tl=function(t){for(var r=[{obj:{o:t},prop:"o"}],i=[],s=0;s<r.length;++s)for(var n=r[s],o=n.obj[n.prop],a=Object.keys(o),h=0;h<a.length;++h){var l=a[h],c=o[l];typeof c=="object"&&c!==null&&i.indexOf(c)===-1&&(r.push({obj:o,prop:l}),i.push(c))}return xl(r),t},wl=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},Cl=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},Sl=function(t,r){return[].concat(t,r)},Rl=function(t,r){if(me(t)){for(var i=[],s=0;s<t.length;s+=1)i.push(r(t[s]));return i}return r(t)},wo={arrayToObject:To,assign:Il,combine:Sl,compact:Tl,decode:Bl,encode:bl,isBuffer:Cl,isRegExp:wl,maybeMap:Rl,merge:_l},Co=gl,Zr=wo,ar=js,Ml=Object.prototype.hasOwnProperty,Pn={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},Yt=Array.isArray,Pl=Array.prototype.push,So=function(e,t){Pl.apply(e,Yt(t)?t:[t])},Nl=Date.prototype.toISOString,Nn=ar.default,pt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Zr.encode,encodeValuesOnly:!1,format:Nn,formatter:ar.formatters[Nn],indices:!1,serializeDate:function(t){return Nl.call(t)},skipNulls:!1,strictNullHandling:!1},Fl=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Li={},Dl=function e(t,r,i,s,n,o,a,h,l,c,u,f,y,m,B,I){for(var w=t,A=I,d=0,x=!1;(A=A.get(Li))!==void 0&&!x;){var _=A.get(t);if(d+=1,typeof _<"u"){if(_===d)throw new RangeError("Cyclic object value");x=!0}typeof A.get(Li)>"u"&&(d=0)}if(typeof h=="function"?w=h(r,w):w instanceof Date?w=u(w):i==="comma"&&Yt(w)&&(w=Zr.maybeMap(w,function(R){return R instanceof Date?u(R):R})),w===null){if(n)return a&&!m?a(r,pt.encoder,B,"key",f):r;w=""}if(Fl(w)||Zr.isBuffer(w)){if(a){var E=m?r:a(r,pt.encoder,B,"key",f);return[y(E)+"="+y(a(w,pt.encoder,B,"value",f))]}return[y(r)+"="+y(String(w))]}var T=[];if(typeof w>"u")return T;var b;if(i==="comma"&&Yt(w))m&&a&&(w=Zr.maybeMap(w,a)),b=[{value:w.length>0?w.join(",")||null:void 0}];else if(Yt(h))b=h;else{var v=Object.keys(w);b=l?v.sort(l):v}for(var g=s&&Yt(w)&&w.length===1?r+"[]":r,p=0;p<b.length;++p){var C=b[p],S=typeof C=="object"&&typeof C.value<"u"?C.value:w[C];if(!(o&&S===null)){var M=Yt(w)?typeof i=="function"?i(g,C):g:g+(c?"."+C:"["+C+"]");I.set(t,d);var N=Co();N.set(Li,I),So(T,e(S,M,i,s,n,o,i==="comma"&&m&&Yt(w)?null:a,h,l,c,u,f,y,m,B,N))}}return T},Ol=function(t){if(!t)return pt;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||pt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=ar.default;if(typeof t.format<"u"){if(!Ml.call(ar.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var s=ar.formatters[i],n=pt.filter;return(typeof t.filter=="function"||Yt(t.filter))&&(n=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:pt.addQueryPrefix,allowDots:typeof t.allowDots>"u"?pt.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:pt.charsetSentinel,delimiter:typeof t.delimiter>"u"?pt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:pt.encode,encoder:typeof t.encoder=="function"?t.encoder:pt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:pt.encodeValuesOnly,filter:n,format:i,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:pt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:pt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:pt.strictNullHandling}},Ul=function(e,t){var r=e,i=Ol(t),s,n;typeof i.filter=="function"?(n=i.filter,r=n("",r)):Yt(i.filter)&&(n=i.filter,s=n);var o=[];if(typeof r!="object"||r===null)return"";var a;t&&t.arrayFormat in Pn?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var h=Pn[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=h==="comma"&&t&&t.commaRoundTrip;s||(s=Object.keys(r)),i.sort&&s.sort(i.sort);for(var c=Co(),u=0;u<s.length;++u){var f=s[u];i.skipNulls&&r[f]===null||So(o,Dl(r[f],f,h,l,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,c))}var y=o.join(i.delimiter),m=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),y.length>0?m+y:""},Ge=wo,ms=Object.prototype.hasOwnProperty,Ql=Array.isArray,lt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Ge.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},kl=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},Ro=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},Ll="utf8=%26%2310003%3B",Gl="utf8=%E2%9C%93",Vl=function(t,r){var i={__proto__:null},s=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,n=r.parameterLimit===1/0?void 0:r.parameterLimit,o=s.split(r.delimiter,n),a=-1,h,l=r.charset;if(r.charsetSentinel)for(h=0;h<o.length;++h)o[h].indexOf("utf8=")===0&&(o[h]===Gl?l="utf-8":o[h]===Ll&&(l="iso-8859-1"),a=h,h=o.length);for(h=0;h<o.length;++h)if(h!==a){var c=o[h],u=c.indexOf("]="),f=u===-1?c.indexOf("="):u+1,y,m;f===-1?(y=r.decoder(c,lt.decoder,l,"key"),m=r.strictNullHandling?null:""):(y=r.decoder(c.slice(0,f),lt.decoder,l,"key"),m=Ge.maybeMap(Ro(c.slice(f+1),r),function(B){return r.decoder(B,lt.decoder,l,"value")})),m&&r.interpretNumericEntities&&l==="iso-8859-1"&&(m=kl(m)),c.indexOf("[]=")>-1&&(m=Ql(m)?[m]:m),ms.call(i,y)?i[y]=Ge.combine(i[y],m):i[y]=m}return i},Hl=function(e,t,r,i){for(var s=i?t:Ro(t,r),n=e.length-1;n>=0;--n){var o,a=e[n];if(a==="[]"&&r.parseArrays)o=[].concat(s);else{o=r.plainObjects?Object.create(null):{};var h=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=parseInt(h,10);!r.parseArrays&&h===""?o={0:s}:!isNaN(l)&&a!==h&&String(l)===h&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(o=[],o[l]=s):h!=="__proto__"&&(o[h]=s)}s=o}return s},Xl=function(t,r,i,s){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,h=i.depth>0&&o.exec(n),l=h?n.slice(0,h.index):n,c=[];if(l){if(!i.plainObjects&&ms.call(Object.prototype,l)&&!i.allowPrototypes)return;c.push(l)}for(var u=0;i.depth>0&&(h=a.exec(n))!==null&&u<i.depth;){if(u+=1,!i.plainObjects&&ms.call(Object.prototype,h[1].slice(1,-1))&&!i.allowPrototypes)return;c.push(h[1])}return h&&c.push("["+n.slice(h.index)+"]"),Hl(c,r,i,s)}},Wl=function(t){if(!t)return lt;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?lt.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?lt.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:lt.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:lt.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:lt.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:lt.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:lt.comma,decoder:typeof t.decoder=="function"?t.decoder:lt.decoder,delimiter:typeof t.delimiter=="string"||Ge.isRegExp(t.delimiter)?t.delimiter:lt.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:lt.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:lt.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:lt.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:lt.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:lt.strictNullHandling}},jl=function(e,t){var r=Wl(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var i=typeof e=="string"?Vl(e,r):e,s=r.plainObjects?Object.create(null):{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],h=Xl(a,i[a],r,typeof e=="string");s=Ge.merge(s,h,r)}return r.allowSparse===!0?s:Ge.compact(s)},Yl=Ul,zl=jl,Jl=js,Kl={formats:Jl,parse:zl,stringify:Yl},Zl=eh;function Ft(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ql=/^([a-z0-9.+-]+:)/i,$l=/:[0-9]*$/,tc=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ec=["<",">",'"',"`"," ","\r",`
`,"	"],rc=["{","}","|","\\","^","`"].concat(ec),gs=["'"].concat(rc),Fn=["%","/","?",";","#"].concat(gs),Dn=["/","?","#"],ic=255,On=/^[+a-z0-9A-Z_-]{0,63}$/,sc=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,nc={javascript:!0,"javascript:":!0},ys={javascript:!0,"javascript:":!0},Oe={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},vs=Kl;function mi(e,t,r){if(e&&typeof e=="object"&&e instanceof Ft)return e;var i=new Ft;return i.parse(e,t,r),i}Ft.prototype.parse=function(e,t,r){if(typeof e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=i!==-1&&i<e.indexOf("#")?"?":"#",n=e.split(s),o=/\\/g;n[0]=n[0].replace(o,"/"),e=n.join(s);var a=e;if(a=a.trim(),!r&&e.split("#").length===1){var h=tc.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=vs.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=ql.exec(a);if(l){l=l[0];var c=l.toLowerCase();this.protocol=c,a=a.substr(l.length)}if(r||l||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(l&&ys[l])&&(a=a.substr(2),this.slashes=!0)}if(!ys[l]&&(u||l&&!Oe[l])){for(var f=-1,y=0;y<Dn.length;y++){var m=a.indexOf(Dn[y]);m!==-1&&(f===-1||m<f)&&(f=m)}var B,I;f===-1?I=a.lastIndexOf("@"):I=a.lastIndexOf("@",f),I!==-1&&(B=a.slice(0,I),a=a.slice(I+1),this.auth=decodeURIComponent(B)),f=-1;for(var y=0;y<Fn.length;y++){var m=a.indexOf(Fn[y]);m!==-1&&(f===-1||m<f)&&(f=m)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var A=this.hostname.split(/\./),y=0,d=A.length;y<d;y++){var x=A[y];if(x&&!x.match(On)){for(var _="",E=0,T=x.length;E<T;E++)x.charCodeAt(E)>127?_+="x":_+=x[E];if(!_.match(On)){var b=A.slice(0,y),v=A.slice(y+1),g=x.match(sc);g&&(b.push(g[1]),v.unshift(g[2])),v.length&&(a="/"+v.join(".")+a),this.hostname=b.join(".");break}}}this.hostname.length>ic?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=Zl.toASCII(this.hostname));var p=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+p,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!nc[c])for(var y=0,d=gs.length;y<d;y++){var S=gs[y];if(a.indexOf(S)!==-1){var M=encodeURIComponent(S);M===S&&(M=escape(S)),a=a.split(S).join(M)}}var N=a.indexOf("#");N!==-1&&(this.hash=a.substr(N),a=a.slice(0,N));var R=a.indexOf("?");if(R!==-1?(this.search=a.substr(R),this.query=a.substr(R+1),t&&(this.query=vs.parse(this.query)),a=a.slice(0,R)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Oe[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var p=this.pathname||"",L=this.search||"";this.path=p+L}return this.href=this.format(),this};function oc(e){return typeof e=="string"&&(e=mi(e)),e instanceof Ft?e.format():Ft.prototype.format.call(e)}Ft.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=e+this.host:this.hostname&&(s=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=vs.stringify(this.query,{arrayFormat:"repeat",encodeValuesOnly:!0,addQueryPrefix:!1}));var o=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Oe[t])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+s+r+o+i};function ac(e,t){return mi(e,!1,!0).resolve(t)}Ft.prototype.resolve=function(e){return this.resolveObject(mi(e,!1,!0)).format()};Ft.prototype.resolveObject=function(e){if(typeof e=="string"){var t=new Ft;t.parse(e,!1,!0),e=t}for(var r=new Ft,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];r[n]=this[n]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var h=o[a];h!=="protocol"&&(r[h]=e[h])}return Oe[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Oe[e.protocol]){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];r[u]=e[u]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!ys[e.protocol]){for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),d[0]!==""&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",y=r.search||"";r.path=f+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&r.pathname.charAt(0)==="/",B=e.host||e.pathname&&e.pathname.charAt(0)==="/",I=B||m||r.host&&e.pathname,w=I,A=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!Oe[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(A[0]===""?A[0]=r.host:A.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(d[0]===""?d[0]=e.host:d.unshift(e.host)),e.host=null),I=I&&(d[0]===""||A[0]==="")),B)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,A=d;else if(d.length)A||(A=[]),A.pop(),A=A.concat(d),r.search=e.search,r.query=e.query;else if(e.search!=null){if(x){r.host=A.shift(),r.hostname=r.host;var _=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;_&&(r.auth=_.shift(),r.hostname=_.shift(),r.host=r.hostname)}return r.search=e.search,r.query=e.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!A.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=A.slice(-1)[0],T=(r.host||e.host||A.length>1)&&(E==="."||E==="..")||E==="",b=0,v=A.length;v>=0;v--)E=A[v],E==="."?A.splice(v,1):E===".."?(A.splice(v,1),b++):b&&(A.splice(v,1),b--);if(!I&&!w)for(;b--;b)A.unshift("..");I&&A[0]!==""&&(!A[0]||A[0].charAt(0)!=="/")&&A.unshift(""),T&&A.join("/").substr(-1)!=="/"&&A.push("");var g=A[0]===""||A[0]&&A[0].charAt(0)==="/";if(x){r.hostname=g?"":A.length?A.shift():"",r.host=r.hostname;var _=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;_&&(r.auth=_.shift(),r.hostname=_.shift(),r.host=r.hostname)}return I=I||r.host&&A.length,I&&!g&&A.unshift(""),A.length>0?r.pathname=A.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Ft.prototype.parseHost=function(){var e=this.host,t=$l.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var hc=mi,lc=ac,cc=oc;const uc={parse:hc,format:cc,resolve:lc},Un={};function q(e,t,r=3){if(Un[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(i))),Un[t]=!0}let Gi;function fc(){return typeof Gi>"u"&&(Gi=function(){var r;const t={stencil:!0,failIfMajorPerformanceCaveat:j.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!j.ADAPTER.getWebGLRenderingContext())return!1;const i=j.ADAPTER.createCanvas();let s=i.getContext("webgl",t)||i.getContext("experimental-webgl",t);const n=!!((r=s==null?void 0:s.getContextAttributes())!=null&&r.stencil);if(s){const o=s.getExtension("WEBGL_lose_context");o&&o.loseContext()}return s=null,n}catch{return!1}}()),Gi}var dc={grad:.9,turn:360,rad:360/(2*Math.PI)},jt=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},ut=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Tt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},Mo=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Qn=function(e){return{r:Tt(e.r,0,255),g:Tt(e.g,0,255),b:Tt(e.b,0,255),a:Tt(e.a)}},Vi=function(e){return{r:ut(e.r),g:ut(e.g),b:ut(e.b),a:ut(e.a,3)}},Ac=/^#([0-9a-f]{3,8})$/i,Fr=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Po=function(e){var t=e.r,r=e.g,i=e.b,s=e.a,n=Math.max(t,r,i),o=n-Math.min(t,r,i),a=o?n===t?(r-i)/o:n===r?2+(i-t)/o:4+(t-r)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:s}},No=function(e){var t=e.h,r=e.s,i=e.v,s=e.a;t=t/360*6,r/=100,i/=100;var n=Math.floor(t),o=i*(1-r),a=i*(1-(t-n)*r),h=i*(1-(1-t+n)*r),l=n%6;return{r:255*[i,a,o,o,h,i][l],g:255*[h,i,i,a,o,o][l],b:255*[o,o,h,i,i,a][l],a:s}},kn=function(e){return{h:Mo(e.h),s:Tt(e.s,0,100),l:Tt(e.l,0,100),a:Tt(e.a)}},Ln=function(e){return{h:ut(e.h),s:ut(e.s),l:ut(e.l),a:ut(e.a,3)}},Gn=function(e){return No((r=(t=e).s,{h:t.h,s:(r*=((i=t.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:t.a}));var t,r,i},hr=function(e){return{h:(t=Po(e)).h,s:(s=(200-(r=t.s))*(i=t.v)/100)>0&&s<200?r*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,r,i,s},pc=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mc=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gc=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yc=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Es={string:[[function(e){var t=Ac.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?ut(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?ut(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=gc.exec(e)||yc.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Qn({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=pc.exec(e)||mc.exec(e);if(!t)return null;var r,i,s=kn({h:(r=t[1],i=t[2],i===void 0&&(i="deg"),Number(r)*(dc[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Gn(s)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,i=e.b,s=e.a,n=s===void 0?1:s;return jt(t)&&jt(r)&&jt(i)?Qn({r:Number(t),g:Number(r),b:Number(i),a:Number(n)}):null},"rgb"],[function(e){var t=e.h,r=e.s,i=e.l,s=e.a,n=s===void 0?1:s;if(!jt(t)||!jt(r)||!jt(i))return null;var o=kn({h:Number(t),s:Number(r),l:Number(i),a:Number(n)});return Gn(o)},"hsl"],[function(e){var t=e.h,r=e.s,i=e.v,s=e.a,n=s===void 0?1:s;if(!jt(t)||!jt(r)||!jt(i))return null;var o=function(a){return{h:Mo(a.h),s:Tt(a.s,0,100),v:Tt(a.v,0,100),a:Tt(a.a)}}({h:Number(t),s:Number(r),v:Number(i),a:Number(n)});return No(o)},"hsv"]]},Vn=function(e,t){for(var r=0;r<t.length;r++){var i=t[r][0](e);if(i)return[i,t[r][1]]}return[null,void 0]},vc=function(e){return typeof e=="string"?Vn(e.trim(),Es.string):typeof e=="object"&&e!==null?Vn(e,Es.object):[null,void 0]},Hi=function(e,t){var r=hr(e);return{h:r.h,s:Tt(r.s+100*t,0,100),l:r.l,a:r.a}},Xi=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Hn=function(e,t){var r=hr(e);return{h:r.h,s:r.s,l:Tt(r.l+100*t,0,100),a:r.a}},xs=function(){function e(t){this.parsed=vc(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return ut(Xi(this.rgba),2)},e.prototype.isDark=function(){return Xi(this.rgba)<.5},e.prototype.isLight=function(){return Xi(this.rgba)>=.5},e.prototype.toHex=function(){return t=Vi(this.rgba),r=t.r,i=t.g,s=t.b,o=(n=t.a)<1?Fr(ut(255*n)):"","#"+Fr(r)+Fr(i)+Fr(s)+o;var t,r,i,s,n,o},e.prototype.toRgb=function(){return Vi(this.rgba)},e.prototype.toRgbString=function(){return t=Vi(this.rgba),r=t.r,i=t.g,s=t.b,(n=t.a)<1?"rgba("+r+", "+i+", "+s+", "+n+")":"rgb("+r+", "+i+", "+s+")";var t,r,i,s,n},e.prototype.toHsl=function(){return Ln(hr(this.rgba))},e.prototype.toHslString=function(){return t=Ln(hr(this.rgba)),r=t.h,i=t.s,s=t.l,(n=t.a)<1?"hsla("+r+", "+i+"%, "+s+"%, "+n+")":"hsl("+r+", "+i+"%, "+s+"%)";var t,r,i,s,n},e.prototype.toHsv=function(){return t=Po(this.rgba),{h:ut(t.h),s:ut(t.s),v:ut(t.v),a:ut(t.a,3)};var t},e.prototype.invert=function(){return Qt({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Qt(Hi(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Qt(Hi(this.rgba,-t))},e.prototype.grayscale=function(){return Qt(Hi(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Qt(Hn(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Qt(Hn(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Qt({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):ut(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=hr(this.rgba);return typeof t=="number"?Qt({h:t,s:r.s,l:r.l,a:r.a}):ut(r.h)},e.prototype.isEqual=function(t){return this.toHex()===Qt(t).toHex()},e}(),Qt=function(e){return e instanceof xs?e:new xs(e)},Xn=[],Ec=function(e){e.forEach(function(t){Xn.indexOf(t)<0&&(t(xs,Es),Xn.push(t))})};function xc(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in r)i[r[s]]=s;var n={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,h,l=i[this.toHex()];if(l)return l;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,f="black";if(!n.length)for(var y in r)n[y]=new e(r[y]).toRgb();for(var m in r){var B=(a=c,h=n[m],Math.pow(a.r-h.r,2)+Math.pow(a.g-h.g,2)+Math.pow(a.b-h.b,2));B<u&&(u=B,f=m)}return f}},t.string.push([function(o){var a=o.toLowerCase(),h=a==="transparent"?"#0000":r[a];return h?new e(h).toRgb():null},"name"])}Ec([xc]);const Ue=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ue)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,n)=>s===t[n]);if(e!==null&&t!==null){const s=Object.keys(e),n=Object.keys(t);return s.length!==n.length?!1:s.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,r,i]=this._components;return{r:e,g:t,b:r,a:i}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[t,r,i]=this._components;return e[0]=t,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,i,s]=Ue.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,i,s]=this._components;return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let t,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const n=e;t=(n>>16&255)/255,r=(n>>8&255)/255,i=(n&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,i,s=255]=e,t/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=Ue.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const n=Qt(e);n.isValid()&&({r:t,g:r,b:i,a:s}=n.rgba,t/=255,r/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),r)}),e)}};let ae=Ue;ae.shared=new Ue;ae.temp=new Ue;ae.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function _c(){const e=[],t=[];for(let i=0;i<32;i++)e[i]=i,t[i]=i;e[k.NORMAL_NPM]=k.NORMAL,e[k.ADD_NPM]=k.ADD,e[k.SCREEN_NPM]=k.SCREEN,t[k.NORMAL]=k.NORMAL_NPM,t[k.ADD]=k.ADD_NPM,t[k.SCREEN]=k.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}const Ic=_c();function Fo(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function li(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Wn(e){return!(e&e-1)&&!!e}function jn(e){let t=(e>65535?1:0)<<4;e>>>=t;let r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function qr(e,t,r){const i=e.length;let s;if(t>=i||r===0)return;r=t+r>i?i-t:r;const n=i-r;for(s=t;s<n;++s)e[s]=e[s+r];e.length=n}function Dr(e){return e===0?0:e<0?-1:1}let Bc=0;function Ar(){return++Bc}const Yn={},kt=Object.create(null),qt=Object.create(null);let Or;function bc(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,Or||(Or=document.createElement("a")),Or.href=e;const r=uc.parse(Or.href),i=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!i||r.protocol!==t.protocol?"anonymous":""}function zn(e,t=1){var i;const r=(i=j.RETINA_PREFIX)==null?void 0:i.exec(e);return r?parseFloat(r[1]):t}var G=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(G||{});const _s=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},Jn=(e,t)=>_s(e).priority??t,K={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(_s).forEach(t=>{t.type.forEach(r=>{var i,s;return(s=(i=this._removeHandlers)[r])==null?void 0:s.call(i,t)})}),this},add(...e){return e.map(_s).forEach(t=>{t.type.forEach(r=>{const i=this._addHandlers,s=this._queue;i[r]?i[r](t):(s[r]=s[r]||[],s[r].push(t))})}),this},handle(e,t,r){const i=this._addHandlers,s=this._removeHandlers;if(i[e]||s[e])throw new Error(`Extension type ${e} already has a handler`);i[e]=t,s[e]=r;const n=this._queue;return n[e]&&(n[e].forEach(o=>t(o)),delete n[e]),this},handleByMap(e,t){return this.handle(e,r=>{t[r.name]=r.ref},r=>{delete t[r.name]})},handleByList(e,t,r=-1){return this.handle(e,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,n)=>Jn(n,r)-Jn(s,r)))},i=>{const s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})}};class Tc{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const wc=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Cc(e){let t="";for(let r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function Sc(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=wc.replace(/%forloop%/gi,Cc(e));if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}const Wi=0,ji=1,Yi=2,zi=3,Ji=4,Ki=5;class Er{constructor(){this.data=0,this.blendMode=k.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Wi)}set blend(t){!!(this.data&1<<Wi)!==t&&(this.data^=1<<Wi)}get offsets(){return!!(this.data&1<<ji)}set offsets(t){!!(this.data&1<<ji)!==t&&(this.data^=1<<ji)}get culling(){return!!(this.data&1<<Yi)}set culling(t){!!(this.data&1<<Yi)!==t&&(this.data^=1<<Yi)}get depthTest(){return!!(this.data&1<<zi)}set depthTest(t){!!(this.data&1<<zi)!==t&&(this.data^=1<<zi)}get depthMask(){return!!(this.data&1<<Ki)}set depthMask(t){!!(this.data&1<<Ki)!==t&&(this.data^=1<<Ki)}get clockwiseFrontFace(){return!!(this.data&1<<Ji)}set clockwiseFrontFace(t){!!(this.data&1<<Ji)!==t&&(this.data^=1<<Ji)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==k.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Er;return t.depthTest=!1,t.blend=!0,t}}const Is=[];function Do(e,t){if(!e)return null;let r="";if(typeof e=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);i&&(r=i[1].toLowerCase())}for(let i=Is.length-1;i>=0;--i){const s=Is[i];if(s.test&&s.test(e,r))return new s(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Dt{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,r,i,s,n,o,a,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:c}=this;this._aliasCount++;for(let u=0,f=c.length;u<f;u++)c[u][l](t,r,i,s,n,o,a,h);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Dt.prototype,{dispatch:{value:Dt.prototype.emit},run:{value:Dt.prototype.emit}});class pr{constructor(t=0,r=0){this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Dt("setRealSize"),this.onUpdate=new Dt("update"),this.onError=new Dt("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,r,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,r){return!1}}class Ys extends pr{constructor(t,r){const{width:i,height:s}=r||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=t}upload(t,r,i){const s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ne.UNPACK);const n=r.realWidth,o=r.realHeight;return i.width===n&&i.height===o?s.texSubImage2D(r.target,0,0,0,n,o,r.format,i.type,this.data):(i.width=n,i.height=o,s.texImage2D(r.target,0,i.internalFormat,n,o,0,r.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const Rc={scaleMode:vt.NEAREST,format:F.RGBA,alphaMode:ne.NPM},Se=class extends yr{constructor(e=null,t=null){super(),t=Object.assign({},Se.defaultOptions,t);const{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:n,width:o,height:a,wrapMode:h,format:l,type:c,target:u,resolution:f,resourceOptions:y}=t;e&&!(e instanceof pr)&&(e=Do(e,y),e.internal=!0),this.resolution=f||j.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=h,this._scaleMode=n,this.format=l,this.type=c,this.target=u,this.alphaMode=r,this.uid=Ar(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Wn(this.realWidth)&&Wn(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete qt[this.cacheId],delete kt[this.cacheId],this.cacheId=null),this.dispose(),Se.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=j.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${Ar()}`}s=e._pixiId}let n=qt[s];if(i&&r&&!n)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return n||(n=new Se(e,t),n.cacheId=s,Se.addToCache(n,s)),n}static fromBuffer(e,t,r,i){e=e||new Float32Array(t*r*4);const s=new Ys(e,{width:t,height:r}),n=e instanceof Float32Array?J.FLOAT:J.UNSIGNED_BYTE;return new Se(s,Object.assign({},Rc,{type:n},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),qt[t]&&qt[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),qt[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=qt[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete qt[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete qt[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let Z=Se;Z.defaultOptions={mipmap:xe.POW2,anisotropicLevel:0,scaleMode:vt.LINEAR,wrapMode:Us.CLAMP,alphaMode:ne.UNPACK,target:Fe.TEXTURE_2D,format:F.RGBA,type:J.UNSIGNED_BYTE};Z._globalBatch=0;class Mc{constructor(){this.texArray=null,this.blend=0,this.type=ii.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Pc=0;class yt{constructor(t,r=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=Pc++,this.disposeRunner=new Dt("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Gt.ELEMENT_ARRAY_BUFFER:Gt.ARRAY_BUFFER}get index(){return this.type===Gt.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new yt(t)}}class ci{constructor(t,r=0,i=!1,s=J.FLOAT,n,o,a,h=1){this.buffer=t,this.size=r,this.normalized=i,this.type=s,this.stride=n,this.start=o,this.instance=a,this.divisor=h}destroy(){this.buffer=null}static from(t,r,i,s,n){return new ci(t,r,i,s,n)}}const Nc={Float32Array,Uint32Array,Int32Array,Uint8Array};function Fc(e,t){let r=0,i=0;const s={};for(let h=0;h<e.length;h++)i+=t[h],r+=e[h].length;const n=new ArrayBuffer(r*4);let o=null,a=0;for(let h=0;h<e.length;h++){const l=t[h],c=e[h],u=Fo(c);s[u]||(s[u]=new Nc[u](n)),o=s[u];for(let f=0;f<c.length;f++){const y=(f/l|0)*i+a,m=f%l;o[y+m]=c[f]}a+=l}return new Float32Array(n)}const Kn={5126:4,5123:2,5121:1};let Dc=0;const Oc={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Ve{constructor(t=[],r={}){this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=Dc++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Dt("disposeGeometry"),this.refCount=0}addAttribute(t,r,i=0,s=!1,n,o,a,h=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof yt||(r instanceof Array&&(r=new Float32Array(r)),r=new yt(r));const l=t.split("|");if(l.length>1){for(let u=0;u<l.length;u++)this.addAttribute(l[u],r,i,s,n);return this}let c=this.buffers.indexOf(r);return c===-1&&(this.buffers.push(r),c=this.buffers.length-1),this.attributes[t]=new ci(c,i,s,n,o,a,h),this.instanced=this.instanced||h,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof yt||(t instanceof Array&&(t=new Uint16Array(t)),t=new yt(t)),t.type=Gt.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],r=[],i=new yt;let s;for(s in this.attributes){const n=this.attributes[s],o=this.buffers[n.buffer];t.push(o.data),r.push(n.size*Kn[n.type]/4),n.buffer=0}for(i.data=Fc(t,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const r=this.attributes[t];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Ve;for(let r=0;r<this.buffers.length;r++)t.buffers[r]=new yt(this.buffers[r].data.slice(0));for(const r in this.attributes){const i=this.attributes[r];t.attributes[r]=new ci(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Gt.ELEMENT_ARRAY_BUFFER),t}static merge(t){const r=new Ve,i=[],s=[],n=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)s[h]=s[h]||0,s[h]+=o.buffers[h].data.length,n[h]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new Oc[Fo(o.buffers[a].data)](s[a]),r.buffers[a]=new yt(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)i[h].set(o.buffers[h].data,n[h]),n[h]+=o.buffers[h].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=Gt.ELEMENT_ARRAY_BUFFER;let a=0,h=0,l=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const f=o.attributes[u];(f.buffer|0)===c&&(h+=f.size*Kn[f.type]/4)}for(let u=0;u<t.length;u++){const f=t[u].indexBuffer.data;for(let y=0;y<f.length;y++)r.indexBuffer.data[y+l]+=a;a+=t[u].buffers[c].data.length/h,l+=f.length}}return r}}class Uc extends Ve{constructor(t=!1){super(),this._buffer=new yt(null,t,!1),this._indexBuffer=new yt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,J.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,J.FLOAT).addAttribute("aColor",this._buffer,4,!0,J.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,J.FLOAT).addIndex(this._indexBuffer)}}const Qc=Math.PI*2,kc=180/Math.PI,Lc=Math.PI/180;var Oo=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Oo||{});let it=class Uo{constructor(t=0,r=0){this.x=0,this.y=0,this.x=t,this.y=r}clone(){return new Uo(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,r=t){return this.x=t,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}};const Ur=[new it,new it,new it,new it];class rt{constructor(t=0,r=0,i=0,s=0){this.x=Number(t),this.y=Number(r),this.width=Number(i),this.height=Number(s),this.type=Oo.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new rt(0,0,0,0)}clone(){return new rt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(t,r){if(!r){const b=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=b)return!1;const g=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>g}const i=this.left,s=this.right,n=this.top,o=this.bottom;if(s<=i||o<=n)return!1;const a=Ur[0].set(t.left,t.top),h=Ur[1].set(t.left,t.bottom),l=Ur[2].set(t.right,t.top),c=Ur[3].set(t.right,t.bottom);if(l.x<=a.x||h.y<=a.y)return!1;const u=Math.sign(r.a*r.d-r.b*r.c);if(u===0||(r.apply(a,a),r.apply(h,h),r.apply(l,l),r.apply(c,c),Math.max(a.x,h.x,l.x,c.x)<=i||Math.min(a.x,h.x,l.x,c.x)>=s||Math.max(a.y,h.y,l.y,c.y)<=n||Math.min(a.y,h.y,l.y,c.y)>=o))return!1;const f=u*(h.y-a.y),y=u*(a.x-h.x),m=f*i+y*n,B=f*s+y*n,I=f*i+y*o,w=f*s+y*o;if(Math.max(m,B,I,w)<=f*a.x+y*a.y||Math.min(m,B,I,w)>=f*c.x+y*c.y)return!1;const A=u*(a.y-l.y),d=u*(l.x-a.x),x=A*i+d*n,_=A*s+d*n,E=A*i+d*o,T=A*s+d*o;return!(Math.max(x,_,E,T)<=A*a.x+d*a.y||Math.min(x,_,E,T)>=A*c.x+d*c.y)}pad(t=0,r=t){return this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this}fit(t){const r=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(i-r,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(t=1,r=.001){const i=Math.ceil((this.x+this.width-r)*t)/t,s=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const r=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=i-r,this.y=s,this.height=n-s,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class ft{constructor(t=1,r=0,i=0,s=1,n=0,o=0){this.array=null,this.a=t,this.b=r,this.c=i,this.d=s,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,r,i,s,n,o){return this.a=t,this.b=r,this.c=i,this.d=s,this.tx=n,this.ty=o,this}toArray(t,r){this.array||(this.array=new Float32Array(9));const i=r||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,r){r=r||new it;const i=t.x,s=t.y;return r.x=this.a*i+this.c*s+this.tx,r.y=this.b*i+this.d*s+this.ty,r}applyInverse(t,r){r=r||new it;const i=1/(this.a*this.d+this.c*-this.b),s=t.x,n=t.y;return r.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,r}translate(t,r){return this.tx+=t,this.ty+=r,this}scale(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this}rotate(t){const r=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,o=this.tx;return this.a=s*r-this.b*i,this.b=s*i+this.b*r,this.c=n*r-this.d*i,this.d=n*i+this.d*r,this.tx=o*r-this.ty*i,this.ty=o*i+this.ty*r,this}append(t){const r=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*r+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*r+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*r+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}setTransform(t,r,i,s,n,o,a,h,l){return this.a=Math.cos(a+l)*n,this.b=Math.sin(a+l)*n,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=t-(i*this.a+s*this.c),this.ty=r-(i*this.b+s*this.d),this}prepend(t){const r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this}decompose(t){const r=this.a,i=this.b,s=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-s,n),h=Math.atan2(i,r),l=Math.abs(a+h);return l<1e-5||Math.abs(Qc-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(r*r+i*i),t.scale.y=Math.sqrt(s*s+n*n),t.position.x=this.tx+(o.x*r+o.y*s),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,r=this.b,i=this.c,s=this.d,n=this.tx,o=t*s-r*i;return this.a=s/o,this.b=-r/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(t*this.ty-r*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new ft;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new ft}static get TEMP_MATRIX(){return new ft}}const fe=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],de=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ae=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],pe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Bs=[],Qo=[],Qr=Math.sign;function Gc(){for(let e=0;e<16;e++){const t=[];Bs.push(t);for(let r=0;r<16;r++){const i=Qr(fe[e]*fe[r]+Ae[e]*de[r]),s=Qr(de[e]*fe[r]+pe[e]*de[r]),n=Qr(fe[e]*Ae[r]+Ae[e]*pe[r]),o=Qr(de[e]*Ae[r]+pe[e]*pe[r]);for(let a=0;a<16;a++)if(fe[a]===i&&de[a]===s&&Ae[a]===n&&pe[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new ft;t.set(fe[e],de[e],Ae[e],pe[e],0,0),Qo.push(t)}}Gc();const st={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>fe[e],uY:e=>de[e],vX:e=>Ae[e],vY:e=>pe[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Bs[e][t],sub:(e,t)=>Bs[e][st.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?st.S:st.N:Math.abs(t)*2<=Math.abs(e)?e>0?st.E:st.W:t>0?e>0?st.SE:st.SW:e>0?st.NE:st.NW,matrixAppendRotationInv:(e,t,r=0,i=0)=>{const s=Qo[st.inv(t)];s.tx=r,s.ty=i,e.append(s)}};class ye{constructor(t,r,i=0,s=0){this._x=i,this._y=s,this.cb=t,this.scope=r}clone(t=this.cb,r=this.scope){return new ye(t,r,this._x,this._y)}set(t=0,r=t){return(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const ko=class{constructor(){this.worldTransform=new ft,this.localTransform=new ft,this.position=new ye(this.onChange,this,0,0),this.scale=new ye(this.onChange,this,1,1),this.pivot=new ye(this.onChange,this,0,0),this.skew=new ye(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,i=this.worldTransform;i.a=t.a*r.a+t.b*r.c,i.b=t.a*r.b+t.b*r.d,i.c=t.c*r.a+t.d*r.c,i.d=t.c*r.b+t.d*r.d,i.tx=t.tx*r.a+t.ty*r.c+r.tx,i.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let zs=ko;zs.IDENTITY=new ko;var Vc=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Hc=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Zn(e,t,r){const i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}function Zi(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function Lo(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Zi(2*t);case"bvec3":return Zi(3*t);case"bvec4":return Zi(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Qe=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],Xc={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Wc={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function jc(e,t){var i;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in e.uniforms){const n=t[s];if(!n){(i=e.uniforms[s])!=null&&i.group&&(e.uniforms[s].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=e.uniforms[s];let a=!1;for(let h=0;h<Qe.length;h++)if(Qe[h].test(n,o)){r.push(Qe[h].code(s,o)),a=!0;break}if(!a){const l=(n.size===1&&!n.isArray?Xc:Wc)[n.type].replace("location",`ud["${s}"].location`);r.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const Go={};let Te=Go;function Yc(){if(Te===Go||Te!=null&&Te.isContextLost()){const e=j.ADAPTER.createCanvas();let t;j.PREFER_ENV>=Ie.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Te=t}return Te}let kr;function zc(){if(!kr){kr=bt.MEDIUM;const e=Yc();e&&e.getShaderPrecisionFormat&&(kr=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?bt.HIGH:bt.MEDIUM)}return kr}function qn(e,t){const r=e.getShaderSource(t).split(`
`).map((l,c)=>`${c}: ${l}`),i=e.getShaderInfoLog(t),s=i.split(`
`),n={},o=s.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!n[l]?(n[l]=!0,!0):!1),a=[""];o.forEach(l=>{r[l-1]=`%c${r[l-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=r.join(`
`);a[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function Jc(e,t,r,i){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||qn(e,r),e.getShaderParameter(i,e.COMPILE_STATUS)||qn(e,i),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const Kc={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Vo(e){return Kc[e]}let Lr=null;const $n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ho(e,t){if(!Lr){const r=Object.keys($n);Lr={};for(let i=0;i<r.length;++i){const s=r[i];Lr[e[s]]=$n[s]}}return Lr[t]}function to(e,t,r){if(e.substring(0,9)!=="precision"){let i=t;return t===bt.HIGH&&r!==bt.HIGH&&(i=bt.MEDIUM),`precision ${i} float;
${e}`}else if(r!==bt.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let qe;function Zc(){if(typeof qe=="boolean")return qe;try{qe=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{qe=!1}return qe}let qc=0;const Gr={},Re=class{constructor(e,t,r="pixi-shader",i={}){this.extra={},this.id=qc++,this.vertexSrc=e||Re.defaultVertexSrc,this.fragmentSrc=t||Re.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Gr[r]?(Gr[r]++,r+=`-${Gr[r]}`):Gr[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=to(this.vertexSrc,Re.defaultVertexPrecision,bt.HIGH),this.fragmentSrc=to(this.fragmentSrc,Re.defaultFragmentPrecision,zc())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Hc}static get defaultFragmentSrc(){return Vc}static from(e,t,r){const i=e+t;let s=Yn[i];return s||(Yn[i]=s=new Re(e,t,r)),s}};let zt=Re;zt.defaultVertexPrecision=bt.HIGH;zt.defaultFragmentPrecision=Me.apple.device?bt.HIGH:bt.MEDIUM;let $c=0;class Vt{constructor(t,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$c++,this.static=!!r,this.ubo=!!i,t instanceof yt?(this.buffer=t,this.buffer.type=Gt.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new yt(new Float32Array(1)),this.buffer.type=Gt.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,r,i){if(!this.ubo)this.uniforms[t]=new Vt(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,r,i){return new Vt(t,r,i)}static uboFrom(t,r){return new Vt(t,r??!0,!0)}}class gi{constructor(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof Vt?this.uniformGroup=r:this.uniformGroup=new Vt(r):this.uniformGroup=new Vt({}),this.disposeRunner=new Dt("disposeShader")}checkUniformExists(t,r){if(r.uniforms[t])return!0;for(const i in r.uniforms){const s=r.uniforms[i];if(s.group&&this.checkUniformExists(t,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,r,i){const s=zt.from(t,r);return new gi(s,i)}}class tu{constructor(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;this.defaultGroupCache[t]=Vt.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${t}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new zt(this.vertexSrc,s)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new ft,default:this.defaultGroupCache[t]};return new gi(this.programCache[t],r)}generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let i=0;i<t;i++)i>0&&(r+=`
else `),i<t-1&&(r+=`if(vTextureId < ${i}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class eu{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function ru(){return!Me.apple.device}function iu(e){let t=!0;const r=j.ADAPTER.getNavigator();if(Me.tablet||Me.phone){if(Me.apple.device){const i=r.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(Me.android.device){const i=r.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?e:4}class Xo{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var su=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,nu=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const St=class extends Xo{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Uc,this.vertexSize=6,this.state=Er.for2d(),this.size=St.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??iu(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??ru(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return q("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return nu}static get defaultFragmentTemplate(){return su}setShaderGenerator({vertex:e=St.defaultVertexSrc,fragment:t=St.defaultFragmentTemplate}={}){this.shaderGenerator=new tu(e,t)}contextChange(){const e=this.renderer.gl;j.PREFER_ENV===Ie.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),St.defaultMaxTextures),this.maxTextures=Sc(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=St,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new Mc);for(;t.length<i;)t.push(new eu);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=St._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,n=this.renderer.textureGC.count;let o=++Z._globalBatch,a=0,h=r[0],l=0;i.copyBoundTextures(s,t);for(let c=0;c<this._bufferSize;++c){const u=e[c];e[c]=null,u._batchEnabled!==o&&(h.count>=t&&(i.boundArray(h,s,o,t),this.buildDrawCalls(h,l,c),l=c,h=r[++a],++o),u._batchEnabled=o,u.touched=n,h.elements[h.count++]=u)}h.count>0&&(i.boundArray(h,s,o,t),this.buildDrawCalls(h,l,this._bufferSize),++a,++o);for(let c=0;c<s.length;c++)s[c]=null;Z._globalBatch=o}buildDrawCalls(e,t,r){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:n,vertexSize:o}=this,a=St._drawCallPool;let h=this._dcIndex,l=this._aIndex,c=this._iIndex,u=a[h];u.start=this._iIndex,u.texArray=e;for(let f=t;f<r;++f){const y=i[f],m=y._texture.baseTexture,B=Ic[m.alphaMode?1:0][y.blendMode];i[f]=null,t<f&&u.blend!==B&&(u.size=c-u.start,t=f,u=a[++h],u.texArray=e,u.start=c),this.packInterleavedGeometry(y,s,n,l,c),l+=y.vertexData.length/2*o,c+=y.indices.length,u.blend=B}t<r&&(u.size=c-u.start,++h),this._dcIndex=h,this._aIndex=l,this._iIndex=c}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;St.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,i=St._drawCallPool;let s=null;for(let n=0;n<e;n++){const{texArray:o,type:a,size:h,start:l,blend:c}=i[n];s!==o&&(s=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,r.set(this.state),t.drawElements(a,h,t.UNSIGNED_SHORT,l*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),St.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=li(Math.ceil(e/8)),r=jn(t),i=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new Tc(i*this.vertexSize*4)),s}getIndexBuffer(e){const t=li(Math.ceil(e/12)),r=jn(t),i=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,r,i,s){const{uint32View:n,float32View:o}=t,a=i/this.vertexSize,h=e.uvs,l=e.indices,c=e.vertexData,u=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),y=ae.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<c.length;m+=2)o[i++]=c[m],o[i++]=c[m+1],o[i++]=h[m],o[i++]=h[m+1],n[i++]=y,o[i++]=u;for(let m=0;m<l.length;m++)r[s++]=a+l[m]}};let Mt=St;Mt.defaultBatchSize=4096;Mt.extension={name:"batch",type:G.RendererPlugin};Mt._drawCallPool=[];Mt._textureArrayPool=[];K.add(Mt);var ou=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,au=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const rr=class extends gi{constructor(e,t,r){const i=zt.from(e||rr.defaultVertexSrc,t||rr.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=rr.defaultResolution,this.multisample=rr.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Er}apply(e,t,r,i,s){e.applyFilter(this,t,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return au}static get defaultFragmentSrc(){return ou}};let re=rr;re.defaultResolution=1;re.defaultMultisample=at.NONE;class yi{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ae(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:r,background:i,backgroundAlpha:s}=t,n=i??r;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}yi.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};yi.extension={type:[G.RendererSystem,G.CanvasRendererSystem],name:"background"};K.add(yi);class Wo{constructor(t){this.renderer=t,this.emptyRenderer=new Xo(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,r){const{boundTextures:i}=this.renderer.texture;for(let s=r-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)}boundArray(t,r,i,s){const{elements:n,ids:o,count:a}=t;let h=0;for(let l=0;l<a;l++){const c=n[l],u=c._batchLocation;if(u>=0&&u<s&&r[u]===c){o[l]=u;continue}for(;h<s;){const f=r[h];if(f&&f._batchEnabled===i&&f._batchLocation===h){h++;continue}o[l]=h,c._batchLocation=h,r[h]=c;break}}}destroy(){this.renderer=null}}Wo.extension={type:G.RendererSystem,name:"batch"};K.add(Wo);let eo=0;class vi{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=eo++}init(t){if(t.context)this.initFromContext(t.context);else{const r=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=eo++,this.renderer.runners.contextChange.emit(t);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const r=this.createContext(this.renderer.view,t);this.initFromContext(r)}createContext(t,r){let i;if(j.PREFER_ENV>=Ie.WEBGL2&&(i=t.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,r={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const r=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}vi.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};vi.extension={type:G.RendererSystem,name:"context"};K.add(vi);class hu extends Ys{upload(t,r,i){const s=t.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ne.UNPACK);const n=r.realWidth,o=r.realHeight;return i.width===n&&i.height===o?s.texSubImage2D(r.target,0,0,0,n,o,r.format,i.type,this.data):(i.width=n,i.height=o,s.texImage2D(r.target,0,i.internalFormat,n,o,0,r.format,i.type,this.data)),!0}}class bs{constructor(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Dt("disposeFramebuffer"),this.multisample=at.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,r){return this.colorTextures[t]=r||new Z(null,{scaleMode:vt.NEAREST,resolution:1,mipmap:xe.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Z(new hu(null,{width:this.width,height:this.height}),{scaleMode:vt.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:xe.OFF,format:F.DEPTH_COMPONENT,type:J.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const s=this.colorTextures[i],n=s.resolution;s.setSize(t/n,r/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,r/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class jo extends Z{constructor(t={}){if(typeof t=="number"){const r=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];t={width:r,height:i,scaleMode:s,resolution:n}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=at.NONE),super(null,t),this.mipmap=xe.OFF,this.valid=!0,this._clear=new ae([0,0,0,0]),this.framebuffer=new bs(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class ie extends pr{constructor(t){const r=t,i=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;super(i,s),this.source=t,this.noSubImage=!1}static crossOrigin(t,r,i){i===void 0&&!r.startsWith("data:")?t.crossOrigin=bc(r):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,r,i,s){const n=t.gl,o=r.realWidth,a=r.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1&&s.buffered.length===0)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===ne.UNPACK),!this.noSubImage&&r.target===n.TEXTURE_2D&&i.width===o&&i.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,i.type,s):(i.width=o,i.height=a,n.texImage2D(r.target,0,i.internalFormat,r.format,i.type,s)),!0}update(){if(this.destroyed)return;const t=this.source,r=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(r,i),super.update()}dispose(){this.source=null}}class Yo extends ie{constructor(t,r){if(r=r||{},typeof t=="string"){const i=new Image;ie.crossOrigin(i,t,r.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??j.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((r,i)=>{const s=this.source;this.url=s.src;const n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.resize(s.width,s.height),this._load=null,this.createBitmap?r(this.process()):r(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>r(s,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ne.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,r,i){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,r,i,this.bitmap),!this.preserveBitmap){let s=!0;const n=r._glTextures;for(const o in n){const a=n[o];if(a!==i&&a.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class zo{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,r,i){const s=r.width,n=r.height;if(i){const o=t.width/2/s,a=t.height/2/n,h=t.x/s+o,l=t.y/n+a;i=st.add(i,st.NW),this.x0=h+o*st.uX(i),this.y0=l+a*st.uY(i),i=st.add(i,2),this.x1=h+o*st.uX(i),this.y1=l+a*st.uY(i),i=st.add(i,2),this.x2=h+o*st.uX(i),this.y2=l+a*st.uY(i),i=st.add(i,2),this.x3=h+o*st.uX(i),this.y3=l+a*st.uY(i)}else this.x0=t.x/s,this.y0=t.y/n,this.x1=(t.x+t.width)/s,this.y1=t.y/n,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/n,this.x3=t.x/s,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const ro=new zo;function Vr(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class W extends yr{constructor(t,r,i,s,n,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new rt(0,0,1,1)),t instanceof W&&(t=t.baseTexture),this.baseTexture=t,this._frame=r,this.trim=s,this.valid=!1,this._uvs=ro,this.uvMatrix=null,this.orig=i||r,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new it(o.x,o.y):new it(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=r:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:r}=this.baseTexture;r!=null&&r.url&&kt[r.url]&&W.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,W.removeFromCache(this),this.textureCacheIds=null}clone(){var s;const t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new W(this.baseTexture,!this.noFrame&&t,r,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===ro&&(this._uvs=new zo),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,r={},i=j.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else if(t instanceof Z){if(!t.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Ar()}`,Z.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Ar()}`}n=t._pixiId}let o=kt[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(t instanceof Z)?(r.resolution||(r.resolution=zn(t)),o=new W(new Z(t,r)),o.baseTexture.cacheId=n,Z.addToCache(o.baseTexture,n),W.addToCache(o,n)):!o&&t instanceof Z&&(o=new W(t),W.addToCache(o,n)),o}static fromURL(t,r){const i=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),s=W.from(t,Object.assign({resourceOptions:i},r),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(t,r,i,s){return new W(Z.fromBuffer(t,r,i,s))}static fromLoader(t,r,i,s){const n=new Z(t,Object.assign({scaleMode:Z.defaultOptions.scaleMode,resolution:zn(r)},s)),{resource:o}=n;o instanceof Yo&&(o.url=r);const a=new W(n);return i||(i=r),Z.addToCache(a.baseTexture,i),W.addToCache(a,i),i!==r&&(Z.addToCache(a.baseTexture,r),W.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(h=>{a.baseTexture.once("loaded",()=>h(a))})}static addToCache(t,r){r&&(t.textureCacheIds.includes(r)||t.textureCacheIds.push(r),kt[r]&&kt[r]!==t&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),kt[r]=t)}static removeFromCache(t){if(typeof t=="string"){const r=kt[t];if(r){const i=r.textureCacheIds.indexOf(t);return i>-1&&r.textureCacheIds.splice(i,1),delete kt[t],r}}else if(t!=null&&t.textureCacheIds){for(let r=0;r<t.textureCacheIds.length;++r)kt[t.textureCacheIds[r]]===t&&delete kt[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:r,y:i,width:s,height:n}=t,o=r+s>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){const h=o&&a?"and":"or",l=`X: ${r} + ${s} = ${r+s} > ${this.baseTexture.width}`,c=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${l} ${h} ${c}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return W._EMPTY||(W._EMPTY=new W(new Z),Vr(W._EMPTY),Vr(W._EMPTY.baseTexture)),W._EMPTY}static get WHITE(){if(!W._WHITE){const t=j.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),W._WHITE=new W(Z.from(t)),Vr(W._WHITE),Vr(W._WHITE.baseTexture)}return W._WHITE}}class Ei extends W{constructor(t,r){super(t,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,r,i=!0){const s=this.baseTexture.resolution,n=Math.round(t*s)/s,o=Math.round(r*s)/s;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(t){const{baseTexture:r}=this;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))}static create(t){return new Ei(new jo(t))}}class Jo{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,r,i=at.NONE){const s=new jo(Object.assign({width:t,height:r,resolution:1,multisample:i},this.textureOptions));return new Ei(s)}getOptimalTexture(t,r,i=1,s=at.NONE){let n;t=Math.ceil(t*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=li(t),r=li(r),n=((t&65535)<<16|r&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(t,r,s)),o.filterPoolKey=n,o.setResolution(i),o}getFilterTexture(t,r,i){const s=this.getOptimalTexture(t.width,t.height,r||t.resolution,i||at.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){const r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const r in this.texturePool){const i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const i=this.texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Jo.SCREEN_KEY=-1;class lu extends Ve{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class cu extends Ve{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new yt(this.vertices),this.uvBuffer=new yt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,r){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+r.width/t.width,this.uvs[3]=s,this.uvs[4]=i+r.width/t.width,this.uvs[5]=s+r.height/t.height,this.uvs[6]=i,this.uvs[7]=s+r.height/t.height,i=r.x,s=r.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+r.width,this.vertices[3]=s,this.vertices[4]=i+r.width,this.vertices[5]=s+r.height,this.vertices[6]=i,this.vertices[7]=s+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class uu{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=at.NONE,this.sourceFrame=new rt,this.destinationFrame=new rt,this.bindingSourceFrame=new rt,this.bindingDestinationFrame=new rt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Hr=[new it,new it,new it,new it],qi=new ft;class Ko{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Jo,this.statePool=[],this.quad=new lu,this.quadUv=new cu,this.tempRect=new rt,this.activeState={},this.globalUniforms=new Vt({outputFrame:new rt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,r){const i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new uu,o=this.renderer.renderTexture;let a=r[0].resolution,h=r[0].multisample,l=r[0].padding,c=r[0].autoFit,u=r[0].legacy??!0;for(let m=1;m<r.length;m++){const B=r[m];a=Math.min(a,B.resolution),h=Math.min(h,B.multisample),l=this.useMaxPadding?Math.max(l,B.padding):l+B.padding,c=c&&B.autoFit,u=u||(B.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(n),n.resolution=a,n.multisample=h,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(l);const f=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(qi.copyFrom(i.projection.transform).invert(),f),c?(n.sourceFrame.fit(f),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(f)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,a,h),n.filters=r,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const y=this.tempRect;y.x=0,y.y=0,y.width=n.sourceFrame.width,y.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,y),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,r=t.pop(),i=r.filters;this.activeState=r;const s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;const n=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(n[0]=r.destinationFrame.width,n[1]=r.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*r.resolution),o[1]=Math.round(n[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*n[2]-.5*o[2],a[3]=r.sourceFrame.height*n[3]-.5*o[3],r.legacy){const l=s.filterArea;l[0]=r.destinationFrame.width,l[1]=r.destinationFrame.height,l[2]=r.sourceFrame.x,l[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const h=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,h.renderTexture,ue.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let l=r.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,r.resolution);c.filterFrame=l.filterFrame;let u=0;for(u=0;u<i.length-1;++u){u===1&&r.multisample>1&&(c=this.getOptimalFilterTexture(l.width,l.height,r.resolution),c.filterFrame=l.filterFrame),i[u].apply(this,l,c,ue.CLEAR,r);const f=l;l=c,c=f}i[u].apply(this,l,h.renderTexture,ue.BLEND,r),u>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(c)}r.clear(),this.statePool.push(r)}bindAndClear(t,r=ue.CLEAR){const{renderTexture:i,state:s}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=s.stateId&1||this.forceClear;(r===ue.CLEAR||r===ue.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,r,i,s){const n=this.renderer;n.state.set(t.state),this.bindAndClear(i,s),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(ii.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(ii.TRIANGLE_STRIP))}calculateSpriteMatrix(t,r){const{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=r._texture,o=t.set(s.width,0,0,s.height,i.x,i.y),a=r.worldTransform.copyTo(ft.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,r,i=1,s=at.NONE){return this.texturePool.getOptimalTexture(t,r,i,s)}getFilterTexture(t,r,i){if(typeof t=="number"){const n=t;t=r,r=n}t=t||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,i||at.NONE);return s.filterFrame=t.filterFrame,s}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,r){const i=Hr[0],s=Hr[1],n=Hr[2],o=Hr[3];i.set(r.left,r.top),s.set(r.left,r.bottom),n.set(r.right,r.top),o.set(r.right,r.bottom),t.apply(i,i),t.apply(s,s),t.apply(n,n),t.apply(o,o);const a=Math.min(i.x,s.x,n.x,o.x),h=Math.min(i.y,s.y,n.y,o.y),l=Math.max(i.x,s.x,n.x,o.x),c=Math.max(i.y,s.y,n.y,o.y);r.x=a,r.y=h,r.width=l-a,r.height=c-h}roundFrame(t,r,i,s,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){const{a:o,b:a,c:h,d:l}=n;if((Math.abs(a)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}n=n?qi.copyFrom(n):qi.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,t),t.ceil(r),this.transformAABB(n.invert(),t)}}}Ko.extension={type:G.RendererSystem,name:"filter"};K.add(Ko);class fu{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=at.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const du=new rt;class Zo{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new bs(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new rt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;j.PREFER_ENV===Ie.WEBGL_LEGACY&&(r=null,i=null),r?t.drawBuffers=s=>r.drawBuffersWEBGL(s):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,r,i=0){const{gl:s}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){const o=r.width>>i,a=r.height>>i,h=o/r.width;this.setViewport(r.x*h,r.y*h,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,r,i,s){const n=this.viewport;t=Math.round(t),r=Math.round(r),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==t||n.y!==r)&&(n.x=t,n.y=r,n.width=i,n.height=s,this.gl.viewport(t,r,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,r,i,s,n=os.COLOR|os.DEPTH){const{gl:o}=this;o.clearColor(t,r,i,s),o.clear(n)}initFramebuffer(t){const{gl:r}=this,i=new fu(r.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:r}=this,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));const s=t.colorTextures;let n=s.length;r.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=s[o],h=a.parentTextureArray||a;this.renderer.texture.bind(h,0),o===0&&i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,r){const{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let o=n.length;i.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(t)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let h=0;h<o;h++){const l=n[h],c=l.parentTextureArray||l;this.renderer.texture.bind(c,0),h===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,l.target,c._glTextures[this.CONTEXT_UID].texture,r),a.push(i.COLOR_ATTACHMENT0+h))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const l=t.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,r)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(s.stencil=s.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s.stencil)):s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:r}=this;let i=at.NONE;if(t<=1||r===null)return i;for(let s=0;s<r.length;s++)if(r[s]<=t){i=r[s];break}return i===1&&(i=at.NONE),i}blit(t,r,i){const{current:s,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!s)return;const h=s.glFramebuffers[a];if(!h)return;if(!t){if(!h.msaaBuffer)return;const c=s.colorTextures[0];if(!c)return;h.blitFramebuffer||(h.blitFramebuffer=new bs(s.width,s.height),h.blitFramebuffer.addColorTexture(0,c)),t=h.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}r||(r=du,r.width=s.width,r.height=s.height),i||(i=r);const l=r.width===i.width&&r.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,r){const i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),r||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,r)}disposeAll(t){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<r.length;i++)this.disposeFramebuffer(r[i],t)}forceStencil(){const t=this.current;if(!t)return;const r=t.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;t.stencil=!0;const i=t.width,s=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,i,s):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,s),r.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new rt}destroy(){this.renderer=null}}Zo.extension={type:G.RendererSystem,name:"framebuffer"};K.add(Zo);const $i={5126:4,5123:2,5121:1};class qo{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;j.PREFER_ENV===Ie.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=s=>i.bindVertexArrayOES(s),t.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),t.drawElementsInstanced=(s,n,o,a,h)=>i.drawElementsInstancedANGLE(s,n,o,a,h),t.drawArraysInstanced=(s,n,o,a)=>i.drawArraysInstancedANGLE(s,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(t,r){r=r||this.renderer.shader.shader;const{gl:i}=this;let s=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);const o=s[r.program.id]||this.initGeometryVao(t,r,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,r=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const s=t.buffers[i];r.update(s)}}checkCompatibility(t,r){const i=t.attributes,s=r.attributeData;for(const n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,r){const i=t.attributes,s=r.attributeData,n=["g",t.id];for(const o in i)s[o]&&n.push(o,s[o].location);return n.join("-")}initGeometryVao(t,r,i=!0){const s=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[n]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);const h=this.getSignature(t,a),l=t.glVertexArrayObjects[this.CONTEXT_UID];let c=l[h];if(c)return l[a.id]=c,c;const u=t.buffers,f=t.attributes,y={},m={};for(const B in u)y[B]=0,m[B]=0;for(const B in f)!f[B].size&&a.attributeData[B]?f[B].size=a.attributeData[B].size:f[B].size||console.warn(`PIXI Geometry attribute '${B}' size cannot be determined (likely the bound shader does not have the attribute)`),y[f[B].buffer]+=f[B].size*$i[f[B].type];for(const B in f){const I=f[B],w=I.size;I.stride===void 0&&(y[I.buffer]===w*$i[I.type]?I.stride=0:I.stride=y[I.buffer]),I.start===void 0&&(I.start=m[I.buffer],m[I.buffer]+=w*$i[I.type])}c=s.createVertexArray(),s.bindVertexArray(c);for(let B=0;B<u.length;B++){const I=u[B];o.bind(I),i&&I._glBuffers[n].refCount++}return this.activateVao(t,a),l[a.id]=c,l[h]=c,s.bindVertexArray(null),o.unbind(Gt.ARRAY_BUFFER),c}disposeGeometry(t,r){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let h=0;h<n.length;h++){const l=n[h]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&o.dispose(n[h],r))}if(!r){for(const h in i)if(h[0]==="g"){const l=i[h];this._activeVao===l&&this.unbind(),s.deleteVertexArray(l)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const r=Object.keys(this.managedGeometries);for(let i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],t)}activateVao(t,r){const i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let h=null;for(const l in a){const c=a[l],u=o[c.buffer],f=u._glBuffers[s];if(r.attributeData[l]){h!==f&&(n.bind(u),h=f);const y=r.attributeData[l].location;if(i.enableVertexAttribArray(y),i.vertexAttribPointer(y,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)i.vertexAttribDivisor(y,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,r,i,s){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,h=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,r||o.indexBuffer.data.length,h,(i||0)*a,s||1):n.drawElements(t,r||o.indexBuffer.data.length,h,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,r||o.getSize(),s||1):n.drawArrays(t,i,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}qo.extension={type:G.RendererSystem,name:"geometry"};K.add(qo);const io=new ft;class Au{constructor(t,r){this._texture=t,this.mapCoord=new ft,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,r){r===void 0&&(r=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const n=t[s],o=t[s+1];r[s]=n*i.a+o*i.c+i.tx,r[s+1]=n*i.b+o*i.d+i.ty}return r}update(t){const r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=r.orig,n=r.trim;n&&(io.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(io));const o=r.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(r._frame.x+h+l)/o.width,a[1]=(r._frame.y+h+l)/o.height,a[2]=(r._frame.x+r._frame.width-h+l)/o.width,a[3]=(r._frame.y+r._frame.height-h+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var pu=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,mu=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class gu extends re{constructor(t,r,i){let s=null;typeof t!="string"&&r===void 0&&i===void 0&&(s=t,t=void 0,r=void 0,i=void 0),super(t||mu,r||pu,i),this.maskSprite=s,this.maskMatrix=new ft}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,r,i,s){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Au(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,r,i,s))}}class yu{constructor(t=null){this.type=ht.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=re.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ht.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class $o{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,r){let i=r;if(!i.isMaskData){const n=this.maskDataPool.pop()||new yu;n.pooled=!0,n.maskObject=r,i=n}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==ht.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case ht.SCISSOR:this.renderer.scissor.push(i);break;case ht.STENCIL:this.renderer.stencil.push(i);break;case ht.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case ht.COLOR:this.pushColorMask(i);break}i.type===ht.SPRITE&&this.maskStack.push(i)}pop(t){const r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case ht.SCISSOR:this.renderer.scissor.pop(r);break;case ht.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case ht.SPRITE:this.popSpriteMask(r);break;case ht.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===ht.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const r=t.maskObject;r?r.isSprite?t.type=ht.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=ht.SCISSOR:t.type=ht.STENCIL:t.type=ht.COLOR}pushSpriteMask(t){const{maskObject:r}=t,i=t._target;let s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new gu]));const n=this.renderer,o=n.renderTexture;let a,h;if(o.current){const c=o.current;a=t.resolution||c.resolution,h=t.multisample??c.multisample}else a=t.resolution||n.resolution,h=t.multisample??n.multisample;s[0].resolution=a,s[0].multisample=h,s[0].maskSprite=r;const l=i.filterArea;i.filterArea=r.getBounds(!0),n.filter.push(i,s),i.filterArea=l,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const r=t._colorMask,i=t._colorMask=r&t.colorMask;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const r=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}$o.extension={type:G.RendererSystem,name:"mask"};K.add($o);class ta{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:r}=this.renderer,i=this.getStackLength();this.maskStack=t;const s=this.getStackLength();s!==i&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const so=new ft,no=[],$r=class extends ta{constructor(e){super(e),this.glConst=j.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,n=r.getBounds(!0,no.pop()??new rt);this.roundFrameToPixels(n,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&n.fit(t),e._scissorRectLocal=n}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||$r.isMatrixRotated(t.worldTransform)||$r.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,i,s){$r.isMatrixRotated(s)||(s=s?so.copyFrom(s):so.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&no.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let ea=$r;ea.extension={type:G.RendererSystem,name:"scissor"};K.add(ea);class ra extends ta{constructor(t){super(t),this.glConst=j.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const r=t.maskObject,{gl:i}=this.renderer,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;n!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,n!==0&&(t._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}ra.extension={type:G.RendererSystem,name:"stencil"};K.add(ra);class ia{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return q("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return q("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return q("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const r in t)this.plugins[r]=new t[r](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}ia.extension={type:[G.RendererSystem,G.CanvasRendererSystem],name:"_plugin"};K.add(ia);class sa{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ft,this.transform=null}update(t,r,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,r,i,s){const n=this.projectionMatrix,o=s?-1:1;n.identity(),n.a=1/r.width*2,n.d=o*(1/r.height*2),n.tx=-1-r.x*n.a,n.ty=-o-r.y*n.d}setTransform(t){}destroy(){this.renderer=null}}sa.extension={type:G.RendererSystem,name:"projection"};K.add(sa);const vu=new zs;class na{constructor(t){this.renderer=t,this._tempMatrix=new ft}generateTexture(t,r){const{region:i,...s}=r||{},n=i||t.getLocalBounds(null,!0);n.width===0&&(n.width=1),n.height===0&&(n.height=1);const o=Ei.create({width:n.width,height:n.height,...s});this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const a=t.transform;return t.transform=vu,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}na.extension={type:[G.RendererSystem,G.CanvasRendererSystem],name:"textureGenerator"};K.add(na);const le=new rt,$e=new rt;class oa{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new rt,this.destinationFrame=new rt,this.viewportFrame=new rt}contextChange(){var r;const t=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,r,i){const s=this.renderer;this.current=t;let n,o,a;t?(n=t.baseTexture,a=n.resolution,r||(le.width=t.frame.width,le.height=t.frame.height,r=le),i||($e.x=t.frame.x,$e.y=t.frame.y,$e.width=r.width,$e.height=r.height,i=$e),o=n.framebuffer):(a=s.resolution,r||(le.width=s._view.screen.width,le.height=s._view.screen.height,r=le),i||(i=le,i.width=r.width,i.height=r.height));const h=this.viewportFrame;h.x=i.x*a,h.y=i.y*a,h.width=i.width*a,h.height=i.height*a,t||(h.y=s.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(i,r,a,!o),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)}clear(t,r){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=ae.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:h,y:l,width:c,height:u}=this.viewportFrame;h=Math.round(h),l=Math.round(l),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,l,c,u)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}oa.extension={type:G.RendererSystem,name:"renderTexture"};K.add(oa);class Eu{constructor(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function xu(e,t){const r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const n=t.getActiveAttrib(e,s);if(n.name.startsWith("gl_"))continue;const o=Ho(t,n.type),a={type:o,name:n.name,size:Vo(o),location:t.getAttribLocation(e,n.name)};r[n.name]=a}return r}function _u(e,t){const r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const n=t.getActiveUniform(e,s),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),h=Ho(t,n.type);r[o]={name:o,index:s,type:h,size:n.size,isArray:a,value:Lo(h,n.size)}}return r}function Iu(e,t){var h;const r=Zn(e,e.VERTEX_SHADER,t.vertexSrc),i=Zn(e,e.FRAGMENT_SHADER,t.fragmentSrc),s=e.createProgram();e.attachShader(s,r),e.attachShader(s,i);const n=(h=t.extra)==null?void 0:h.transformFeedbackVaryings;if(n&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(s),e.getProgramParameter(s,e.LINK_STATUS)||Jc(e,s,r,i),t.attributeData=xu(s,e),t.uniformData=_u(s,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const l=Object.keys(t.attributeData);l.sort((c,u)=>c>u?1:-1);for(let c=0;c<l.length;c++)t.attributeData[l[c]].location=c,e.bindAttribLocation(s,c,l[c]);e.linkProgram(s)}e.deleteShader(r),e.deleteShader(i);const o={};for(const l in t.uniformData){const c=t.uniformData[l];o[l]={location:e.getUniformLocation(s,l),value:Lo(c.type,c.size)}}return new Eu(s,o)}function Bu(e,t,r,i,s){r.buffer.update(s)}const bu={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},aa={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Tu(e){const t=e.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let r=0,i=0,s=0;for(let n=0;n<t.length;n++){const o=t[n];if(r=aa[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,i%r!==0&&i<16){const a=i%r%16;i+=a,s+=a}i+r>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=r,i=r):(o.offset=s,i+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}function wu(e,t){const r=[];for(const i in e)t[i]&&r.push(t[i]);return r.sort((i,s)=>i.index-s.index),r}function Cu(e,t){if(!e.autoManage)return{size:0,syncFunc:Bu};const r=wu(e.uniforms,t),{uboElements:i,size:s}=Tu(r),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],h=e.uniforms[a.data.name],l=a.data.name;let c=!1;for(let u=0;u<Qe.length;u++){const f=Qe[u];if(f.codeUbo&&f.test(a.data,h)){n.push(`offset = ${a.offset/4};`,Qe[u].codeUbo(a.data.name,h)),c=!0;break}}if(!c)if(a.data.size>1){const u=Vo(a.data.type),f=Math.max(aa[a.data.type]/16,1),y=u/f,m=(4-y%4)%4;n.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${y}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${m};
                }

                `)}else{const u=bu[a.data.type];n.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};
                ${u};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let Su=0;const Xr={textureCount:0,uboCount:0};class ha{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Su++}systemCheck(){if(!Zc())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,r){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),r||(Xr.textureCount=0,Xr.uboCount=0,this.syncUniformGroup(t.uniformGroup,Xr)),s}setUniforms(t){const r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,r){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,r))}syncUniforms(t,r,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(r.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=jc(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,r){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const s=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,r);t.buffer.update(),s(i.uniformData,t.uniforms,this.renderer,Xr,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[r])}createSyncBufferGroup(t,r,i){const{gl:s}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=Cu(t,this.shader.program.uniformData)),t.autoManage){const h=new Float32Array(a.size/4);t.buffer.update(h)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]}getSignature(t,r,i){const s=t.uniforms,n=[`${i}-`];for(const o in s)n.push(o),r[o]&&n.push(r[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const r=this.gl,i=t.program,s=Iu(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ha.extension={type:G.RendererSystem,name:"shader"};K.add(ha);class xi{constructor(t){this.renderer=t}run(t){const{renderer:r}=this;r.runners.init.emit(r.options),t.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}xi.defaultOptions={hello:!1};xi.extension={type:[G.RendererSystem,G.CanvasRendererSystem],name:"startup"};K.add(xi);function Ru(e,t=[]){return t[k.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.ADD]=[e.ONE,e.ONE],t[k.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.NONE]=[0,0],t[k.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[k.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[k.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[k.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[k.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[k.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[k.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[k.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[k.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[k.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const Mu=0,Pu=1,Nu=2,Fu=3,Du=4,Ou=5,Ts=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=k.NONE,this._blendEq=!1,this.map=[],this.map[Mu]=this.setBlend,this.map[Pu]=this.setOffset,this.map[Nu]=this.setCullFace,this.map[Fu]=this.setDepthTest,this.map[Du]=this.setFrontFace,this.map[Ou]=this.setDepthMask,this.checks=[],this.defaultState=new Er,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=Ru(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Ts.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Ts.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let la=Ts;la.extension={type:G.RendererSystem,name:"state"};K.add(la);class Uu extends yr{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const r=(t.priority??[]).filter(s=>t.systems[s]),i=[...r,...Object.keys(t.systems).filter(s=>!r.includes(s))];for(const s of i)this.addSystem(t.systems[s],s)}addRunners(...t){t.forEach(r=>{this.runners[r]=new Dt(r)})}addSystem(t,r){const i=new t(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=i,this._systemsHash[r]=i;for(const s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(t,r){const i=Object.keys(this._systemsHash);t.items.forEach(s=>{const n=i.find(o=>this._systemsHash[o]===s);s[t.name](r[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const ti=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ti.defaultMaxIdle,this.checkCountMax=ti.defaultCheckCountMax,this.mode=ti.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Qs.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let i=0;i<t.length;i++){const s=t[i];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};let Pt=ti;Pt.defaultMode=Qs.AUTO;Pt.defaultMaxIdle=60*60;Pt.defaultCheckCountMax=60*10;Pt.extension={type:G.RendererSystem,name:"textureGC"};K.add(Pt);class ts{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=J.UNSIGNED_BYTE,this.internalFormat=F.RGBA,this.samplerType=0}}function Qu(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[J.UNSIGNED_BYTE]:{[F.RGBA]:e.RGBA8,[F.RGB]:e.RGB8,[F.RG]:e.RG8,[F.RED]:e.R8,[F.RGBA_INTEGER]:e.RGBA8UI,[F.RGB_INTEGER]:e.RGB8UI,[F.RG_INTEGER]:e.RG8UI,[F.RED_INTEGER]:e.R8UI,[F.ALPHA]:e.ALPHA,[F.LUMINANCE]:e.LUMINANCE,[F.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[J.BYTE]:{[F.RGBA]:e.RGBA8_SNORM,[F.RGB]:e.RGB8_SNORM,[F.RG]:e.RG8_SNORM,[F.RED]:e.R8_SNORM,[F.RGBA_INTEGER]:e.RGBA8I,[F.RGB_INTEGER]:e.RGB8I,[F.RG_INTEGER]:e.RG8I,[F.RED_INTEGER]:e.R8I},[J.UNSIGNED_SHORT]:{[F.RGBA_INTEGER]:e.RGBA16UI,[F.RGB_INTEGER]:e.RGB16UI,[F.RG_INTEGER]:e.RG16UI,[F.RED_INTEGER]:e.R16UI,[F.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[J.SHORT]:{[F.RGBA_INTEGER]:e.RGBA16I,[F.RGB_INTEGER]:e.RGB16I,[F.RG_INTEGER]:e.RG16I,[F.RED_INTEGER]:e.R16I},[J.UNSIGNED_INT]:{[F.RGBA_INTEGER]:e.RGBA32UI,[F.RGB_INTEGER]:e.RGB32UI,[F.RG_INTEGER]:e.RG32UI,[F.RED_INTEGER]:e.R32UI,[F.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[J.INT]:{[F.RGBA_INTEGER]:e.RGBA32I,[F.RGB_INTEGER]:e.RGB32I,[F.RG_INTEGER]:e.RG32I,[F.RED_INTEGER]:e.R32I},[J.FLOAT]:{[F.RGBA]:e.RGBA32F,[F.RGB]:e.RGB32F,[F.RG]:e.RG32F,[F.RED]:e.R32F,[F.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[J.HALF_FLOAT]:{[F.RGBA]:e.RGBA16F,[F.RGB]:e.RGB16F,[F.RG]:e.RG16F,[F.RED]:e.R16F},[J.UNSIGNED_SHORT_5_6_5]:{[F.RGB]:e.RGB565},[J.UNSIGNED_SHORT_4_4_4_4]:{[F.RGBA]:e.RGBA4},[J.UNSIGNED_SHORT_5_5_5_1]:{[F.RGBA]:e.RGB5_A1},[J.UNSIGNED_INT_2_10_10_10_REV]:{[F.RGBA]:e.RGB10_A2,[F.RGBA_INTEGER]:e.RGB10_A2UI},[J.UNSIGNED_INT_10F_11F_11F_REV]:{[F.RGB]:e.R11F_G11F_B10F},[J.UNSIGNED_INT_5_9_9_9_REV]:{[F.RGB]:e.RGB9_E5},[J.UNSIGNED_INT_24_8]:{[F.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[J.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[F.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[J.UNSIGNED_BYTE]:{[F.RGBA]:e.RGBA,[F.RGB]:e.RGB,[F.ALPHA]:e.ALPHA,[F.LUMINANCE]:e.LUMINANCE,[F.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[J.UNSIGNED_SHORT_5_6_5]:{[F.RGB]:e.RGB},[J.UNSIGNED_SHORT_4_4_4_4]:{[F.RGBA]:e.RGBA},[J.UNSIGNED_SHORT_5_5_5_1]:{[F.RGBA]:e.RGBA}},t}class ca{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Z,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Qu(t);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let s=0;s<r;s++)this.boundTextures[s]=null;this.emptyTextures={};const i=new ts(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ts(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(t,r=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(t)):s.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:r,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===t&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(t.target,this.emptyTextures[t.target].texture),i[s]=null)}ensureSamplerType(t){const{boundTextures:r,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=t-1;n>=0;--n){const o=r[n];o&&o._glTextures[s].samplerType!==as.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const r=new ts(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r}initTextureType(t,r){var i;r.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,this.webGLVersion===2&&t.type===J.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type}updateTexture(t){var s;const r=t._glTextures[this.CONTEXT_UID];if(!r)return;const i=this.renderer;if(this.initTextureType(t,r),(s=t.resource)!=null&&s.upload(i,t,r))r.samplerType!==as.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,o=t.realHeight,a=i.gl;(r.width!==n||r.height!==o||r.dirtyId<0)&&(r.width=n,r.height=o,a.texImage2D(t.target,0,r.internalFormat,n,o,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}destroyTexture(t,r){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){const s=this.managedTextures.indexOf(t);s!==-1&&qr(this.managedTextures,s,1)}}updateTextureStyle(t){var i;const r=t._glTextures[this.CONTEXT_UID];r&&((t.mipmap===xe.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=Us.CLAMP:r.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)}setStyle(t,r){const i=this.gl;if(r.mipmap&&t.mipmap!==xe.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vt.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===vt.LINEAR){const n=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vt.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===vt.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}ca.extension={type:G.RendererSystem,name:"texture"};K.add(ca);class ua{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:i}=this,s=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,r){const{gl:i,renderer:s}=this;r&&s.shader.bind(r),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:r,renderer:i,CONTEXT_UID:s}=this,n=r.createTransformFeedback();t._glTransformFeedbacks[s]=n,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[s].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,r){const i=t._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const h=a._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&n.dispose(a,r))}i&&(r||s.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}ua.extension={type:G.RendererSystem,name:"transformFeedback"};K.add(ua);class _i{constructor(t){this.renderer=t}init(t){this.screen=new rt(0,0,t.width,t.height),this.element=t.view||j.ADAPTER.createCanvas(),this.resolution=t.resolution||j.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,r){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(r*this.resolution);const i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var r;t&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}_i.defaultOptions={width:800,height:600,resolution:j.RESOLUTION,autoDensity:!1};_i.extension={type:[G.RendererSystem,G.CanvasRendererSystem],name:"_view"};K.add(_i);j.PREFER_ENV=Ie.WEBGL2;j.STRICT_TEXTURE_CACHE=!1;j.RENDER_OPTIONS={...vi.defaultOptions,...yi.defaultOptions,..._i.defaultOptions,...xi.defaultOptions};Object.defineProperties(j,{WRAP_MODE:{get(){return Z.defaultOptions.wrapMode},set(e){q("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Z.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return Z.defaultOptions.scaleMode},set(e){q("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Z.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return Z.defaultOptions.mipmap},set(e){q("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Z.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return Z.defaultOptions.anisotropicLevel},set(e){q("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Z.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return q("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),re.defaultResolution},set(e){re.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return q("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),re.defaultMultisample},set(e){re.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Mt.defaultMaxTextures},set(e){q("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Mt.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Mt.defaultBatchSize},set(e){q("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Mt.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Mt.canUploadSameBuffer},set(e){q("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Mt.canUploadSameBuffer=e}},GC_MODE:{get(){return Pt.defaultMode},set(e){q("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Pt.defaultMode=e}},GC_MAX_IDLE:{get(){return Pt.defaultMaxIdle},set(e){q("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Pt.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return Pt.defaultCheckCountMax},set(e){q("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Pt.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return zt.defaultVertexPrecision},set(e){q("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),zt.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return zt.defaultFragmentPrecision},set(e){q("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),zt.defaultFragmentPrecision=e}}});var mr=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(mr||{});class es{constructor(t,r=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=i,this.once=s}match(t,r=null){return this.fn===t&&this.context===r}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=t?null:r,this.previous=null,r}}const xt=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new es(null,null,1/0),this.deltaMS=1/xt.targetFPMS,this.elapsedMS=1/xt.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=mr.NORMAL){return this._addListener(new es(e,t,r))}addOnce(e,t,r=mr.NORMAL){return this._addListener(new es(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*xt.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,xt.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!xt._shared){const e=xt._shared=new xt;e.autoStart=!0,e._protected=!0}return xt._shared}static get system(){if(!xt._system){const e=xt._system=new xt;e.autoStart=!0,e._protected=!0}return xt._system}};let _t=xt;_t.targetFPMS=.06;Object.defineProperties(j,{TARGET_FPMS:{get(){return _t.targetFPMS},set(e){q("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),_t.targetFPMS=e}}});class fa{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,mr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?_t.shared:new _t,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}fa.extension=G.Application;K.add(fa);const da=[];K.handleByList(G.Renderer,da);function ku(e){for(const t of da)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}class Aa{constructor(t){this.renderer=t}contextChange(t){let r;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}r>=at.HIGH?this.multisample=at.HIGH:r>=at.MEDIUM?this.multisample=at.MEDIUM:r>=at.LOW?this.multisample=at.LOW:this.multisample=at.NONE}destroy(){}}Aa.extension={type:G.RendererSystem,name:"_multisample"};K.add(Aa);class Lu{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class pa{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);r.bindBuffer(t.type,s.buffer)}unbind(t){const{gl:r}=this;r.bindBuffer(t,null)}bindBufferBase(t,r){const{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[r]!==t){const n=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[r]=t,i.bindBufferBase(i.UNIFORM_BUFFER,r,n.buffer)}}bindBufferRange(t,r,i){const{gl:s,CONTEXT_UID:n}=this;i=i||0;const o=t._glBuffers[n]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,o.buffer,i*256,256)}update(t){const{gl:r,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==s.updateID)if(s.updateID=t._updateID,r.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{const n=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,n)}}dispose(t,r){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(r||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const r=Object.keys(this.managedBuffers);for(let i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],t)}createGLBuffer(t){const{CONTEXT_UID:r,gl:i}=this;return t._glBuffers[r]=new Lu(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]}}pa.extension={type:G.RendererSystem,name:"buffer"};K.add(pa);class ma{constructor(t){this.renderer=t}render(t,r){const i=this.renderer;let s,n,o,a;if(r&&(s=r.renderTexture,n=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(s||(this.lastObjectRendered=t),!a){const h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),s&&(r.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ma.extension={type:G.RendererSystem,name:"objectRenderer"};K.add(ma);const ws=class extends Uu{constructor(e){super(),this.type=lo.WEBGL,e=Object.assign({},j.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Vt({projectionMatrix:new ft},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ws.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(q("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=ws.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:fc()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return q("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return q("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return q("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return q("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){q("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return q("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){q("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return q("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let je=ws;je.extension={type:G.Renderer,priority:1};je.__plugins={};je.__systems={};K.handleByMap(G.RendererPlugin,je.__plugins);K.handleByMap(G.RendererSystem,je.__systems);K.add(je);class ga extends pr{constructor(t,r){const{width:i,height:s}=r||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){const o=new Z;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,r){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof pr?this.addResourceAt(t[i],i):this.addResourceAt(Do(t[i],r),i))}dispose(){for(let t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)}unbind(t){super.unbind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)}load(){if(this._load)return this._load;const r=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(r).then(()=>{const{realWidth:i,realHeight:s}=this.items[0];return this.resize(i,s),Promise.resolve(this)}),this._load}}class Gu extends ga{constructor(t,r){const{width:i,height:s}=r||{};let n,o;Array.isArray(t)?(n=t,o=t.length):o=t,super(o,{width:i,height:s}),n&&this.initFromArray(n,r)}addBaseTextureAt(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Fe.TEXTURE_2D_ARRAY}upload(t,r,i){const{length:s,itemDirtyIds:n,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,r.format,i.type,null);for(let h=0;h<s;h++){const l=o[h];n[h]<l.dirtyId&&(n[h]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,l.resource.width,l.resource.height,1,r.format,i.type,l.resource.source))}return!0}}class Vu extends ie{constructor(t){super(t)}static test(t){const{OffscreenCanvas:r}=globalThis;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const ir=class extends ga{constructor(e,t){const{width:r,height:i,autoLoad:s,linkBaseTexture:n}=t||{};if(e&&e.length!==ir.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let o=0;o<ir.SIDES;o++)this.items[o].target=Fe.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=n!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Fe.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Fe.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const i=this.itemDirtyIds;for(let s=0;s<ir.SIDES;s++){const n=this.items[s];(i[s]<n.dirtyId||r.dirtyId<t.dirtyId)&&(n.valid&&n.resource?(n.resource.upload(e,n,r),i[s]=n.dirtyId):i[s]<-1&&(e.gl.texImage2D(n.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===ir.SIDES}};let ya=ir;ya.SIDES=6;class Ne extends ie{constructor(t,r){r=r||{};let i,s;typeof t=="string"?(i=Ne.EMPTY,s=t):(i=t,s=null),super(i),this.url=s,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,r)=>{if(this.url===null){t(this);return}try{const i=await j.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ne.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),t(this)}catch(i){if(this.destroyed)return;r(i),this.onError.emit(i)}}),this._load)}upload(t,r,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(t,r,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Ne._EMPTY=Ne._EMPTY??j.ADAPTER.createCanvas(0,0),Ne._EMPTY}}const ei=class extends ie{constructor(e,t){t=t||{},super(j.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},ei.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;ie.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*t,s=this._overrideHeight||this._overrideWidth/t*r),i=Math.round(i),s=Math.round(s);const n=this.source;n.width=i,n.height=s,n._pixiId=`canvas_${Ar()}`,n.getContext("2d").drawImage(e,0,0,t,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const t=ei.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&ei.SVG_XML.test(e)}};let Js=ei;Js.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Js.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Cs=class extends ie{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];ie.crossOrigin(r,i,t.crossorigin);for(let s=0;s<e.length;++s){const n=document.createElement("source");let{src:o,mime:a}=e[s];o=o||e[s];const h=o.split("?").shift().toLowerCase(),l=h.slice(h.lastIndexOf(".")+1);a=a||Cs.MIME_TYPES[l]||`video/${l}`,n.src=o,n.type=a,r.appendChild(n)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=_t.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(_t.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(_t.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(_t.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(_t.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(_t.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Cs.TYPES.includes(t)}};let Ks=Cs;Ks.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Ks.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Is.push(Ne,Yo,Vu,Ks,Js,Ys,ya,Gu);class Ss{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?rt.EMPTY:(t=t||new rt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,r){const{a:i,b:s,c:n,d:o,tx:a,ty:h}=t,l=i*r.x+n*r.y+a,c=s*r.x+o*r.y+h;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let r=this.minX,i=this.minY,s=this.maxX,n=this.maxY,o=t[0],a=t[1];r=o<r?o:r,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[2],a=t[3],r=o<r?o:r,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[4],a=t[5],r=o<r?o:r,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[6],a=t[7],r=o<r?o:r,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,this.minX=r,this.minY=i,this.maxX=s,this.maxY=n}addFrame(t,r,i,s,n){this.addFrameMatrix(t.worldTransform,r,i,s,n)}addFrameMatrix(t,r,i,s,n){const o=t.a,a=t.b,h=t.c,l=t.d,c=t.tx,u=t.ty;let f=this.minX,y=this.minY,m=this.maxX,B=this.maxY,I=o*r+h*i+c,w=a*r+l*i+u;f=I<f?I:f,y=w<y?w:y,m=I>m?I:m,B=w>B?w:B,I=o*s+h*i+c,w=a*s+l*i+u,f=I<f?I:f,y=w<y?w:y,m=I>m?I:m,B=w>B?w:B,I=o*r+h*n+c,w=a*r+l*n+u,f=I<f?I:f,y=w<y?w:y,m=I>m?I:m,B=w>B?w:B,I=o*s+h*n+c,w=a*s+l*n+u,f=I<f?I:f,y=w<y?w:y,m=I>m?I:m,B=w>B?w:B,this.minX=f,this.minY=y,this.maxX=m,this.maxY=B}addVertexData(t,r,i){let s=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let h=r;h<i;h+=2){const l=t[h],c=t[h+1];s=l<s?l:s,n=c<n?c:n,o=l>o?l:o,a=c>a?c:a}this.minX=s,this.minY=n,this.maxX=o,this.maxY=a}addVertices(t,r,i,s){this.addVerticesMatrix(t.worldTransform,r,i,s)}addVerticesMatrix(t,r,i,s,n=0,o=n){const a=t.a,h=t.b,l=t.c,c=t.d,u=t.tx,f=t.ty;let y=this.minX,m=this.minY,B=this.maxX,I=this.maxY;for(let w=i;w<s;w+=2){const A=r[w],d=r[w+1],x=a*A+l*d+u,_=c*d+h*A+f;y=Math.min(y,x-n),B=Math.max(B,x+n),m=Math.min(m,_-o),I=Math.max(I,_+o)}this.minX=y,this.minY=m,this.maxX=B,this.maxY=I}addBounds(t){const r=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,r){const i=t.minX>r.minX?t.minX:r.minX,s=t.minY>r.minY?t.minY:r.minY,n=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(i<=n&&s<=o){const a=this.minX,h=this.minY,l=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=s<h?s:h,this.maxX=n>l?n:l,this.maxY=o>c?o:c}}addBoundsMatrix(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,r){const i=t.minX>r.x?t.minX:r.x,s=t.minY>r.y?t.minY:r.y,n=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(i<=n&&s<=o){const a=this.minX,h=this.minY,l=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=s<h?s:h,this.maxX=n>l?n:l,this.maxY=o>c?o:c}}pad(t=0,r=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)}addFramePad(t,r,i,s,n,o){t-=n,r-=o,i+=n,s+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s}}class se extends yr{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new zs,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ss,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const r=Object.keys(t);for(let i=0;i<r.length;++i){const s=r[i];Object.defineProperty(se.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new rt),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new rt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ss);const r=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-n,o}toGlobal(t,r,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)}toLocal(t,r,i,s){return r&&(t=r.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,r=0,i=1,s=1,n=0,o=0,a=0,h=0,l=0){return this.position.x=t,this.position.y=r,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=h,this.pivot.y=l,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Hu),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*kc}set angle(t){this.transform.rotation=t*Lc}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class Hu extends se{constructor(){super(...arguments),this.sortDirty=null}}se.prototype.displayObjectUpdateTransform=se.prototype.updateTransform;const Xu=new ft;function Wu(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const Rs=class extends se{constructor(){super(),this.children=[],this.sortableChildren=Rs.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),i=this.getChildIndex(t);this.children[r]=t,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);qr(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,qr(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,qr(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,i=t,s=i-r;let n;if(s>0&&s<=i){n=this.children.splice(r,s);for(let o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(Wu),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){const n=this.children[i];n.visible&&n.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==Rs.prototype._render&&(r=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=Xu.copyFrom(i),i.prepend(s)):i=s),r&&t.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let n=0,o=this.children.length;n<o;++n){const a=this.children[n],h=a.cullable;a.cullable=h||!this.cullArea,a.render(e),a.cullable=h}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let r=0,i=this.children.length;r<i;++r)this.children[r].render(e)}}renderAdvanced(e){var s,n,o;const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const i=t&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==ht.NONE));if(i&&e.batch.flush(),t&&((n=this._enabledFilters)!=null&&n.length)&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,h=this.children.length;a<h;++a)this.children[a].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,r=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let Jt=Rs;Jt.defaultSortableChildren=!1;Jt.prototype.containerUpdateTransform=Jt.prototype.updateTransform;Object.defineProperties(j,{SORTABLE_CHILDREN:{get(){return Jt.defaultSortableChildren},set(e){q("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Jt.defaultSortableChildren=e}}});const Ms=class{constructor(e){this.stage=new Jt,e=Object.assign({forceCanvas:!1},e),this.renderer=ku(e),Ms._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const r=Ms._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Zs=Ms;Zs._plugins=[];K.handleByList(G.Application,Zs._plugins);class va{static init(t){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,i;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:n}=this._resizeTo;r=s,i=n}this.renderer.resize(r,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}va.extension=G.Application;K.add(va);class ju{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(_t.system.add(this.tickerUpdate,this,mr.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(_t.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const te=new ju;class Ii{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Ii.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new it,this.page=new it,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,r,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,r,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ui extends Ii{constructor(){super(...arguments),this.client=new it,this.movement=new it,this.offset=new it,this.global=new it,this.screen=new it}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,r,i){return t.worldTransform.applyInverse(i||this.global,r)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,r,i,s,n,o,a,h,l,c,u,f,y,m,B){throw new Error("Method not implemented.")}}class Rt extends ui{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class He extends ui{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}He.DOM_DELTA_PIXEL=0;He.DOM_DELTA_LINE=1;He.DOM_DELTA_PAGE=2;const Yu=2048,zu=new it,rs=new it;class Ju{constructor(t){this.dispatch=new yr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,r){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:r,priority:0}),this.mappingTable[t].sort((i,s)=>i.priority-s.priority)}dispatchEvent(t,r){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,r),this.dispatch.emit(r||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const r=this.mappingTable[t.type];if(r)for(let i=0,s=r.length;i<s;i++)r[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,r){te.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[s](this.rootTarget,this.rootTarget.eventMode,zu.set(t,r),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,r){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(t.currentTarget=i[s],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,r),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,r,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const s=Array.isArray(r)?r:[r];for(let n=i.length-1;n>=0;n--)s.forEach(o=>{t.currentTarget=i[n],this.notifyTarget(t,o)})}propagationPath(t){const r=[t];for(let i=0;i<Yu&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(t.parent),t=t.parent}return r.reverse(),r}hitTestMoveRecursive(t,r,i,s,n,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(te.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let u=c.length-1;u>=0;u--){const f=c[u],y=this.hitTestMoveRecursive(f,this._isInteractive(r)?r:f.eventMode,i,s,n,o||n(t,i));if(y){if(y.length>0&&!y[y.length-1].parent)continue;const m=t.isInteractive();(y.length>0||m)&&(m&&this._allInteractiveElements.push(t),y.push(t)),this._hitElements.length===0&&(this._hitElements=y),a=!0}}}const h=this._isInteractive(r),l=t.isInteractive();return l&&l&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:h&&!n(t,i)&&s(t,i)?l?[t]:[]:null}hitTestRecursive(t,r,i,s,n){if(this._interactivePrune(t)||n(t,i))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(te.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let l=h.length-1;l>=0;l--){const c=h[l],u=this.hitTestRecursive(c,this._isInteractive(r)?r:c.eventMode,i,s,n);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const f=t.isInteractive();return(u.length>0||f)&&u.push(t),u}}}const o=this._isInteractive(r),a=t.isInteractive();return o&&s(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,r){var i;if(t.hitArea&&(t.worldTransform.applyInverse(r,rs),!t.hitArea.contains(rs.x,rs.y)))return!0;if(t._mask){const s=t._mask.isMaskData?t._mask.maskObject:t._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,r)))return!0}return!1}hitTestFn(t,r){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(r):!1}notifyTarget(t,r){var n,o;r=r??t.type;const i=`on${r}`;(o=(n=t.currentTarget)[i])==null||o.call(n,t);const s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${r}capture`:r;this.notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,r)}mapPointerDown(t){if(!(t instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const s=r.button===2;this.dispatchEvent(r,s?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(t){var h,l;if(!(t instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=r.pointerType==="mouse"||r.pointerType==="pen",s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.overTargets);if(((h=s.overTargets)==null?void 0:h.length)>0&&n!==r.target){const c=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,c,n);if(this.dispatchEvent(u,"pointerout"),i&&this.dispatchEvent(u,"mouseout"),!r.composedPath().includes(n)){const f=this.createPointerEvent(t,"pointerleave",n);for(f.eventPhase=f.AT_TARGET;f.target&&!r.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(u)}if(n!==r.target){const c=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(r,c);this.dispatchEvent(u,"pointerover"),i&&this.dispatchEvent(u,"mouseover");let f=n==null?void 0:n.parent;for(;f&&f!==this.rootTarget.parent&&f!==r.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const m=this.clonePointerEvent(r,"pointerenter");for(m.eventPhase=m.AT_TARGET;m.target&&m.target!==n&&m.target!==this.rootTarget.parent;)m.currentTarget=m.target,this.notifyTarget(m),i&&this.notifyTarget(m,"mouseenter"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(u)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(l=r.target)==null?void 0:l.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(t){var o;if(!(t instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),i=this.createPointerEvent(t),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;r.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId);if(r.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(r.overTargets),n=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(t,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[t.button]);let o=n;if(n&&!i.composedPath().includes(n)){let a=n;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const h=i.button===2;this.notifyTarget(i,h?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:r});const h=s.clicksByButton[t.button];if(h.target===a.target&&r-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=a.target,h.timeStamp=r,a.detail=h.clickCount,a.pointerType==="mouse"){const l=a.button===2;this.dispatchEvent(a,l?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete r.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof He)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(t);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(t){if(!t)return null;let r=t[0];for(let i=1;i<t.length&&t[i].parent===r;i++)r=t[i];return r}createPointerEvent(t,r,i){const s=this.allocateEvent(Rt);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof r=="string"&&(s.type=r),s}createWheelEvent(t){const r=this.allocateEvent(He);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(t,r){const i=this.allocateEvent(Rt);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=r??i.type,i}copyWheelData(t,r){r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ}copyPointerData(t,r){t instanceof Rt&&r instanceof Rt&&(r.pointerId=t.pointerId,r.width=t.width,r.height=t.height,r.isPrimary=t.isPrimary,r.pointerType=t.pointerType,r.pressure=t.pressure,r.tangentialPressure=t.tangentialPressure,r.tiltX=t.tiltX,r.tiltY=t.tiltY,r.twist=t.twist)}copyMouseData(t,r){t instanceof ui&&r instanceof ui&&(r.altKey=t.altKey,r.button=t.button,r.buttons=t.buttons,r.client.copyFrom(t.client),r.ctrlKey=t.ctrlKey,r.metaKey=t.metaKey,r.movement.copyFrom(t.movement),r.screen.copyFrom(t.screen),r.shiftKey=t.shiftKey,r.global.copyFrom(t.global))}copyData(t,r){r.isTrusted=t.isTrusted,r.srcElement=t.srcElement,r.timeStamp=performance.now(),r.type=t.type,r.detail=t.detail,r.view=t.view,r.which=t.which,r.layer.copyFrom(t.layer),r.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const r=this.eventPool.get(t).pop()||new t(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=t.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(t)}notifyListeners(t,r){const i=t.currentTarget._events[r];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(r,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let s=0,n=i.length;s<n&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeListener(r,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,t)}}const Ku=1,Zu={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Ps=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Ju(null),te.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Rt(null),this.rootWheelEvent=new He(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ps.defaultEventFeatures},{set:(t,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,Ps._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=t.length;r<i;r++){const s=t[r],n=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;te.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,n=i.length;s<n;s++){const o=this.bootstrapEvent(this.rootPointerEvent,i[s]);o.type+=r,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,te.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;te.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;te.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let i;this.domElement.parentElement?i=this.domElement.getBoundingClientRect():i={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=Ku),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Zu[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let gr=Ps;gr.extension={name:"events",type:[G.RendererSystem,G.CanvasRendererSystem]};gr.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};K.add(gr);function oo(e){return e==="dynamic"||e==="static"}const qu={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??oo(gr.defaultEventMode)},set interactive(e){q("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??gr.defaultEventMode},set eventMode(e){this._internalInteractive=oo(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof t=="function"?void 0:t;e=i?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,s)},removeEventListener(e,t,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof t=="function"?void 0:t;e=i?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,s)},dispatchEvent(e){if(!(e instanceof Ii))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};se.mixin(qu);se.prototype.name=null;Jt.prototype.getChildByName=function(t,r){for(let i=0,s=this.children.length;i<s;i++)if(this.children[i].name===t)return this.children[i];if(r)for(let i=0,s=this.children.length;i<s;i++){const n=this.children[i];if(!n.getChildByName)continue;const o=n.getChildByName(t,!0);if(o)return o}return null};const tr=new it,$u=new Uint16Array([0,1,2,0,2,3]);class xr extends Jt{constructor(t){super(),this._anchor=new ye(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ae(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=k.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||W.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=$u,this.pluginName="batch",this.isSprite=!0,this._roundPixels=j.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Dr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Dr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const r=this.transform.worldTransform,i=r.a,s=r.b,n=r.c,o=r.d,a=r.tx,h=r.ty,l=this.vertexData,c=t.trim,u=t.orig,f=this._anchor;let y=0,m=0,B=0,I=0;if(c?(m=c.x-f._x*u.width,y=m+c.width,I=c.y-f._y*u.height,B=I+c.height):(m=-f._x*u.width,y=m+u.width,I=-f._y*u.height,B=I+u.height),l[0]=i*m+n*I+a,l[1]=o*I+s*m+h,l[2]=i*y+n*I+a,l[3]=o*I+s*y+h,l[4]=i*y+n*B+a,l[5]=o*B+s*y+h,l[6]=i*m+n*B+a,l[7]=o*B+s*m+h,this._roundPixels){const w=j.RESOLUTION;for(let A=0;A<l.length;++A)l[A]=Math.round(l[A]*w)/w}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,r=this.vertexTrimmedData,i=t.orig,s=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,h=n.c,l=n.d,c=n.tx,u=n.ty,f=-s._x*i.width,y=f+i.width,m=-s._y*i.height,B=m+i.height;r[0]=o*f+h*m+c,r[1]=l*m+a*f+u,r[2]=o*y+h*m+c,r[3]=l*m+a*y+u,r[4]=o*y+h*B+c,r[5]=l*B+a*y+u,r[6]=o*f+h*B+c,r[7]=l*B+a*f+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Ss),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new rt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,tr);const r=this._texture.orig.width,i=this._texture.orig.height,s=-r*this.anchor.x;let n=0;return tr.x>=s&&tr.x<s+r&&(n=-i*this.anchor.y,tr.y>=n&&tr.y<n+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(t,r){const i=t instanceof W?t:W.from(t,r);return new xr(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const r=Dr(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const r=Dr(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||W.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const _r=(e,t)=>t(e),Q=(e,t)=>new it(e,t);Q.from=e=>Q(e.x,e.y);Q.add=(e,t)=>Q.from(_r(e,r=>Q(r.x+t.x,r.y+t.y)));Q.sub=(e,t)=>Q.from(_r(e,r=>Q(r.x-t.x,r.y-t.y)));Q.mul=(e,t)=>Q.from(_r(e,r=>Q(r.x*t.x,r.y*t.y)));Q.div=(e,t)=>Q.from(_r(e,r=>Q(r.x/t.x,r.y/t.y)));Q.mod=(e,t)=>Q.from(_r(e,r=>Q(r.x%t.x,r.y%t.y)));const Xe=(e,t,r,i)=>new rt(e,t,r,i);Xe.xy=e=>Q(e.x,e.y);Xe.wh=e=>Q(e.width,e.height);const tf=e=>e.filter((t,r)=>r%2===0).map((t,r)=>Q(t,e[r*2+1])),ef=(e,t)=>e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height,rf=(e,t)=>t instanceof it?Q((t.x-e.x)/2,(t.y-e.y)/2):Q(t.x+(t.width-e.x)/2,t.y+(t.height-e.y)/2);class sf{constructor(){V(this,"_buttonDict");this._buttonDict=new Map,document.addEventListener("keydown",t=>{const r=t.key;this._buttonDict.has(r)||this._buttonDict.set(r,0)}),document.addEventListener("keyup",t=>{const r=t.key;this._buttonDict.delete(r)})}get buttonDict(){return this._buttonDict}update(){this._buttonDict.forEach((t,r)=>{this._buttonDict.has(r)&&this._buttonDict.set(r,t+1)})}}var Ea=(e=>(e[e.A=0]="A",e[e.B=1]="B",e[e.X=2]="X",e[e.Y=3]="Y",e[e.L1=4]="L1",e[e.R1=5]="R1",e[e.L2=6]="L2",e[e.R2=7]="R2",e[e.SELECT=8]="SELECT",e[e.START=9]="START",e[e.L3=10]="L3",e[e.R3=11]="R3",e[e.UP=12]="UP",e[e.DOWN=13]="DOWN",e[e.LEFT=14]="LEFT",e[e.RIGHT=15]="RIGHT",e[e.CENTER=16]="CENTER",e))(Ea||{});const nf=(e,t,r)=>{const[i,s]=[(t-r+360)%360,(t+r)%360];return i>s&&(e.angle>=i||e.angle<=s)||e.angle>=i&&e.angle<=s?e.velocity:0};class of{constructor(){V(this,"_buttonDict");V(this,"_stickDict");this._buttonDict=new Map,this._stickDict=new Map,window.addEventListener("gamepadconnected",()=>{})}get buttonDict(){return this._buttonDict}get stickDict(){return this._stickDict}update(){navigator.getGamepads().forEach((t,r)=>{t&&(this._buttonDict.has(r)||this._buttonDict.set(r,new Map),t.buttons.forEach((i,s)=>{const n=this._buttonDict.get(r);if(!n)return;const o=Ea[s],a=n.has(o);if(i.pressed&&!a)n.set(o,1);else if(!i.pressed&&a)n.delete(o);else if(i.pressed&&a){const h=n.get(o);if(!h)return;n.set(o,h+1)}}),this._stickDict.set(r,tf(t.axes).map(({x:i,y:s})=>({dx:Math.min(Math.max(i,-1),1),dy:Math.min(Math.max(s,-1),1),angle:(Math.atan2(s,i)*(180/Math.PI)+360)%360,velocity:Math.min(Math.max(Math.sqrt(i*i+s*s),0),1)}))))})}}var Ns=(e=>(e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT",e[e.WHEEL_UP=100]="WHEEL_UP",e[e.WHEEL_DOWN=101]="WHEEL_DOWN",e[e.WHEEL_LEFT=102]="WHEEL_LEFT",e[e.WHEEL_RIGHT=103]="WHEEL_RIGHT",e))(Ns||{});class af{constructor(t,r){V(this,"screenSize");V(this,"wheelDelta");V(this,"prevPosition");V(this,"_buttonDict");V(this,"_position");V(this,"_deltaPosition");this.screenSize=t,this._buttonDict=new Map,this.wheelDelta=Q(0,0),this._position=Q(0,0),this.prevPosition=Q(0,0),this._deltaPosition=Q(0,0),document.addEventListener("mousedown",s=>{const n=Ns[s.button];s.button<3&&!this._buttonDict.has(n)&&this._buttonDict.set(n,0)}),document.addEventListener("mouseup",s=>{const n=Ns[s.button];this._buttonDict.delete(n)}),document.addEventListener("contextmenu",s=>s.preventDefault()),document.addEventListener("wheel",({deltaX:s,deltaY:n})=>{this.wheelDelta.x=s,this.wheelDelta.y=n,n<0&&!this._buttonDict.has("WHEEL_UP")&&this._buttonDict.set("WHEEL_UP",0),n>0&&!this._buttonDict.has("WHEEL_DOWN")&&this._buttonDict.set("WHEEL_DOWN",0),s<0&&!this._buttonDict.has("WHEEL_LEFT")&&this._buttonDict.set("WHEEL_LEFT",0),s>0&&!this._buttonDict.has("WHEEL_RIGHT")&&this._buttonDict.set("WHEEL_RIGHT",0)});const i=new xr(W.WHITE);i.name="MouseManager: touchScreen",i.width=this.screenSize.x,i.height=this.screenSize.y,i.alpha=0,i.eventMode="static",i.on("pointermove",s=>{this.prevPosition.set(this._position.x,this._position.y),this._position.set(s.global.x,s.global.y),this._deltaPosition.set(this._position.x-this.prevPosition.x,this._position.y-this.prevPosition.y)}),r.addChild(i)}get buttonDict(){return this._buttonDict}get deltaPosition(){return this._deltaPosition}get position(){return this._position}update(){this._buttonDict.forEach((t,r)=>{this._buttonDict.has(r)&&this._buttonDict.set(r,t+1);const i=5;((this._buttonDict.get("WHEEL_UP")??0)>=i||(this._buttonDict.get("WHEEL_DOWN")??0)>=i||(this._buttonDict.get("WHEEL_LEFT")??0)>=i||(this._buttonDict.get("WHEEL_RIGHT")??0)>=i)&&(this._buttonDict.delete("WHEEL_UP"),this._buttonDict.delete("WHEEL_DOWN"),this._buttonDict.delete("WHEEL_LEFT"),this._buttonDict.delete("WHEEL_RIGHT"),this.wheelDelta.set(0,0)),this._deltaPosition.set(this._position.x-this.prevPosition.x,this._position.y-this.prevPosition.y)})}}class hf{constructor(t,r){V(this,"keyboardDevice");V(this,"gamepadDevice");V(this,"mouseDevice");this.keyboardDevice=new sf,this.gamepadDevice=new of,this.mouseDevice=new af(t,r)}_update(){this.keyboardDevice.update(),this.gamepadDevice.update(),this.mouseDevice.update()}isKeyTriggered(t){return(this.keyboardDevice.buttonDict.get(t)??NaN)===1}isKeyPressed(t,r=1){return(this.keyboardDevice.buttonDict.get(t)??NaN)>r}isKeyReleased(t){return!this.keyboardDevice.buttonDict.has(t)}isPadTriggered(t,r){const i=this.gamepadDevice.buttonDict.get(t);return((i==null?void 0:i.get(r))??NaN)===1}isPadPressed(t,r,i=1){const s=this.gamepadDevice.buttonDict.get(t);return((s==null?void 0:s.get(r))??NaN)>i}isPadReleased(t,r){const i=this.gamepadDevice.buttonDict.get(t);return!(i!=null&&i.has(r))}isMouseTriggered(t){return(this.mouseDevice.buttonDict.get(t)??NaN)===1}isMousePressed(t,r=1){return(this.mouseDevice.buttonDict.get(t)??NaN)>r}isMouseReleased(t){return!this.mouseDevice.buttonDict.has(t)}getPadStick(t,r,i=.2){var a;const s=(a=this.gamepadDevice.stickDict.get(t))==null?void 0:a[r];if(!s)return Q(0,0);const{dx:n,dy:o}=s;return Q(n>=i||n<=i?n:0,o>=i||o<=i?o:0)}getPadStickAngle(t,r,i,s=45,n=.2){var h;const o=(h=this.gamepadDevice.stickDict.get(t))==null?void 0:h[r];if(!o)return 0;const a=nf(o,i,s);return a>=n?a:0}getPadStickRight(t,r,i=45,s=.2){return this.getPadStickAngle(t,r,45*0,i,s)}getPadStickDown(t,r,i=45,s=.2){return this.getPadStickAngle(t,r,45*2,i,s)}getPadStickLeft(t,r,i=45,s=.2){return this.getPadStickAngle(t,r,45*4,i,s)}getPadStickUp(t,r,i=45,s=.2){return this.getPadStickAngle(t,r,45*6,i,s)}getMousePosition(){return this.mouseDevice.position}getMouseMoveDelta(t=.2,r=1/0){const{x:i,y:s}=this.mouseDevice.deltaPosition;return Q(i>=t?Math.min(r,i):i<=-t?Math.max(-r,i):0,s>=t?Math.min(r,s):s<=-t?Math.max(-r,s):0)}getAxis(t,{padPlayer:r=0,padStick:i=0,padRange:s=45,threshold:n=.2}={}){const o=Q(0,0);switch(t){case"WASD":{this.isKeyPressed("w")&&(o.y=-1),this.isKeyPressed("a")&&(o.x=-1),this.isKeyPressed("s")&&(o.y=1),this.isKeyPressed("d")&&(o.x=1);break}case"ARROW":{this.isKeyPressed("ArrowLeft")&&(o.x=-1),this.isKeyPressed("ArrowRight")&&(o.x=1),this.isKeyPressed("ArrowUp")&&(o.y=-1),this.isKeyPressed("ArrowDown")&&(o.y=1);break}case"NUM":{this.isKeyPressed("2")&&(o.y=1),this.isKeyPressed("4")&&(o.x=-1),this.isKeyPressed("6")&&(o.x=1),this.isKeyPressed("8")&&(o.y=-1);break}case"HJKL":{this.isKeyPressed("h")&&(o.x=-1),this.isKeyPressed("j")&&(o.y=1),this.isKeyPressed("k")&&(o.y=-1),this.isKeyPressed("l")&&(o.x=1);break}case"IJKL":{this.isKeyPressed("i")&&(o.y=-1),this.isKeyPressed("j")&&(o.x=-1),this.isKeyPressed("k")&&(o.y=1),this.isKeyPressed("l")&&(o.x=1);break}case"4PAD":{this.isPadPressed(r,"LEFT")&&(o.x=-1),this.isPadPressed(r,"RIGHT")&&(o.x=1),this.isPadPressed(r,"UP")&&(o.y=-1),this.isPadPressed(r,"DOWN")&&(o.y=1);break}case"4STICK":{const[a,h,l,c]=[this.getPadStickRight(r,i,s,n),this.getPadStickLeft(r,i,s,n),this.getPadStickUp(r,i,s,n),this.getPadStickDown(r,i,s,n)];h&&(o.x=-h),a&&(o.x=a),l&&(o.y=-l),c&&(o.y=c);break}case"STICK":{const a=this.getPadStick(r,i,n);o.x=a.x,o.y=a.y;break}case"WHEEL":{this.isMousePressed("WHEEL_LEFT")&&(o.x=-1),this.isMousePressed("WHEEL_RIGHT")&&(o.x=1),this.isMousePressed("WHEEL_UP")&&(o.y=-1),this.isMousePressed("WHEEL_DOWN")&&(o.y=1);break}}return o}}class lf extends Zs{constructor(){super({width:128,height:96}),globalThis.__PIXI_APP__=this,this.stage.name="GameManager: stage",Z.defaultOptions.scaleMode=vt.NEAREST,document.body.appendChild(this.view)}}var ge={},wt={},xa={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(Nt,function(){function r(A,d,x,_,E){(function T(b,v,g,p,C){for(;p>g;){if(p-g>600){var S=p-g+1,M=v-g+1,N=Math.log(S),R=.5*Math.exp(2*N/3),L=.5*Math.sqrt(N*R*(S-R)/S)*(M-S/2<0?-1:1),X=Math.max(g,Math.floor(v-M*R/S+L)),$=Math.min(p,Math.floor(v+(S-M)*R/S+L));T(b,v,X,$,C)}var P=b[v],O=g,U=p;for(i(b,g,v),C(b[p],P)>0&&i(b,g,p);O<U;){for(i(b,O,U),O++,U--;C(b[O],P)<0;)O++;for(;C(b[U],P)>0;)U--}C(b[g],P)===0?i(b,g,U):i(b,++U,p),U<=v&&(g=U+1),v<=U&&(p=U-1)}})(A,d,x||0,_||A.length-1,E||s)}function i(A,d,x){var _=A[d];A[d]=A[x],A[x]=_}function s(A,d){return A<d?-1:A>d?1:0}var n=function(A){A===void 0&&(A=9),this._maxEntries=Math.max(4,A),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(A,d,x){if(!x)return d.indexOf(A);for(var _=0;_<d.length;_++)if(x(A,d[_]))return _;return-1}function a(A,d){h(A,0,A.children.length,d,A)}function h(A,d,x,_,E){E||(E=I(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var T=d;T<x;T++){var b=A.children[T];l(E,A.leaf?_(b):b)}return E}function l(A,d){return A.minX=Math.min(A.minX,d.minX),A.minY=Math.min(A.minY,d.minY),A.maxX=Math.max(A.maxX,d.maxX),A.maxY=Math.max(A.maxY,d.maxY),A}function c(A,d){return A.minX-d.minX}function u(A,d){return A.minY-d.minY}function f(A){return(A.maxX-A.minX)*(A.maxY-A.minY)}function y(A){return A.maxX-A.minX+(A.maxY-A.minY)}function m(A,d){return A.minX<=d.minX&&A.minY<=d.minY&&d.maxX<=A.maxX&&d.maxY<=A.maxY}function B(A,d){return d.minX<=A.maxX&&d.minY<=A.maxY&&d.maxX>=A.minX&&d.maxY>=A.minY}function I(A){return{children:A,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(A,d,x,_,E){for(var T=[d,x];T.length;)if(!((x=T.pop())-(d=T.pop())<=_)){var b=d+Math.ceil((x-d)/_/2)*_;r(A,b,d,x,E),T.push(d,b,b,x)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(A){var d=this.data,x=[];if(!B(A,d))return x;for(var _=this.toBBox,E=[];d;){for(var T=0;T<d.children.length;T++){var b=d.children[T],v=d.leaf?_(b):b;B(A,v)&&(d.leaf?x.push(b):m(A,v)?this._all(b,x):E.push(b))}d=E.pop()}return x},n.prototype.collides=function(A){var d=this.data;if(!B(A,d))return!1;for(var x=[];d;){for(var _=0;_<d.children.length;_++){var E=d.children[_],T=d.leaf?this.toBBox(E):E;if(B(A,T)){if(d.leaf||m(A,T))return!0;x.push(E)}}d=x.pop()}return!1},n.prototype.load=function(A){if(!A||!A.length)return this;if(A.length<this._minEntries){for(var d=0;d<A.length;d++)this.insert(A[d]);return this}var x=this._build(A.slice(),0,A.length-1,0);if(this.data.children.length)if(this.data.height===x.height)this._splitRoot(this.data,x);else{if(this.data.height<x.height){var _=this.data;this.data=x,x=_}this._insert(x,this.data.height-x.height-1,!0)}else this.data=x;return this},n.prototype.insert=function(A){return A&&this._insert(A,this.data.height-1),this},n.prototype.clear=function(){return this.data=I([]),this},n.prototype.remove=function(A,d){if(!A)return this;for(var x,_,E,T=this.data,b=this.toBBox(A),v=[],g=[];T||v.length;){if(T||(T=v.pop(),_=v[v.length-1],x=g.pop(),E=!0),T.leaf){var p=o(A,T.children,d);if(p!==-1)return T.children.splice(p,1),v.push(T),this._condense(v),this}E||T.leaf||!m(T,b)?_?(x++,T=_.children[x],E=!1):T=null:(v.push(T),g.push(x),x=0,_=T,T=T.children[0])}return this},n.prototype.toBBox=function(A){return A},n.prototype.compareMinX=function(A,d){return A.minX-d.minX},n.prototype.compareMinY=function(A,d){return A.minY-d.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(A){return this.data=A,this},n.prototype._all=function(A,d){for(var x=[];A;)A.leaf?d.push.apply(d,A.children):x.push.apply(x,A.children),A=x.pop();return d},n.prototype._build=function(A,d,x,_){var E,T=x-d+1,b=this._maxEntries;if(T<=b)return a(E=I(A.slice(d,x+1)),this.toBBox),E;_||(_=Math.ceil(Math.log(T)/Math.log(b)),b=Math.ceil(T/Math.pow(b,_-1))),(E=I([])).leaf=!1,E.height=_;var v=Math.ceil(T/b),g=v*Math.ceil(Math.sqrt(b));w(A,d,x,g,this.compareMinX);for(var p=d;p<=x;p+=g){var C=Math.min(p+g-1,x);w(A,p,C,v,this.compareMinY);for(var S=p;S<=C;S+=v){var M=Math.min(S+v-1,C);E.children.push(this._build(A,S,M,_-1))}}return a(E,this.toBBox),E},n.prototype._chooseSubtree=function(A,d,x,_){for(;_.push(d),!d.leaf&&_.length-1!==x;){for(var E=1/0,T=1/0,b=void 0,v=0;v<d.children.length;v++){var g=d.children[v],p=f(g),C=(S=A,M=g,(Math.max(M.maxX,S.maxX)-Math.min(M.minX,S.minX))*(Math.max(M.maxY,S.maxY)-Math.min(M.minY,S.minY))-p);C<T?(T=C,E=p<E?p:E,b=g):C===T&&p<E&&(E=p,b=g)}d=b||d.children[0]}var S,M;return d},n.prototype._insert=function(A,d,x){var _=x?A:this.toBBox(A),E=[],T=this._chooseSubtree(_,this.data,d,E);for(T.children.push(A),l(T,_);d>=0&&E[d].children.length>this._maxEntries;)this._split(E,d),d--;this._adjustParentBBoxes(_,E,d)},n.prototype._split=function(A,d){var x=A[d],_=x.children.length,E=this._minEntries;this._chooseSplitAxis(x,E,_);var T=this._chooseSplitIndex(x,E,_),b=I(x.children.splice(T,x.children.length-T));b.height=x.height,b.leaf=x.leaf,a(x,this.toBBox),a(b,this.toBBox),d?A[d-1].children.push(b):this._splitRoot(x,b)},n.prototype._splitRoot=function(A,d){this.data=I([A,d]),this.data.height=A.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(A,d,x){for(var _,E,T,b,v,g,p,C=1/0,S=1/0,M=d;M<=x-d;M++){var N=h(A,0,M,this.toBBox),R=h(A,M,x,this.toBBox),L=(E=N,T=R,b=void 0,v=void 0,g=void 0,p=void 0,b=Math.max(E.minX,T.minX),v=Math.max(E.minY,T.minY),g=Math.min(E.maxX,T.maxX),p=Math.min(E.maxY,T.maxY),Math.max(0,g-b)*Math.max(0,p-v)),X=f(N)+f(R);L<C?(C=L,_=M,S=X<S?X:S):L===C&&X<S&&(S=X,_=M)}return _||x-d},n.prototype._chooseSplitAxis=function(A,d,x){var _=A.leaf?this.compareMinX:c,E=A.leaf?this.compareMinY:u;this._allDistMargin(A,d,x,_)<this._allDistMargin(A,d,x,E)&&A.children.sort(_)},n.prototype._allDistMargin=function(A,d,x,_){A.children.sort(_);for(var E=this.toBBox,T=h(A,0,d,E),b=h(A,x-d,x,E),v=y(T)+y(b),g=d;g<x-d;g++){var p=A.children[g];l(T,A.leaf?E(p):p),v+=y(T)}for(var C=x-d-1;C>=d;C--){var S=A.children[C];l(b,A.leaf?E(S):S),v+=y(b)}return v},n.prototype._adjustParentBBoxes=function(A,d,x){for(var _=x;_>=0;_--)l(d[_],A)},n.prototype._condense=function(A){for(var d=A.length-1,x=void 0;d>=0;d--)A[d].children.length===0?d>0?(x=A[d-1].children).splice(x.indexOf(A[d]),1):this.clear():a(A[d],this.toBBox)},n})})(xa);var cf=xa.exports,_a={exports:{}};(function(e,t){/** @preserve SAT.js - Version 0.9.0 - Copyright 2012 - 2021 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */(function(r,i){e.exports=i()})(Nt,function(){var r={};function i(v,g){this.x=v||0,this.y=g||0}r.Vector=i,r.V=i,i.prototype.copy=i.prototype.copy=function(v){return this.x=v.x,this.y=v.y,this},i.prototype.clone=i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.perp=i.prototype.perp=function(){var v=this.x;return this.x=this.y,this.y=-v,this},i.prototype.rotate=i.prototype.rotate=function(v){var g=this.x,p=this.y;return this.x=g*Math.cos(v)-p*Math.sin(v),this.y=g*Math.sin(v)+p*Math.cos(v),this},i.prototype.reverse=i.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},i.prototype.normalize=i.prototype.normalize=function(){var v=this.len();return v>0&&(this.x=this.x/v,this.y=this.y/v),this},i.prototype.add=i.prototype.add=function(v){return this.x+=v.x,this.y+=v.y,this},i.prototype.sub=i.prototype.sub=function(v){return this.x-=v.x,this.y-=v.y,this},i.prototype.scale=i.prototype.scale=function(v,g){return this.x*=v,this.y*=typeof g<"u"?g:v,this},i.prototype.project=i.prototype.project=function(v){var g=this.dot(v)/v.len2();return this.x=g*v.x,this.y=g*v.y,this},i.prototype.projectN=i.prototype.projectN=function(v){var g=this.dot(v);return this.x=g*v.x,this.y=g*v.y,this},i.prototype.reflect=i.prototype.reflect=function(v){var g=this.x,p=this.y;return this.project(v).scale(2),this.x-=g,this.y-=p,this},i.prototype.reflectN=i.prototype.reflectN=function(v){var g=this.x,p=this.y;return this.projectN(v).scale(2),this.x-=g,this.y-=p,this},i.prototype.dot=i.prototype.dot=function(v){return this.x*v.x+this.y*v.y},i.prototype.len2=i.prototype.len2=function(){return this.dot(this)},i.prototype.len=i.prototype.len=function(){return Math.sqrt(this.len2())};function s(v,g){this.pos=v||new i,this.r=g||0,this.offset=new i}r.Circle=s,s.prototype.getAABBAsBox=s.prototype.getAABBAsBox=function(){var v=this.r,g=this.pos.clone().add(this.offset).sub(new i(v,v));return new o(g,v*2,v*2)},s.prototype.getAABB=s.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},s.prototype.setOffset=s.prototype.setOffset=function(v){return this.offset=v,this};function n(v,g){this.pos=v||new i,this.angle=0,this.offset=new i,this.setPoints(g||[])}r.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(v){var g=!this.points||this.points.length!==v.length;if(g){var p,C=this.calcPoints=[],S=this.edges=[],M=this.normals=[];for(p=0;p<v.length;p++){var N=v[p],R=p<v.length-1?v[p+1]:v[0];if(N!==R&&N.x===R.x&&N.y===R.y){v.splice(p,1),p-=1;continue}C.push(new i),S.push(new i),M.push(new i)}}return this.points=v,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(v){return this.angle=v,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(v){return this.offset=v,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(v){for(var g=this.points,p=g.length,C=0;C<p;C++)g[C].rotate(v);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(v,g){for(var p=this.points,C=p.length,S=0;S<C;S++)p[S].x+=v,p[S].y+=g;return this._recalc(),this},n.prototype._recalc=function(){var v=this.calcPoints,g=this.edges,p=this.normals,C=this.points,S=this.offset,M=this.angle,N=C.length,R;for(R=0;R<N;R++){var L=v[R].copy(C[R]);L.x+=S.x,L.y+=S.y,M!==0&&L.rotate(M)}for(R=0;R<N;R++){var X=v[R],$=R<N-1?v[R+1]:v[0],P=g[R].copy($).sub(X);p[R].copy(P).perp().normalize()}return this},n.prototype.getAABBAsBox=n.prototype.getAABBAsBox=function(){for(var v=this.calcPoints,g=v.length,p=v[0].x,C=v[0].y,S=v[0].x,M=v[0].y,N=1;N<g;N++){var R=v[N];R.x<p?p=R.x:R.x>S&&(S=R.x),R.y<C?C=R.y:R.y>M&&(M=R.y)}return new o(this.pos.clone().add(new i(p,C)),S-p,M-C)},n.prototype.getAABB=n.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon()},n.prototype.getCentroid=n.prototype.getCentroid=function(){for(var v=this.calcPoints,g=v.length,p=0,C=0,S=0,M=0;M<g;M++){var N=v[M],R=M===g-1?v[0]:v[M+1],L=N.x*R.y-R.x*N.y;p+=(N.x+R.x)*L,C+=(N.y+R.y)*L,S+=L}return S=S*3,p=p/S,C=C/S,new i(p,C)};function o(v,g,p){this.pos=v||new i,this.w=g||0,this.h=p||0}r.Box=o,o.prototype.toPolygon=o.prototype.toPolygon=function(){var v=this.pos,g=this.w,p=this.h;return new n(new i(v.x,v.y),[new i,new i(g,0),new i(g,p),new i(0,p)])};function a(){this.a=null,this.b=null,this.overlapN=new i,this.overlapV=new i,this.clear()}r.Response=a,a.prototype.clear=a.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var h=[],l=0;l<10;l++)h.push(new i);for(var c=[],l=0;l<5;l++)c.push([]);var u=new a,f=new o(new i,1e-6,1e-6).toPolygon();function y(v,g,p){for(var C=Number.MAX_VALUE,S=-Number.MAX_VALUE,M=v.length,N=0;N<M;N++){var R=v[N].dot(g);R<C&&(C=R),R>S&&(S=R)}p[0]=C,p[1]=S}function m(v,g,p,C,S,M){var N=c.pop(),R=c.pop(),L=h.pop().copy(g).sub(v),X=L.dot(S);if(y(p,S,N),y(C,S,R),R[0]+=X,R[1]+=X,N[0]>R[1]||R[0]>N[1])return h.push(L),c.push(N),c.push(R),!0;if(M){var $=0;if(N[0]<R[0])if(M.aInB=!1,N[1]<R[1])$=N[1]-R[0],M.bInA=!1;else{var P=N[1]-R[0],O=R[1]-N[0];$=P<O?P:-O}else if(M.bInA=!1,N[1]>R[1])$=N[0]-R[1],M.aInB=!1;else{var P=N[1]-R[0],O=R[1]-N[0];$=P<O?P:-O}var U=Math.abs($);U<M.overlap&&(M.overlap=U,M.overlapN.copy(S),$<0&&M.overlapN.reverse())}return h.push(L),c.push(N),c.push(R),!1}r.isSeparatingAxis=m;function B(v,g){var p=v.len2(),C=g.dot(v);return C<0?I:C>p?A:w}var I=-1,w=0,A=1;function d(v,g){var p=h.pop().copy(v).sub(g.pos).sub(g.offset),C=g.r*g.r,S=p.len2();return h.push(p),S<=C}r.pointInCircle=d;function x(v,g){f.pos.copy(v),u.clear();var p=b(f,g,u);return p&&(p=u.aInB),p}r.pointInPolygon=x;function _(v,g,p){var C=h.pop().copy(g.pos).add(g.offset).sub(v.pos).sub(v.offset),S=v.r+g.r,M=S*S,N=C.len2();if(N>M)return h.push(C),!1;if(p){var R=Math.sqrt(N);p.a=v,p.b=g,p.overlap=S-R,p.overlapN.copy(C.normalize()),p.overlapV.copy(C).scale(p.overlap),p.aInB=v.r<=g.r&&R<=g.r-v.r,p.bInA=g.r<=v.r&&R<=v.r-g.r}return h.push(C),!0}r.testCircleCircle=_;function E(v,g,p){for(var C=h.pop().copy(g.pos).add(g.offset).sub(v.pos),S=g.r,M=S*S,N=v.calcPoints,R=N.length,L=h.pop(),X=h.pop(),$=0;$<R;$++){var P=$===R-1?0:$+1,O=$===0?R-1:$-1,U=0,Y=null;L.copy(v.edges[$]),X.copy(C).sub(N[$]),p&&X.len2()>M&&(p.aInB=!1);var z=B(L,X);if(z===I){L.copy(v.edges[O]);var ot=h.pop().copy(C).sub(N[O]);if(z=B(L,ot),z===A){var tt=X.len();if(tt>S)return h.push(C),h.push(L),h.push(X),h.push(ot),!1;p&&(p.bInA=!1,Y=X.normalize(),U=S-tt)}h.push(ot)}else if(z===A){if(L.copy(v.edges[P]),X.copy(C).sub(N[P]),z=B(L,X),z===I){var tt=X.len();if(tt>S)return h.push(C),h.push(L),h.push(X),!1;p&&(p.bInA=!1,Y=X.normalize(),U=S-tt)}}else{var dt=L.perp().normalize(),tt=X.dot(dt),Et=Math.abs(tt);if(tt>0&&Et>S)return h.push(C),h.push(dt),h.push(X),!1;p&&(Y=dt,U=S-tt,(tt>=0||U<2*S)&&(p.bInA=!1))}Y&&p&&Math.abs(U)<Math.abs(p.overlap)&&(p.overlap=U,p.overlapN.copy(Y))}return p&&(p.a=v,p.b=g,p.overlapV.copy(p.overlapN).scale(p.overlap)),h.push(C),h.push(L),h.push(X),!0}r.testPolygonCircle=E;function T(v,g,p){var C=E(g,v,p);if(C&&p){var S=p.a,M=p.aInB;p.overlapN.reverse(),p.overlapV.reverse(),p.a=p.b,p.b=S,p.aInB=p.bInA,p.bInA=M}return C}r.testCirclePolygon=T;function b(v,g,p){for(var C=v.calcPoints,S=C.length,M=g.calcPoints,N=M.length,R=0;R<S;R++)if(m(v.pos,g.pos,C,M,v.normals[R],p))return!1;for(var R=0;R<N;R++)if(m(v.pos,g.pos,C,M,g.normals[R],p))return!1;return p&&(p.a=v,p.b=g,p.overlapV.copy(p.overlapN).scale(p.overlap)),!0}return r.testPolygonPolygon=b,r})})(_a);var Ye=_a.exports;(function(e){var t=Nt&&Nt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.BodyType=e.SATCircle=e.SATPolygon=e.SATVector=e.Response=e.RBush=void 0;const r=t(cf);Object.defineProperty(e,"RBush",{enumerable:!0,get:function(){return r.default}});const i=Ye;Object.defineProperty(e,"Response",{enumerable:!0,get:function(){return i.Response}}),Object.defineProperty(e,"SATVector",{enumerable:!0,get:function(){return i.Vector}}),Object.defineProperty(e,"SATPolygon",{enumerable:!0,get:function(){return i.Polygon}}),Object.defineProperty(e,"SATCircle",{enumerable:!0,get:function(){return i.Circle}});var s;(function(n){n.Ellipse="Ellipse",n.Line="Line",n.Circle="Circle",n.Box="Box",n.Point="Point",n.Polygon="Polygon"})(s||(e.BodyType=s={}))})(wt);var Ir={},Kt={},et={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.map=mt.filter=mt.every=mt.some=mt.forEach=void 0;const uf=(e,t)=>{for(let r=0,i=e.length;r<i;r++)t(e[r],r)};mt.forEach=uf;const ff=(e,t)=>{for(let r=0,i=e.length;r<i;r++)if(t(e[r],r))return!0;return!1};mt.some=ff;const df=(e,t)=>{for(let r=0,i=e.length;r<i;r++)if(!t(e[r],r))return!1;return!0};mt.every=df;const Af=(e,t)=>{const r=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];t(n,i)&&r.push(n)}return r};mt.filter=Af;const pf=(e,t)=>{const r=new Array(e.length);for(let i=0,s=e.length;i<s;i++)r[i]=t(e[i],i);return r};mt.map=pf;Object.defineProperty(et,"__esModule",{value:!0});et.intersectLinePolygon=et.intersectLineLine=et.intersectLineLineFast=et.intersectLineCircle=et.circleOutsidePolygon=et.circleInPolygon=et.circleInCircle=et.pointOnCircle=et.polygonInPolygon=et.pointInPolygon=et.polygonInCircle=et.ensureConvex=void 0;const Bi=Ye,mf=wt,Ht=mt;function Ia(e){return e.isConvex||e.type!==mf.BodyType.Polygon?[e]:e.convexPolygons}et.ensureConvex=Ia;function gf(e,t){return(0,Ht.every)(e.calcPoints,r=>(0,Bi.pointInCircle)({x:r.x+e.pos.x,y:r.y+e.pos.y},t))}et.polygonInCircle=gf;function bi(e,t){return(0,Ht.some)(Ia(t),r=>(0,Bi.pointInPolygon)(e,r))}et.pointInPolygon=bi;function yf(e,t){return(0,Ht.every)(e.calcPoints,r=>bi({x:r.x+e.pos.x,y:r.y+e.pos.y},t))}et.polygonInPolygon=yf;function Ba(e,t){return(e.x-t.pos.x)*(e.x-t.pos.x)+(e.y-t.pos.y)*(e.y-t.pos.y)===t.r*t.r}et.pointOnCircle=Ba;function vf(e,t){const r=e.pos.x,i=e.pos.y,s=t.pos.x,n=t.pos.y,o=e.r,a=t.r,h=Math.sqrt((r-s)*(r-s)+(i-n)*(i-n));return h+a===o||h+a<o}et.circleInCircle=vf;function Ef(e,t){if(e.r===0||!bi(e.pos,t))return!1;const r=(0,Ht.map)(t.calcPoints,({x:i,y:s})=>({x:i+t.pos.x,y:s+t.pos.y}));return!((0,Ht.some)(r,i=>(0,Bi.pointInCircle)(i,e))||(0,Ht.some)(r,(i,s)=>{const n=s?r[s-1]:r[r.length-1];return qs({start:n,end:i},e).length>0}))}et.circleInPolygon=Ef;function xf(e,t){if(e.r===0||bi(e.pos,t))return!1;const r=(0,Ht.map)(t.calcPoints,({x:i,y:s})=>({x:i+t.pos.x,y:s+t.pos.y}));return!((0,Ht.some)(r,i=>(0,Bi.pointInCircle)(i,e)||Ba(i,e))||(0,Ht.some)(r,(i,s)=>{const n=s?r[s-1]:r[r.length-1];return qs({start:n,end:i},e).length>0}))}et.circleOutsidePolygon=xf;function qs(e,{pos:t,r}){const i={x:e.end.x-e.start.x,y:e.end.y-e.start.y},s={x:e.start.x-t.x,y:e.start.y-t.y},n=(i.x*s.x+i.y*s.y)*-2,o=(i.x*i.x+i.y*i.y)*2,a=Math.sqrt(n*n-(s.x*s.x+s.y*s.y-r*r)*o*2);if(isNaN(a))return[];const h=(n-a)/o,l=(n+a)/o,c=[];return h<=1&&h>=0&&c.push({x:e.start.x+i.x*h,y:e.start.y+i.y*h}),l<=1&&l>=0&&c.push({x:e.start.x+i.x*l,y:e.start.y+i.y*l}),c}et.intersectLineCircle=qs;function Wr(e,t,r){const i=(r.x-e.x)*(t.y-e.y),s=(t.x-e.x)*(r.y-e.y);return i>s+Number.EPSILON?1:i+Number.EPSILON<s?-1:0}function _f(e,t){return Wr(e.start,t.start,t.end)!==Wr(e.end,t.start,t.end)&&Wr(e.start,e.end,t.start)!==Wr(e.start,e.end,t.end)}et.intersectLineLineFast=_f;function ba(e,t){const r=e.end.x-e.start.x,i=e.end.y-e.start.y,s=r*(t.end.y-t.start.y)-(t.end.x-t.start.x)*i;if(s===0)return null;const n=((t.end.y-t.start.y)*(t.end.x-e.start.x)+(t.start.x-t.end.x)*(t.end.y-e.start.y))/s,o=((e.start.y-e.end.y)*(t.end.x-e.start.x)+r*(t.end.y-e.start.y))/s;return!(n>=0&&n<=1)||!(o>=0&&o<=1)?null:{x:e.start.x+n*r,y:e.start.y+n*i}}et.intersectLineLine=ba;function If(e,t){const r=[];return(0,Ht.forEach)(t.calcPoints,(i,s)=>{const n=s?t.calcPoints[s-1]:t.calcPoints[t.calcPoints.length-1],o={start:{x:n.x+t.pos.x,y:n.y+t.pos.y},end:{x:i.x+t.pos.x,y:i.y+t.pos.y}},a=ba(e,o);a&&r.push(a)}),r}et.intersectLinePolygon=If;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.drawBVH=e.drawPolygon=e.getSATTest=e.getBounceDirection=e.mapArrayToVector=e.mapVectorToArray=e.dashLineTo=e.clonePointsArray=e.checkAInB=e.intersectAABB=e.notIntersectAABB=e.bodyMoved=e.extendBody=e.clockwise=e.distance=e.ensurePolygonPoints=e.ensureVectorPoint=e.createBox=e.createEllipse=e.rad2deg=e.deg2rad=e.RAD2DEG=e.DEG2RAD=void 0;const t=Ye,r=et,i=wt,s=mt;e.DEG2RAD=Math.PI/180,e.RAD2DEG=180/Math.PI;function n(g){return g*e.DEG2RAD}e.deg2rad=n;function o(g){return g*e.RAD2DEG}e.rad2deg=o;function a(g,p=g,C=1){const S=Math.PI*Math.hypot(g,p)*2,M=Math.max(8,Math.ceil(S/Math.max(1,C)));return Array.from({length:M},(N,R)=>{const L=R/M*2*Math.PI,X=Math.cos(L)*g,$=Math.sin(L)*p;return new t.Vector(X,$)})}e.createEllipse=a;function h(g,p){return[new t.Vector(0,0),new t.Vector(g,0),new t.Vector(g,p),new t.Vector(0,p)]}e.createBox=h;function l(g={}){return g instanceof t.Vector?g:new t.Vector(g.x||0,g.y||0)}e.ensureVectorPoint=l;function c(g){if(!g)throw new Error("No points array provided");const p=(0,s.map)(g,l);return f(p)?p.reverse():p}e.ensurePolygonPoints=c;function u(g,p){return Math.hypot(g.x-p.x,g.y-p.y)}e.distance=u;function f(g){let p=0;for(let C=0;C<g.length;C++){const S=g[C],M=g[(C+1)%g.length];p+=(M.x-S.x)*(M.y+S.y)}return p>0}e.clockwise=f;function y(g,p){g.isStatic=!!(p!=null&&p.isStatic),g.isTrigger=!!(p!=null&&p.isTrigger),g.padding=(p==null?void 0:p.padding)||0,g.type!==i.BodyType.Circle&&(g.isCentered=(p==null?void 0:p.isCentered)||!1),g.setAngle((p==null?void 0:p.angle)||0)}e.extendBody=y;function m(g){return g.bbox.minX<g.minX||g.bbox.minY<g.minY||g.bbox.maxX>g.maxX||g.bbox.maxY>g.maxY}e.bodyMoved=m;function B(g,p){return p.minX>g.maxX||p.minY>g.maxY||p.maxX<g.minX||p.maxY<g.minY}e.notIntersectAABB=B;function I(g,p){return!B(g,p)}e.intersectAABB=I;function w(g,p){return g.type===i.BodyType.Circle?p.type!==i.BodyType.Circle?(0,r.circleInPolygon)(g,p):(0,r.circleInCircle)(g,p):p.type===i.BodyType.Circle?(0,r.polygonInCircle)(g,p):(0,r.polygonInPolygon)(g,p)}e.checkAInB=w;function A(g){return(0,s.map)(g,({x:p,y:C})=>({x:p,y:C}))}e.clonePointsArray=A;function d(g,p,C,S,M,N=2,R=4){const L=S-p,X=M-C,$=Math.atan2(X,L),P=Math.cos($),O=Math.sin($);let U=p,Y=C,z=Math.hypot(L,X);for(;z>0;){const ot=Math.min(z,N);g.moveTo(U,Y),g.lineTo(U+P*ot,Y+O*ot),U+=P*(N+R),Y+=O*(N+R),z-=N+R}}e.dashLineTo=d;function x({x:g,y:p}={x:0,y:0}){return[g,p]}e.mapVectorToArray=x;function _([g,p]=[0,0]){return{x:g,y:p}}e.mapArrayToVector=_;function E(g,p){const C=new t.Vector(p.x-g.x,p.y-g.y),S=new t.Vector(g.x-p.x,g.y-p.y),M=S.dot(C.normalize())*2;return new t.Vector(C.x*M-S.x,C.y*M-S.y).normalize()}e.getBounceDirection=E;function T(g,p){return g.type===i.BodyType.Circle?p.type===i.BodyType.Circle?t.testCircleCircle:t.testCirclePolygon:p.type===i.BodyType.Circle?t.testPolygonCircle:t.testPolygonPolygon}e.getSATTest=T;function b(g,{pos:p,calcPoints:C},S=!1){const M=C[C.length-1],N=p.x+M.x,R=p.y+M.y;C.length===1?g.arc(N,R,1,0,Math.PI*2):g.moveTo(N,R),(0,s.forEach)(C,(L,X)=>{const $=p.x+L.x,P=p.y+L.y;if(S){const O=C[X-1]||M;d(g,p.x+O.x,p.y+O.y,$,P)}else g.lineTo($,P)})}e.drawPolygon=b;function v(g,p){b(g,{pos:{x:p.minX,y:p.minY},calcPoints:h(p.maxX-p.minX,p.maxY-p.minY)})}e.drawBVH=v})(Kt);Object.defineProperty(Ir,"__esModule",{value:!0});Ir.Circle=void 0;const Bf=Ye,bf=wt,jr=Kt;class Tf extends Bf.Circle{constructor(t,r,i){super((0,jr.ensureVectorPoint)(t),r),this.offsetCopy={x:0,y:0},this.dirty=!1,this.isConvex=!0,this.type=bf.BodyType.Circle,this.isCentered=!0,(0,jr.extendBody)(this,i),this.unscaledRadius=r}get x(){return this.pos.x}set x(t){this.pos.x=t,this.dirty=!0}get y(){return this.pos.y}set y(t){this.pos.y=t,this.dirty=!0}get scale(){return this.r/this.unscaledRadius}set scale(t){this.setScale(t)}get scaleX(){return this.scale}get scaleY(){return this.scale}setPosition(t,r,i=!0){return this.pos.x=t,this.pos.y=r,this.dirty=!0,i&&this.updateBody(),this}setScale(t,r=t,i=!0){return this.r=this.unscaledRadius*Math.abs(t),this.dirty=!0,i&&this.updateBody(),this}setAngle(t,r=!0){this.angle=t;const{x:i,y:s}=this.getOffsetWithAngle();return this.offset.x=i,this.offset.y=s,this.dirty=!0,r&&this.updateBody(),this}setOffset(t,r=!0){this.offsetCopy.x=t.x,this.offsetCopy.y=t.y;const{x:i,y:s}=this.getOffsetWithAngle();return this.offset.x=i,this.offset.y=s,this.dirty=!0,r&&this.updateBody(),this}getAABBAsBBox(){const t=this.pos.x+this.offset.x,r=this.pos.y+this.offset.y;return{minX:t-this.r,maxX:t+this.r,minY:r-this.r,maxY:r+this.r}}draw(t){const r=this.pos.x+this.offset.x,i=this.pos.y+this.offset.y,s=Math.abs(this.r);if(this.isTrigger){const n=Math.max(8,this.r);for(let o=0;o<n;o++){const a=o/n*2*Math.PI,h=(o-1)/n*2*Math.PI,l=r+Math.cos(h)*this.r,c=i+Math.sin(h)*this.r,u=r+Math.cos(a)*this.r,f=i+Math.sin(a)*this.r;(0,jr.dashLineTo)(t,l,c,u,f)}}else t.moveTo(r+s,i),t.arc(r,i,s,0,Math.PI*2)}drawBVH(t){(0,jr.drawBVH)(t,this)}updateBody(t=this.dirty){var r;t&&((r=this.system)===null||r===void 0||r.insert(this),this.dirty=!1)}markAsDirty(t){t?this.updateBody(!0):this.dirty=!0}getOffsetWithAngle(){if(!this.offsetCopy.x&&!this.offsetCopy.y||!this.angle)return this.offsetCopy;const t=Math.sin(this.angle),r=Math.cos(this.angle),i=this.offsetCopy.x*r-this.offsetCopy.y*t,s=this.offsetCopy.x*t+this.offsetCopy.y*r;return{x:i,y:s}}}Ir.Circle=Tf;var Br={},ze={},wf={decomp:kf,quickDecomp:sr,isSimple:Lf,removeCollinearPoints:Gf,removeDuplicatePoints:Vf,makeCCW:Nf};function Cf(e,t,r){r=r||0;var i=[0,0],s,n,o,a,h,l,c;return s=e[1][1]-e[0][1],n=e[0][0]-e[1][0],o=s*e[0][0]+n*e[0][1],a=t[1][1]-t[0][1],h=t[0][0]-t[1][0],l=a*t[0][0]+h*t[0][1],c=s*h-a*n,di(c,0,r)||(i[0]=(h*o-n*l)/c,i[1]=(s*l-a*o)/c),i}function Fs(e,t,r,i){var s=t[0]-e[0],n=t[1]-e[1],o=i[0]-r[0],a=i[1]-r[1];if(o*n-a*s===0)return!1;var h=(s*(r[1]-e[1])+n*(e[0]-r[0]))/(o*n-a*s),l=(o*(e[1]-r[1])+a*(r[0]-e[0]))/(a*s-o*n);return h>=0&&h<=1&&l>=0&&l<=1}function br(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function ri(e,t,r){return br(e,t,r)>0}function Ds(e,t,r){return br(e,t,r)>=0}function Ta(e,t,r){return br(e,t,r)<0}function lr(e,t,r){return br(e,t,r)<=0}var Sf=[],Rf=[];function Mf(e,t,r,i){if(i){var s=Sf,n=Rf;s[0]=t[0]-e[0],s[1]=t[1]-e[1],n[0]=r[0]-t[0],n[1]=r[1]-t[1];var o=s[0]*n[0]+s[1]*n[1],a=Math.sqrt(s[0]*s[0]+s[1]*s[1]),h=Math.sqrt(n[0]*n[0]+n[1]*n[1]),l=Math.acos(o/(a*h));return l<i}else return br(e,t,r)===0}function cr(e,t){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function D(e,t){var r=e.length;return e[t<0?t%r+r:t%r]}function Pf(e){e.length=0}function Bt(e,t,r,i){for(var s=r;s<i;s++)e.push(t[s])}function Nf(e){for(var t=0,r=e,i=1;i<e.length;++i)(r[i][1]<r[t][1]||r[i][1]===r[t][1]&&r[i][0]>r[t][0])&&(t=i);return ri(D(e,t-1),D(e,t),D(e,t+1))?!1:(Ff(e),!0)}function Ff(e){for(var t=[],r=e.length,i=0;i!==r;i++)t.push(e.pop());for(var i=0;i!==r;i++)e[i]=t[i]}function wa(e,t){return Ta(D(e,t-1),D(e,t),D(e,t+1))}var Df=[],Of=[];function Uf(e,t,r){var i,s,n=Df,o=Of;if(Ds(D(e,t+1),D(e,t),D(e,r))&&lr(D(e,t-1),D(e,t),D(e,r)))return!1;s=cr(D(e,t),D(e,r));for(var a=0;a!==e.length;++a)if(!((a+1)%e.length===t||a===t)&&Ds(D(e,t),D(e,r),D(e,a+1))&&lr(D(e,t),D(e,r),D(e,a))&&(n[0]=D(e,t),n[1]=D(e,r),o[0]=D(e,a),o[1]=D(e,a+1),i=Cf(n,o),cr(D(e,t),i)<s))return!1;return!0}function Qf(e,t,r){for(var i=0;i!==e.length;++i)if(!(i===t||i===r||(i+1)%e.length===t||(i+1)%e.length===r)&&Fs(D(e,t),D(e,r),D(e,i),D(e,i+1)))return!1;return!0}function fi(e,t,r,i){var s=i||[];if(Pf(s),t<r)for(var n=t;n<=r;n++)s.push(e[n]);else{for(var n=0;n<=r;n++)s.push(e[n]);for(var n=t;n<e.length;n++)s.push(e[n])}return s}function Os(e){for(var t=[],r=[],i=[],s=[],n=Number.MAX_VALUE,o=0;o<e.length;++o)if(wa(e,o)){for(var a=0;a<e.length;++a)if(Uf(e,o,a)){r=Os(fi(e,o,a,s)),i=Os(fi(e,a,o,s));for(var h=0;h<i.length;h++)r.push(i[h]);r.length<n&&(t=r,n=r.length,t.push([D(e,o),D(e,a)]))}}return t}function kf(e){var t=Os(e);return t.length>0?Ca(e,t):[e]}function Ca(e,t){if(t.length===0)return[e];if(t instanceof Array&&t.length&&t[0]instanceof Array&&t[0].length===2&&t[0][0]instanceof Array){for(var r=[e],i=0;i<t.length;i++)for(var s=t[i],n=0;n<r.length;n++){var o=r[n],a=Ca(o,s);if(a){r.splice(n,1),r.push(a[0],a[1]);break}}return r}else{var s=t,i=e.indexOf(s[0]),n=e.indexOf(s[1]);return i!==-1&&n!==-1?[fi(e,i,n),fi(e,n,i)]:!1}}function Lf(e){var t=e,r;for(r=0;r<t.length-1;r++)for(var i=0;i<r-1;i++)if(Fs(t[r],t[r+1],t[i],t[i+1]))return!1;for(r=1;r<t.length-2;r++)if(Fs(t[0],t[t.length-1],t[r],t[r+1]))return!1;return!0}function ao(e,t,r,i,s){s=s||0;var n=t[1]-e[1],o=e[0]-t[0],a=n*e[0]+o*e[1],h=i[1]-r[1],l=r[0]-i[0],c=h*r[0]+l*r[1],u=n*l-h*o;return di(u,0,s)?[0,0]:[(l*a-o*c)/u,(n*c-h*a)/u]}function sr(e,t,r,i,s,n,o){n=n||100,o=o||0,s=s||25,t=typeof t<"u"?t:[],r=r||[],i=i||[];var a=[0,0],h=[0,0],l=[0,0],c=0,u=0,f=0,y=0,m=0,B=0,I=0,w=[],A=[],d=e,x=e;if(x.length<3)return t;if(o++,o>n)return console.warn("quickDecomp: max level ("+n+") reached."),t;for(var _=0;_<e.length;++_)if(wa(d,_)){r.push(d[_]),c=u=Number.MAX_VALUE;for(var E=0;E<e.length;++E)ri(D(d,_-1),D(d,_),D(d,E))&&lr(D(d,_-1),D(d,_),D(d,E-1))&&(l=ao(D(d,_-1),D(d,_),D(d,E),D(d,E-1)),Ta(D(d,_+1),D(d,_),l)&&(f=cr(d[_],l),f<u&&(u=f,h=l,B=E))),ri(D(d,_+1),D(d,_),D(d,E+1))&&lr(D(d,_+1),D(d,_),D(d,E))&&(l=ao(D(d,_+1),D(d,_),D(d,E),D(d,E+1)),ri(D(d,_-1),D(d,_),l)&&(f=cr(d[_],l),f<c&&(c=f,a=l,m=E)));if(B===(m+1)%e.length)l[0]=(h[0]+a[0])/2,l[1]=(h[1]+a[1])/2,i.push(l),_<m?(Bt(w,d,_,m+1),w.push(l),A.push(l),B!==0&&Bt(A,d,B,d.length),Bt(A,d,0,_+1)):(_!==0&&Bt(w,d,_,d.length),Bt(w,d,0,m+1),w.push(l),A.push(l),Bt(A,d,B,_+1));else{if(B>m&&(m+=e.length),y=Number.MAX_VALUE,m<B)return t;for(var E=B;E<=m;++E)Ds(D(d,_-1),D(d,_),D(d,E))&&lr(D(d,_+1),D(d,_),D(d,E))&&(f=cr(D(d,_),D(d,E)),f<y&&Qf(d,_,E)&&(y=f,I=E%e.length));_<I?(Bt(w,d,_,I+1),I!==0&&Bt(A,d,I,x.length),Bt(A,d,0,_+1)):(_!==0&&Bt(w,d,_,x.length),Bt(w,d,0,I+1),Bt(A,d,I,_+1))}return w.length<A.length?(sr(w,t,r,i,s,n,o),sr(A,t,r,i,s,n,o)):(sr(A,t,r,i,s,n,o),sr(w,t,r,i,s,n,o)),t}return t.push(e),t}function Gf(e,t){for(var r=0,i=e.length-1;e.length>3&&i>=0;--i)Mf(D(e,i-1),D(e,i),D(e,i+1),t)&&(e.splice(i%e.length,1),r++);return r}function Vf(e,t){for(var r=e.length-1;r>=1;--r)for(var i=e[r],s=r-1;s>=0;--s)if(Hf(i,e[s],t)){e.splice(r,1);continue}}function di(e,t,r){return r=r||0,Math.abs(e-t)<=r}function Hf(e,t,r){return di(e[0],t[0],r)&&di(e[1],t[1],r)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=e.isSimple=void 0;const t=wf;Object.defineProperty(e,"isSimple",{enumerable:!0,get:function(){return t.isSimple}});const r=Ye,i=wt,s=mt,n=Kt;class o extends r.Polygon{constructor(h,l,c){if(super((0,n.ensureVectorPoint)(h),(0,n.ensurePolygonPoints)(l)),this.dirty=!1,this.type=i.BodyType.Polygon,this.centered=!1,this.scaleVector={x:1,y:1},!(l!=null&&l.length))throw new Error("No points in polygon");(0,n.extendBody)(this,c)}set isCentered(h){if(this.centered===h)return;const l=this.getCentroidWithoutRotation(),c=l.x*(h?1:-1),u=l.y*(h?1:-1);this.translate(-c,-u),this.centered=h}get isCentered(){return this.centered}get x(){return this.pos.x}set x(h){this.pos.x=h,this.dirty=!0}get y(){return this.pos.y}set y(h){this.pos.y=h,this.dirty=!0}get scaleX(){return this.scaleVector.x}get scaleY(){return this.scaleVector.y}get scale(){return this.scaleVector.x}set scale(h){this.setScale(h)}setPosition(h,l,c=!0){return this.pos.x=h,this.pos.y=l,this.markAsDirty(c),this}setScale(h,l=h,c=!0){return this.scaleVector.x=Math.abs(h),this.scaleVector.y=Math.abs(l),super.setPoints((0,s.map)(this.points,(u,f)=>(u.x=this.pointsBackup[f].x*this.scaleVector.x,u.y=this.pointsBackup[f].y*this.scaleVector.y,u))),this.markAsDirty(c),this}setAngle(h,l=!0){return super.setAngle(h),this.markAsDirty(l),this}setOffset(h,l=!0){return super.setOffset(h),this.markAsDirty(l),this}getAABBAsBBox(){const{pos:h,w:l,h:c}=this.getAABBAsBox();return{minX:h.x,minY:h.y,maxX:h.x+l,maxY:h.y+c}}draw(h){(0,n.drawPolygon)(h,this,this.isTrigger)}drawBVH(h){(0,n.drawBVH)(h,this)}getCentroidWithoutRotation(){const h=this.angle;this.setAngle(0);const l=this.getCentroid();return this.setAngle(h),l}setPoints(h){return super.setPoints(h),this.updateIsConvex(),this.pointsBackup=(0,n.clonePointsArray)(h),this}translate(h,l){return super.translate(h,l),this.pointsBackup=(0,n.clonePointsArray)(this.points),this}rotate(h){return super.rotate(h),this.pointsBackup=(0,n.clonePointsArray)(this.points),this}isSimple(){return(0,t.isSimple)(this.calcPoints.map(n.mapVectorToArray))}updateBody(h=this.dirty){var l;h&&(this.updateConvexPolygonPositions(),(l=this.system)===null||l===void 0||l.insert(this),this.dirty=!1)}markAsDirty(h){h?this.updateBody(!0):this.dirty=!0}updateConvexPolygonPositions(){this.isConvex||!this.convexPolygons||(0,s.forEach)(this.convexPolygons,h=>{h.pos.x=this.pos.x,h.pos.y=this.pos.y})}getConvex(){if(this.type&&this.type!==i.BodyType.Polygon||this.points.length<4)return[];const h=(0,s.map)(this.calcPoints,n.mapVectorToArray);return(0,t.quickDecomp)(h)}updateConvexPolygons(h=this.getConvex()){this.isConvex||(this.convexPolygons||(this.convexPolygons=[]),(0,s.forEach)(h,(l,c)=>{this.convexPolygons[c]||(this.convexPolygons[c]=new r.Polygon),this.convexPolygons[c].pos.x=this.pos.x,this.convexPolygons[c].pos.y=this.pos.y,this.convexPolygons[c].setPoints((0,n.ensurePolygonPoints)((0,s.map)(l,n.mapArrayToVector)))}),this.convexPolygons.length=h.length)}updateIsConvex(){const h=this.getConvex();this.isConvex=h.length<=1,this.updateConvexPolygons(h)}}e.Polygon=o})(ze);Object.defineProperty(Br,"__esModule",{value:!0});Br.Ellipse=void 0;const Xf=wt,Yr=Kt,Wf=ze;class jf extends Wf.Polygon{constructor(t,r,i=r,s=(r+i)/Math.PI,n){super(t,(0,Yr.createEllipse)(r,i,s),n),this.type=Xf.BodyType.Ellipse,this.isConvex=!0,this._radiusX=r,this._radiusY=i,this._step=s}set isCentered(t){}get isCentered(){return!0}get step(){return this._step}set step(t){this._step=t,this.setPoints((0,Yr.createEllipse)(this._radiusX,this._radiusY,this._step))}get radiusX(){return this._radiusX}set radiusX(t){this._radiusX=t,this.setPoints((0,Yr.createEllipse)(this._radiusX,this._radiusY,this._step))}get radiusY(){return this._radiusY}set radiusY(t){this._radiusY=t,this.setPoints((0,Yr.createEllipse)(this._radiusX,this._radiusY,this._step))}center(){}updateIsConvex(){}}Br.Ellipse=jf;var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.Box=void 0;const Yf=wt,is=Kt,zf=ze;class Jf extends zf.Polygon{constructor(t,r,i,s){super(t,(0,is.createBox)(r,i),s),this.type=Yf.BodyType.Box,this.isConvex=!0,this._width=r,this._height=i}get width(){return this._width}set width(t){this._width=t,this.setPoints((0,is.createBox)(this._width,this._height))}get height(){return this._height}set height(t){this._height=t,this.setPoints((0,is.createBox)(this._width,this._height))}updateIsConvex(){}}Je.Box=Jf;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Point=void 0;const Kf=wt,Zf=Kt,qf=Je;class $f extends qf.Box{constructor(t,r){super((0,Zf.ensureVectorPoint)(t),.001,.001,r),this.type=Kf.BodyType.Point}}Tr.Point=$f;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.Line=void 0;const td=Ye,ed=wt,rd=ze;class id extends rd.Polygon{constructor(t,r,i){if(super(t,[{x:0,y:0},{x:r.x-t.x,y:r.y-t.y}],i),this.type=ed.BodyType.Line,this.isConvex=!0,this.calcPoints.length===1||!r)throw console.error({start:t,end:r}),new Error("No end point for line provided")}get start(){return{x:this.x+this.calcPoints[0].x,y:this.y+this.calcPoints[0].y}}set start({x:t,y:r}){this.x=t,this.y=r}get end(){return{x:this.x+this.calcPoints[1].x,y:this.y+this.calcPoints[1].y}}set end({x:t,y:r}){this.points[1].x=t-this.start.x,this.points[1].y=r-this.start.y,this.setPoints(this.points)}getCentroid(){return new td.Vector((this.end.x-this.start.x)/2,(this.end.y-this.start.y)/2)}updateIsConvex(){}}Ke.Line=id;var Ti={},wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.BaseSystem=void 0;const sd=Je,nd=Ir,od=Br,ad=Ke,hd=Tr,ld=ze,cd=wt,ss=mt,ud=Kt;class fd extends cd.RBush{draw(t){(0,ss.forEach)(this.all(),r=>{r.draw(t)})}drawBVH(t){const r=i=>{(0,ud.drawBVH)(t,i),i.children&&(0,ss.forEach)(i.children,r)};(0,ss.forEach)(this.data.children,r)}createPoint(t,r){const i=new hd.Point(t,r);return this.insert(i),i}createLine(t,r,i){const s=new ad.Line(t,r,i);return this.insert(s),s}createCircle(t,r,i){const s=new nd.Circle(t,r,i);return this.insert(s),s}createBox(t,r,i,s){const n=new sd.Box(t,r,i,s);return this.insert(n),n}createEllipse(t,r,i=r,s,n){const o=new od.Ellipse(t,r,i,s,n);return this.insert(o),o}createPolygon(t,r,i){const s=new ld.Polygon(t,r,i);return this.insert(s),s}}wi.BaseSystem=fd;Object.defineProperty(Ti,"__esModule",{value:!0});Ti.System=void 0;const dd=wi,Ad=Ke,ns=wt,we=Kt,zr=et,ce=mt;class pd extends dd.BaseSystem{constructor(){super(...arguments),this.response=new ns.Response}remove(t,r){return t.system=void 0,super.remove(t,r)}insert(t){if(t.bbox=t.getAABBAsBBox(),t.system){if(!(0,we.bodyMoved)(t))return this;t.system.remove(t)}return t.minX=t.bbox.minX-t.padding,t.minY=t.bbox.minY-t.padding,t.maxX=t.bbox.maxX+t.padding,t.maxY=t.bbox.maxY+t.padding,t.system=this,super.insert(t)}updateBody(t){t.updateBody()}update(){(0,ce.forEach)(this.all(),t=>{this.updateBody(t)})}separate(){this.checkAll(({a:t,overlapV:r})=>{if(t.isTrigger)return!1;t.setPosition(t.x-r.x,t.y-r.y)})}checkOne(t,r=()=>!0,i=this.response){if(t.isStatic)return!1;const s=this.search(t),n=o=>{if(o!==t&&this.checkCollision(t,o,i))return r(i)};return(0,ce.some)(s,n)}checkAll(t,r=this.response){const i=this.all(),s=n=>this.checkOne(n,t,r);return(0,ce.some)(i,s)}getPotentials(t){return(0,ce.filter)(this.search(t),r=>r!==t)}checkCollision(t,r,i=this.response){if((t.padding||r.padding)&&(0,we.notIntersectAABB)(t.bbox||t,r.bbox||r))return!1;const s=(0,we.getSATTest)(t,r);if(t.isConvex&&r.isConvex)return i.clear(),s(t,r,i);const n=(0,zr.ensureConvex)(t),o=(0,zr.ensureConvex)(r),a=new ns.SATVector;let h=!1;return(0,ce.forEach)(n,l=>{(0,ce.forEach)(o,c=>{i.clear(),s(l,c,i)&&(h=!0,a.add(i.overlapV))})}),h&&(i.a=t,i.b=r,i.overlapV=a,i.overlapN=a.clone().normalize(),i.overlap=a.len(),i.aInB=(0,we.checkAInB)(t,r),i.bInA=(0,we.checkAInB)(r,t)),h}raycast(t,r,i=()=>!0){let s=1/0,n=null;return this.ray?(this.ray.start=t,this.ray.end=r):this.ray=new Ad.Line(t,r,{isTrigger:!0}),this.insert(this.ray),this.checkOne(this.ray,({b:o})=>{if(!i(o))return!1;const a=o.type===ns.BodyType.Circle?(0,zr.intersectLineCircle)(this.ray,o):(0,zr.intersectLinePolygon)(this.ray,o);(0,ce.forEach)(a,h=>{const l=(0,we.distance)(t,h);l<s&&(s=l,n={point:h,body:o})})}),this.remove(this.ray),n}traverse(t,{children:r}=this.data){return r==null?void 0:r.find((i,s)=>{if(!i)return!1;if(i.type&&t(i,r,s))return!0;i.children&&this.traverse(t,i)})}}Ti.System=pd;(function(e){var t=Nt&&Nt.__createBinding||(Object.create?function(i,s,n,o){o===void 0&&(o=n);var a=Object.getOwnPropertyDescriptor(s,n);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[n]}}),Object.defineProperty(i,o,a)}:function(i,s,n,o){o===void 0&&(o=n),i[o]=s[n]}),r=Nt&&Nt.__exportStar||function(i,s){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(s,n)&&t(s,i,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(wt,e),r(Ir,e),r(Br,e),r(ze,e),r(Je,e),r(Tr,e),r(Ke,e),r(Ti,e),r(Kt,e),r(et,e)})(ge);const er=10;class md extends ge.System{constructor(r,i){super();V(this,"physicsDebugCanvas");V(this,"physicsDebugContext");i!=null&&i.physicsDebug&&(this.physicsDebugCanvas=document.createElement("canvas"),this.physicsDebugCanvas.width=r.screen.width*er,this.physicsDebugCanvas.height=r.screen.height*er,this.physicsDebugContext=this.physicsDebugCanvas.getContext("2d"),document.body.appendChild(this.physicsDebugCanvas))}updateDebug(){if(this.physicsDebugCanvas){const[{width:r,height:i},s]=[this.physicsDebugCanvas,this.physicsDebugContext];s.save(),s.scale(er,er),s.clearRect(0,0,r,i),s.lineWidth=1/er,s.strokeStyle="rgba(255, 255, 255, 0.5)",s.beginPath(),this.draw(s),s.stroke(),s.strokeStyle="rgba(0, 255, 0, 0.5)",s.beginPath(),this.drawBVH(s),s.stroke(),s.restore()}}}class gd{constructor(t,{debugMode:r=!1}={}){V(this,"drawingEngine");V(this,"physicsEngine");V(this,"frameCount",0);V(this,"deltaTime",0);V(this,"currentScene");V(this,"sceneDict");V(this,"_input");if(this.drawingEngine=new lf,this.physicsEngine=new md(this.drawingEngine,{physicsDebug:r}),this._input=new hf(Q(this.width,this.height),this.drawingEngine.stage),t.length===0)throw new Error("");if(this.sceneDict=new Map,t.forEach(i=>{this.sceneDict.set(i.name,i)}),this.currentScene=t[0],this.connectScene(),this.drawingEngine.ticker.add(i=>this.update(i)),r){globalThis.__DEBUG__=this;const i={prevHeap:0,currentHeap:0};setInterval(()=>{i.prevHeap=i.currentHeap,i.currentHeap=globalThis.performance.memory.totalJSHeapSize/(1024*2)|0;const s=i.prevHeap-i.currentHeap;s!==0&&console.log(`RAM: ${i.currentHeap} MB (${s>0?"+":"-"}${Math.abs(s)})`)},1e3)}}update(t){this.deltaTime=t,this.frameCount++,this._input._update(),this.physicsEngine.updateDebug(),this.currentScene.update(this)}changeScene(t){const r=this.sceneDict.get(t);if(!r)throw new Error(": "+t);this.clearScene(),this.currentScene=r,this.connectScene()}clearScene(){this.currentScene.destoroy(),this.currentScene.stage.removeChild(this.currentScene.stage),this.physicsEngine.clear()}connectScene(){this.drawingEngine.stage.addChild(this.currentScene.stage),this.currentScene.setup(this).forEach(t=>{this.spawn(t)})}hitTest(t){this.physicsEngine.checkAll(({a:r,b:i,overlapV:s})=>{t({self:r,target:i,overlap:Q(s.x,s.y)})})}spawn(t){t.collider&&this.physicsEngine.insert(t.collider),this.currentScene.stage.addChild(t.render)}get input(){return this._input}get width(){return this.drawingEngine.screen.width}get height(){return this.drawingEngine.screen.height}get now(){return this.frameCount}get delta(){return this.deltaTime}get fps(){return this.drawingEngine.ticker.FPS}}class Sa{constructor(t){V(this,"stage");V(this,"entityDict");V(this,"_name");this.stage=new Jt,this._name=t,this.stage.name=`Scene: ${this._name}`,this.entityDict=new Map}get name(){return this._name}addEntity(t,r){const i=r||t.name;return this.entityDict.set(i,t),this.getEntity(i)}removeEntity(t){this.entityDict.delete(t)}getEntity(t){const r=this.entityDict.get(t);if(!r)throw new Error(" Entity : "+t);return r}getEntities(){return[...this.entityDict.entries()].reduce((r,[i,s])=>({...r,[i]:s}),{})}destoroy(){this.stage.removeChildren(),this.entityDict.forEach(t=>{t.destroy()}),this.entityDict.clear()}setup(t){return[]}update(t){}}class yd{constructor({position:t,size:r,angle:i=0,scale:s=Q(1,1),origin:n=Q(0,0)}){V(this,"posize");V(this,"angle");V(this,"scale");V(this,"origin");this.posize=Xe(t.x,t.y,(r==null?void 0:r.x)??0,(r==null?void 0:r.y)??0),this.angle=i,this.scale=s,this.origin=n}}class wr{constructor({name:t,placement:r,shape:i,render:s}){V(this,"placement");V(this,"destroyed",!1);V(this,"_name");V(this,"_collider");V(this,"_render");var n,o,a,h;if(this._name=t,this.placement=new yd(r),this._render=s,this._render.name=t,i==="BOX")this._collider=new ge.Box(r.position,((n=r.size)==null?void 0:n.x)??this._render.width,((o=r.size)==null?void 0:o.y)??this._render.height);else if(i==="CIRCLE")this._collider=new ge.Ellipse(r.position,((a=r.size)==null?void 0:a.x)??this._render.width,((h=r.size)==null?void 0:h.y)??this._render.height);else if(i==="NONE")this._collider=null;else throw new Error("");this.apply()}get name(){return this._name}get collider(){return this._collider}get render(){return this._render}get globalRect(){return this.placement.posize}destroy(){var t;this._render.destroy(),this._collider&&((t=this._collider.system)==null||t.remove(this._collider)),this.destroyed=!0}get position(){const{x:t,y:r}=this.placement.posize;return Q(t,r)}setPosition(t){const{x:r,y:i}=t(this.position);this.placement.posize.x=r,this.placement.posize.y=i,this.apply()}get angle(){return this.placement.angle}setAngle(t){const r=t(this.placement.angle);this.placement.angle=r,this.apply()}get scale(){return this.placement.scale}setScale(t){const{x:r,y:i}=t(this.scale);this.placement.scale.x=r,this.placement.scale.y=i,this.apply()}get origin(){return this.placement.origin}setOrigin(t){const{x:r,y:i}=t(this.origin);this.placement.origin.x=r,this.placement.origin.y=i,this.apply()}apply(){if(this.destroyed)return;const{posize:t,angle:r,scale:i,origin:s}=this.placement;this._render.position.set(t.x|0,t.y|0),this._render.angle=r,this._render.scale.set(i.x,i.y),this._render.anchor.set(s.x,s.y),this._collider&&(this._collider.setPosition(t.x,t.y),this._collider.setAngle(ge.deg2rad(r)),this._collider.setScale(i.x,i.y),this._collider.type==="Ellipse"?this._collider.setOffset(new ge.SATVector(t.width*i.x*(1-2*s.x),t.height*i.y*(1-2*s.y))):this._collider.setOffset(new ge.SATVector(t.width*i.x*-s.x,t.height*i.y*-s.y)))}}class $s extends xr{constructor(t,r,i=!1){const s=document.createElement("canvas");s.width=t.x,s.height=t.y,r(s.getContext("2d"));const n=W.from(s);n.baseTexture.scaleMode=i?vt.LINEAR:vt.NEAREST,super(n)}}const tn=(e,t,r,i=!1)=>{const{fillStyle:s}=e;e.fillStyle=`#${t.toString(16)}`,r(),i&&e.fill(),e.fillStyle=s},vd=(e,t,r)=>{const{x:i,y:s,width:n,height:o}=t;e.beginPath(),e.moveTo(i+r,s),e.lineTo(i+n-r,s),e.quadraticCurveTo(i+n,s,i+n,s+r),e.lineTo(i+n,s+o-r),e.quadraticCurveTo(i+n,s+o,i+n-r,s+o),e.lineTo(i+r,s+o),e.quadraticCurveTo(i,s+o,i,s+o-r),e.lineTo(i,s+r),e.quadraticCurveTo(i,s,i+r,s),e.closePath()},Ed=(e,t,r,i)=>tn(e,t,()=>{vd(e,r,i)},!0);class Jr extends wr{constructor(t,r,i,s,n){super({name:"wall",placement:{position:Q(r,i),size:Q(s,n)},shape:"BOX",render:new $s(Q(s,n),o=>{tn(o,t,()=>o.fillRect(0,0,s,n))})})}}class Kr extends wr{constructor(t,r,i,s){super({name:"sphere",placement:{position:Q(r,i),size:Q(s,s),origin:Q(.5,.5)},shape:"CIRCLE",render:new $s(Q(s*2,s*2),n=>{tn(n,t,()=>{n.beginPath(),n.ellipse(s,s,s,s,0,0,2*Math.PI)},!0)})})}}var en={exports:{}};en.exports;(function(e){var t=function(){var r=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(h,l){if(!n[h]){n[h]={};for(var c=0;c<h.length;c++)n[h][h.charAt(c)]=c}return n[h][l]}var a={compressToBase64:function(h){if(h==null)return"";var l=a._compress(h,6,function(c){return i.charAt(c)});switch(l.length%4){default:case 0:return l;case 1:return l+"===";case 2:return l+"==";case 3:return l+"="}},decompressFromBase64:function(h){return h==null?"":h==""?null:a._decompress(h.length,32,function(l){return o(i,h.charAt(l))})},compressToUTF16:function(h){return h==null?"":a._compress(h,15,function(l){return r(l+32)})+" "},decompressFromUTF16:function(h){return h==null?"":h==""?null:a._decompress(h.length,16384,function(l){return h.charCodeAt(l)-32})},compressToUint8Array:function(h){for(var l=a.compress(h),c=new Uint8Array(l.length*2),u=0,f=l.length;u<f;u++){var y=l.charCodeAt(u);c[u*2]=y>>>8,c[u*2+1]=y%256}return c},decompressFromUint8Array:function(h){if(h==null)return a.decompress(h);for(var l=new Array(h.length/2),c=0,u=l.length;c<u;c++)l[c]=h[c*2]*256+h[c*2+1];var f=[];return l.forEach(function(y){f.push(r(y))}),a.decompress(f.join(""))},compressToEncodedURIComponent:function(h){return h==null?"":a._compress(h,6,function(l){return s.charAt(l)})},decompressFromEncodedURIComponent:function(h){return h==null?"":h==""?null:(h=h.replace(/ /g,"+"),a._decompress(h.length,32,function(l){return o(s,h.charAt(l))}))},compress:function(h){return a._compress(h,16,function(l){return r(l)})},_compress:function(h,l,c){if(h==null)return"";var u,f,y={},m={},B="",I="",w="",A=2,d=3,x=2,_=[],E=0,T=0,b;for(b=0;b<h.length;b+=1)if(B=h.charAt(b),Object.prototype.hasOwnProperty.call(y,B)||(y[B]=d++,m[B]=!0),I=w+B,Object.prototype.hasOwnProperty.call(y,I))w=I;else{if(Object.prototype.hasOwnProperty.call(m,w)){if(w.charCodeAt(0)<256){for(u=0;u<x;u++)E=E<<1,T==l-1?(T=0,_.push(c(E)),E=0):T++;for(f=w.charCodeAt(0),u=0;u<8;u++)E=E<<1|f&1,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=f>>1}else{for(f=1,u=0;u<x;u++)E=E<<1|f,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=0;for(f=w.charCodeAt(0),u=0;u<16;u++)E=E<<1|f&1,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=f>>1}A--,A==0&&(A=Math.pow(2,x),x++),delete m[w]}else for(f=y[w],u=0;u<x;u++)E=E<<1|f&1,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=f>>1;A--,A==0&&(A=Math.pow(2,x),x++),y[I]=d++,w=String(B)}if(w!==""){if(Object.prototype.hasOwnProperty.call(m,w)){if(w.charCodeAt(0)<256){for(u=0;u<x;u++)E=E<<1,T==l-1?(T=0,_.push(c(E)),E=0):T++;for(f=w.charCodeAt(0),u=0;u<8;u++)E=E<<1|f&1,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=f>>1}else{for(f=1,u=0;u<x;u++)E=E<<1|f,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=0;for(f=w.charCodeAt(0),u=0;u<16;u++)E=E<<1|f&1,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=f>>1}A--,A==0&&(A=Math.pow(2,x),x++),delete m[w]}else for(f=y[w],u=0;u<x;u++)E=E<<1|f&1,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=f>>1;A--,A==0&&(A=Math.pow(2,x),x++)}for(f=2,u=0;u<x;u++)E=E<<1|f&1,T==l-1?(T=0,_.push(c(E)),E=0):T++,f=f>>1;for(;;)if(E=E<<1,T==l-1){_.push(c(E));break}else T++;return _.join("")},decompress:function(h){return h==null?"":h==""?null:a._decompress(h.length,32768,function(l){return h.charCodeAt(l)})},_decompress:function(h,l,c){var u=[],f=4,y=4,m=3,B="",I=[],w,A,d,x,_,E,T,b={val:c(0),position:l,index:1};for(w=0;w<3;w+=1)u[w]=w;for(d=0,_=Math.pow(2,2),E=1;E!=_;)x=b.val&b.position,b.position>>=1,b.position==0&&(b.position=l,b.val=c(b.index++)),d|=(x>0?1:0)*E,E<<=1;switch(d){case 0:for(d=0,_=Math.pow(2,8),E=1;E!=_;)x=b.val&b.position,b.position>>=1,b.position==0&&(b.position=l,b.val=c(b.index++)),d|=(x>0?1:0)*E,E<<=1;T=r(d);break;case 1:for(d=0,_=Math.pow(2,16),E=1;E!=_;)x=b.val&b.position,b.position>>=1,b.position==0&&(b.position=l,b.val=c(b.index++)),d|=(x>0?1:0)*E,E<<=1;T=r(d);break;case 2:return""}for(u[3]=T,A=T,I.push(T);;){if(b.index>h)return"";for(d=0,_=Math.pow(2,m),E=1;E!=_;)x=b.val&b.position,b.position>>=1,b.position==0&&(b.position=l,b.val=c(b.index++)),d|=(x>0?1:0)*E,E<<=1;switch(T=d){case 0:for(d=0,_=Math.pow(2,8),E=1;E!=_;)x=b.val&b.position,b.position>>=1,b.position==0&&(b.position=l,b.val=c(b.index++)),d|=(x>0?1:0)*E,E<<=1;u[y++]=r(d),T=y-1,f--;break;case 1:for(d=0,_=Math.pow(2,16),E=1;E!=_;)x=b.val&b.position,b.position>>=1,b.position==0&&(b.position=l,b.val=c(b.index++)),d|=(x>0?1:0)*E,E<<=1;u[y++]=r(d),T=y-1,f--;break;case 2:return I.join("")}if(f==0&&(f=Math.pow(2,m),m++),u[T])B=u[T];else if(T===y)B=A+A.charAt(0);else return null;I.push(B),u[y++]=A+B.charAt(0),f--,A=B,f==0&&(f=Math.pow(2,m),m++)}}};return a}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(en);var Ra=en.exports;const ho="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ !#$%&'()*+-./:;<=>?@[]^_`{|}~",xd={format:"bmp",data:"N4IgDghgNgpgLnGIBcIA0BWAUgewBZoQBkAlgAZpQDyeAzIQIQDuA5pQOICiAxJQNIAnABJpaAbgCChAFQB2AEZpZAEgCKaAIwAvNACZphIgGsAbpSowcSgORmo7IUPTgSADxhQAzihAAGXwAsQQH+aIEYEQBsIWgBERiRtNGx8QkYASmp6ZmpGeHxMf7BIb4gAL5AA"},_d={format:"png",data:"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"},Id={format:"bmp",data:"N4IgDghgNgpgLnGIBcIA0BWAUgewBZoQBkAlgAZpQDyeAzIQIQDuA5pQOICiAxJQNIAnABJpaAbgCChAFQB2AEZpZAEgCKaAIwAvNACZphIgGsAbpSowcSgORmo7IUPTgSADxhQAzihAAGWQCcQcFKwUG+AaFhQaG+cfGhsklJvrH+6WnxqYHh8SAAvkA"},Bd={format:"bmp",data:"N4IgDghgNgpgLnGIBcIA0BWAUgewBZoQBkAlgAZpQDyeAzIQIQDuA5pQOICiAxJQNIAnABJpaAbgCChAFQB2AEZpZAEgCKaAIwAvNACZphIgGsAbpSowcSgORmo7IUPTgSADxhQAzihAaNABl1df1p6P0Dg0LR/GNiYtAAWBP8MDH8ANnSlWX8ADlz/AE5Cwgh/eXl/AGMq6LjYtAATRv8YGH8AMw6QAF8gA"},bd={ball:xd,fujisan:_d,greenman:Id,palette:Bd},Td=bd,wd=e=>{const t=ho.length;return[...e].reverse().reduce((r,i,s)=>{const n=ho.indexOf(i);if(n===-1)throw new Error(`: ${i}`);return r+n*Math.pow(t,s)},0)};class Ma extends xr{constructor(t,{antialias:r=!1}={}){const i=Td[t];let s;if(i.format==="bmp"){const n=document.createElement("canvas"),o=JSON.parse(Ra.decompressFromBase64(i.data)),[a,h]=[o.palette.split(",").map(wd),o.pixels.split(",").map(c=>[...c].map(u=>parseInt(u,16)))];n.width=h[0].length,n.height=h.length;const l=n.getContext("2d");for(let c=0;c<n.height;c++)for(let u=0;u<n.width;u++){const f=h[c][u];f!==0&&(l.fillStyle=`#${a[f].toString(16).padStart(6,"0")}`,l.fillRect(u,c,1,1))}s=W.from(n)}else{if(i.format!=="png")throw new Error(`: ${t} (${i.format})`);s=W.from(`data:image/png;base64,${i.data}`)}s.baseTexture.scaleMode=r?vt.LINEAR:vt.NEAREST,super(s)}}class Cd extends wr{constructor(t,r){super({name:"player",placement:{position:Q(t,r),size:Q(8,8),origin:Q(.5,.5),scale:Q(2,2)},shape:"BOX",render:new Ma("ball",{antialias:!0})})}}class Sd extends wr{constructor(){super({name:"background",placement:{position:Q(0,0)},shape:"NONE",render:new Ma("fujisan",{antialias:!0})})}}class Rd extends Sa{constructor(){super("col-test")}setup(t){return[this.addEntity(new Sd),this.addEntity(new Cd(40,67)),this.addEntity(new Jr(16755200,0,0,t.width,0),"topWall"),new Jr(16755200,0,t.height,t.width,0),new Jr(16755200,0,0,16,96),new Jr(16755200,112,0,16,96),new Kr(16755200,40,24,8),new Kr(16755200,88,72,8),new Kr(16755200,80,32,8),new Kr(16755200,77,40,24)]}update(t){const{player:r,topWall:i}=this.getEntities();r.setPosition(s=>Q.add(s,t.input.getAxis("WASD"))),r.setAngle(()=>t.now),t.hitTest(({self:s,target:n,overlap:o})=>{s===r.collider&&(n===i.collider&&console.log("HIT!"),r.setPosition(a=>Q.sub(a,o)))})}}const Md=1,Pd="truetype",Nd="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",Fd={"#":["2","","Copyright(C) 2002-2021 Num Kadoma","","These fonts are free softwares.","","Unlimited permission is granted to use, copy, and distribute it,","with or without modification, either commercially and noncommercially.",'THESE FONTS ARE PROVIDED "AS IS" WITHOUT WARRANTY.'],scale:Md,format:Pd,table:Nd},Dd=e=>({...e," ":"-0","":"+0"});class Od{constructor(t,r,i=Fd){V(this,"binarySize");V(this,"fontSize");V(this,"_canvas");this._canvas=document.createElement("canvas");const s=Dd(JSON.parse(Ra.decompressFromBase64(i.table)));this.fontSize=i.scale*8,this.binarySize=(+`0b${"1".repeat(this.fontSize)}`).toString(16).length;const n=[...t].map(l=>this.unzip(s[l])),o=n.reduce((l,c)=>l+(c!=null&&c.isHalf?.5:1)*this.fontSize,0);this._canvas.width=o,this._canvas.height=this.fontSize;const a=this._canvas.getContext("2d");let h=0;for(let l=0;l<n.length;l++){const{isHalf:c,content:u}=n[l],f=c?this.fontSize/2:this.fontSize;for(let y=0;y<this.fontSize;y++)for(let m=0;m<f;m++)u?(a.fillStyle=`#${r.toString(16).padStart(6,"0")}`,u[y][m]===1&&a.fillRect(h+m,y,1,1)):(a.fillStyle=`#${(Math.random()*16777215|0).toString(16).padStart(6,"0")}`,a.fillRect(h+m,y,1,1));h+=f}}get canvas(){return this._canvas}get size(){return Q(this._canvas.width,this._canvas.height)}unzip(t){try{const r=t.slice(0,1)==="-",i=t.slice(1),n="0".repeat(this.fontSize*(r?this.binarySize/2:this.binarySize)-i.length)+i,a=n.match(new RegExp(`.{${n.length/this.fontSize}}`,"g")).map(h=>(+`0x${h}`).toString(2).padStart(r?this.fontSize/2:this.fontSize,"0")).map(h=>[...h].map(Number));return{isHalf:r,content:a}}catch{return{isHalf:!1,content:null}}}}class Ud extends wr{constructor(t,r,{backgroundColor:i=16777215,textColor:s=0,borderRadius:n=8,padding:o=1}={}){const a=new Od(r,s),h=rf(a.size,Xe.wh(t)),l=new $s(Q(t.width,t.height),c=>{Ed(c,i,Xe(o,o,t.width-o*2,t.height-o*2),n),c.drawImage(a.canvas,h.x,h.y)});super({name:"button",placement:{position:Q(t.x,t.y),size:Q(t.width,t.height)},shape:"BOX",render:l})}}class Qd extends Sa{constructor(){super("main")}setup(t){return[this.addEntity(new Ud(Xe(32,16,64,16),""))]}update(t){const{button:r}=this.getEntities();ef(t.input.getMousePosition(),r.globalRect)&&t.input.isMouseTriggered("LEFT")&&t.changeScene("col-test")}}new gd([new Qd,new Rd]);
